var app=app||{};var tempalateStatus=false;var abstractModel=Backbone.Model.extend({defaults:{},});var abstractRefs=Backbone.Model.extend({defaults:{},});var MLTModel=Backbone.Model.extend({defaults:{}});var Erratums=Backbone.Model.extend({defaults:{}});var AbstractView=BaseFeatureView.extend({template:_.template($('#ev-abstractdetail-template').html()),template_comRef_Row:_.template($('#ev-template_compendexRefRwo').html()),template_editTagPod:_.template($('#ev-editTagPod-template').html()),template_mltPod:_.template($('#ev-mltPod-template').html()),el:'#ev-abstract-container',initialize:function(){this.abstractDetailtitle=$("#ev-abstractdetail-title");this.abstractDetailcontent=$("#ev-results-container");this.referanceDetail=new abstractRefs();this.model.on('sync',this.render,this);Backbone.Radio.channel("sessionsettingschannel").off("sessionsettings:update",this.updateHighlight);Backbone.Radio.channel("sessionsettingschannel").on("sessionsettings:update",this.updateHighlight,this);},events:{'click #abs-next-page':'navigatorClickNextPrev','click #abs-prev-page':'navigatorClickNextPrev','click .Side-Navigation, #versionsLinkBody.ev-versions-link':'navigatorwithcontentOnlyClick','click .abstractlink':'navigatorClick',"click #emaillink":"commonpopupClick","click #printlink":"commonpopupClick","click .abs_authors a[title='Search Author']":"submitClick","click .SpLink":"submitClick","click .backtoresults":"backToSearch","click #lindaHallId":"lindaHallpopup","show.bs.collapse .show-preview-content":"showPreview","click .blogthis-link":"blogthislinkClick","click .download-link":"showDLTemplate","click .oneclick-dl":"oneDownloadClick","click #anchortag":"showAllreferances",'click .resultcontent':'navigatorClick',"click #abstractlayout :checkbox":"selectRecord","click .fulltextabs, .ev-std-full-text > a":"openFullText","click .onClickSubmit":"abstractRender","click #citedby_Submit":"submitClick",'click .lh-link-Internal':'showLocalHoldingsPopup',"click a.knovellink":"trackKnovelUsage","click #tagdisplaylink, a.ev-mlt-record-link, a.ev-std-record-link":"abstractRender","click .ev-edit-tag-pod-section .ev-tag-row-edit":"editMyTag","click .ev-edit-tag-pod-form .edit-cancel":"cancelEditTag","click #addtag-btn":"createTag","input .addTag-input, .edit-input":"validateNameField","click .ev-edit-tag-pod-section .ev-tag-row-delete":"deleteMyTag","click .ev-edit-tag-pod-form .ev-tag-save":"saveMyTag","change #addTagPod #groupselect":"groupChange","click #mltPod a.mlt-viewAll, #mltPod .ev-mlt-author a, a#searchVersions":"submitClick","click .viewMore":"erratumViewMore"},validateNameField:function(e){e.preventDefault();app.nameFieldMask(e);return false;},groupChange:function(e){e.preventDefault();var scope=$(e.target).find("option:selected").data("scope"),self=this;if(scope==6){document.location="/customer/authenticate/loginfull.url";}else if(scope==1||scope==2||scope==4){self.$el.find(".ev-email-group").addClass("hidden")}else{self.$el.find(".ev-email-group").removeClass("hidden")}
return false;},saveMyTag:function(e){e.preventDefault();var $target=$(e.currentTarget),tagSearchValue=$target.data("oldvalue"),newTag=$target.parent().find('.edit-input'),newTagVal=newTag.val().trim(),scope=$target.data("scope"),groupid=$target.data("groupid"),customerid=$target.data("custid"),url='/rest/tags/search/updateEditableTag',self=this,userid=app.userSession.attributes.userProfile.userId,docid=self.model.attributes.result.doc.docid,tagModel=new Backbone.Model();if(newTagVal.length==0){newTag.addClass("warning");newTag.parents('span.ev-edit-tag-pod-form').find('.ev-text-input-label-error').show().text("Enter tag name.");newTag.focus();return false;}
tagSearchValue=encodeURIComponent(tagSearchValue);newTagVal=encodeURIComponent(newTagVal);url+="?tagSearchValue="+tagSearchValue
+"&newtag="+newTagVal
+"&scope="+scope
+"&userid="+userid;if(groupid)
url+="&groupid="+groupid;if(customerid)
url+="&customerid="+customerid;$.ajax({type:'GET',url:url,success:function(data){var tagCollection=new TagCollection();tagCollection.fetch({url:"/rest/tags/search/findByDocID?docid="+docid,success:function(model,data){BaseFeatureView.prototype.showhideLoading(false,self.$el);self.$el.find('.ev-edit-tag-pod-section').html(self.template_editTagPod({abstractDetail:data._embedded}));},error:function(model,error){}});},error:function(jqXHR,status,error){},complete:function(jqXHR,status){}});return false;},deleteMyTag:function(e){e.preventDefault();var $target=$(e.currentTarget),tagId=$target.data("tagid"),self=this,docid=self.model.attributes.result.doc.docid,tagModel=new TagModel({id:tagId});tagModel.destroy({success:function(data){var tagCollection=new TagCollection();tagCollection.fetch({url:"/rest/tags/search/findByDocID?docid="+docid,success:function(model,data){BaseFeatureView.prototype.showhideLoading(false,self.$el);self.$el.find('.ev-edit-tag-pod-section').html(self.template_editTagPod({abstractDetail:data._embedded}));},error:function(model,error){}});},error:function(jqXHR,status,error){console.log("delete tag record error!");}});return false;},createTag:function(e){e.preventDefault();var $target=$(e.currentTarget),newTag=$('#addTagPod .addTag-input'),scope=$("#groupselect option:selected").data("scope"),groupid=$("#groupselect option:selected").data("groupid")||null,self=this,docid=self.model.attributes.result.doc.docid,dbmask=self.model.attributes.result.doc.dbmask+"",isNotifyGroup=self.$el.find("#notifygroup").is(":checked");if(newTag.val().trim().length==0){newTag.addClass("warning");newTag.parents('.ev-add-tag-form').find('.ev-text-input-label-error').show().text("Enter tag name.");newTag.focus();return false;}
if(!app.userStatus){document.location="/customer/authenticate/loginfull.url";return false;}
var tagModel=new TagModel({scope:scope,tag:newTag.val().trim(),docID:docid,groupID:groupid,db:dbmask});if(scope!=1&&scope!=2&&scope!=4)
tagModel.set("emailNotification",isNotifyGroup);tagModel.once("sync",function(model,response,options){newTag.val("");newTag.removeClass("warning");newTag.parents('.ev-add-tag-form').find('.ev-text-input-label-error').hide();var tagCollection=new TagCollection();tagCollection.fetch({url:"/rest/tags/search/findByDocID?docid="+docid,success:function(model,data){BaseFeatureView.prototype.showhideLoading(false,self.$el);self.$el.find('.ev-edit-tag-pod-section').html(self.template_editTagPod({abstractDetail:data._embedded}));},error:function(model,error){}});});tagModel.once("error",function(model,response,options){});tagModel.save();return false;},cancelEditTag:function(e){e.preventDefault();var $target=$(e.currentTarget);$target.parent().prev().show();$target.parent().hide();return false;},editMyTag:function(e){e.preventDefault();var $target=$(e.currentTarget);$target.parent().next().show();$target.parent().hide();return false;},trackKnovelUsage:function(event){var containerObj=$(event.currentTarget);var knovelUsageUrl="/search/results/knovellink.url?docID="+containerObj.data('docid')+"&knovelUrl="+containerObj.data('knovel-link')+"&isbn="+containerObj.data('isbn')+"&docIndex="+containerObj.data('index')+"&usageOrigin=recordpage&usageZone=resultslist";$.get(knovelUsageUrl,function(data){if(data.status=="success"){}});},abstractRender:function(e){var alteredURL=$(e.currentTarget).attr("href");app.router.navigate(alteredURL,true);return false;},openFullText:function(event){event.preventDefault?event.preventDefault():event.returnValue=false;window.open($(event.target).attr("href"),"newwindow","width=600,height=500,toolbar=no,location=no,scrollbars,resizable");return false;},selectRecord:function(e){var self=this;if($(e.target).is(":checked")){if(app.model.attributes.selectedRecords>=500){this.showSelect500Error();return false;}
$.post(this.basketMarkUrl,"searchid="+this.model.get("searchId")+"&docid="+$(e.target).attr("docid")+"&handle="+$(e.target).attr("handle"),function(data){app.model.attributes.selectedRecords=parseInt(data.count);app.model.trigger("change:selectedRecords");});}else{$.post(this.basketUnMarkUrl,"searchid="+this.model.get("searchId")+"&docid="+$(e.target).attr("docid")+"&handle="+$(e.target).attr("handle"),function(data){app.model.attributes.selectedRecords=parseInt(data.count);app.model.trigger("change:selectedRecords");});if($("#page-select").is(":checked")){$("#page-select").prop("checked",false);}}},oneDownloadClick:function(e){e.preventDefault?e.preventDefault():e.returnValue=false;var dlUrl='/delivery/download/display.url?'+'&searchid='+this.model.get("searchId")+'&database='+this.model.get("result").doc.dbid+'&displayformat='+this.model.attributes.view+'&docidlist='+this.model.get('result').doc.docid+'&handlelist='+this.model.get('result').doc.hitindex+'&usageOrigin=recordpage';recordPageDownloadSubmit(dlUrl);return false;},showDLTemplate:function(e){e.preventDefault?e.preventDefault():e.returnValue=false;var commonPopupView=new CommonPopupView({link:'/delivery/download/display.url?'+'&searchid='+this.model.get("searchId")+'&database='+this.model.get("result").doc.dbid+'&displayformat='+this.model.attributes.view+'&docidlist='+this.model.get("result").doc.docid+'&handlelist='+this.model.get("result").doc.hitindex+'&usageOrigin=recordpage'});commonPopupView.show();return false;},blogthislinkClick:function(e){e.preventDefault?e.preventDefault():e.returnValue=false;var abstractShareRecordsView=new AbstractShareRecordsView(this.model);var commonPopupView=new CommonPopupView({view:abstractShareRecordsView});commonPopupView.show();return false;},showPreview:function(event){var container=$(event.target);var info=container.data('info');if(container.find(".abstract_content").html().trim().length>0){return;}
var prevModel=new AbstractPreviewModel();prevModel.url=info;var absPreview=new AbstractPreviewView({model:prevModel,id:'#'+container.attr('id')});},submitClick:function(e){e.preventDefault?e.preventDefault():e.returnValue=false;url=$(e.currentTarget).attr("href");if(_.isUndefined(app.getRegion().currentView.searchView)){var searchType=this.getQueryValue("searchtype");if(_.isUndefined(searchType)||_.isNull(searchType)||_.isEmpty(searchType)){searchType="Quick";}
Backbone.Radio.channel("searchFormChannel").request("resetForms",searchType,'searchLink');}
app.model.trigger("searchSubmitLink",url);return false;},backToSearch:function(e){e.preventDefault?e.preventDefault():e.returnValue=false;var url;var Back_href=$(e.currentTarget).attr("href");var searchIDfromURL=this.getURLParamByName("SEARCHID",Back_href);if(_.isUndefined(searchIDfromURL)||_.isNull(searchIDfromURL)||_.isEmpty(searchIDfromURL)){url=app.getRegion().currentView.abstractView.model.attributes.backtoresultsLink;}else{if(app.getRegion().currentView.abstractView.model.attributes.searchId!=searchIDfromURL){Back_href=Back_href.replace(searchIDfromURL,app.getRegion().currentView.abstractView.model.attributes.searchId)}
url=Back_href.replace(/^.*\/\/[^\/]+/,'');}
this.cachedBackTosearch(url);},lindaHallpopup:function(event){event.preventDefault?event.preventDefault():event.returnValue=false;var now=new Date();var milli=now.getTime();NewWindow=window.open($(event.target).attr("href")+"&timestamp="+milli,"NewWindow","status=yes,resizable,scrollbars,width=600,height=400");NewWindow.focus();return false;},abstractViewRender:function(){$(".ev-container").hide();$('#ev-abstract-container').show();$("#ev-abstractdetail-content").show();var title='<h1 id="recordbox_title" class="pageheader">Record</h1>';$("#ev-abstractdetail-title").html(title);$("#ev-results-container").html($("#ev-loading").clone(false).html());url=this.removeURLParameter("/"+Backbone.history.getFragment(),'toolsinScopus');this.getAbstractDetails(url);},navigatorClick:function(event){var url=this.getAbstractModelCommon(event,false);app.router.navigate(url,{trigger:false,replace:true});return false;},navigatorClickNextPrev:function(event){var url=this.getAbstractModelCommon(event,true);app.router.navigate(url,{trigger:false,replace:false});return false;},navigatorwithcontentOnlyClick:function(event){var url=this.getAbstractModelCommon(event,false);app.router.navigate(url+'&toolsinScopus=Noload',{trigger:false,replace:true});return false;},showAllreferances:function(event){event.preventDefault?event.preventDefault():event.returnValue=false;var contentUrl=$(event.target).attr('href').replace("?","?content=true&");var self=this;this.referanceDetail.fetch({url:contentUrl,contentType:"application/json",success:function(){self.showMoreReferance(self.referanceDetail);}});return false;},showMoreReferance:function(morereferanceBean){var abstractModel=morereferanceBean.toJSON();if(abstractModel.view=='compendexref'||abstractModel.view=='patentref'||abstractModel.view=='nonpatentref'){$(this.el).find("#reference_Result_Row").remove();$(this.el).find("#compendexRowId").append(this.template_comRef_Row({abstractDetail:abstractModel}));_.each(abstractModel.referenceBean.resultformat_abssourcelines,function(value,status){var resultnum=abstractModel.referenceBean.startingIndex+status+1;$(this.el).find("#citationsourceline"+resultnum).empty();$("#citationsourceline"+resultnum).append(value);});$($(this.el).find("#abstractlayout")).find("ul").addClass("ev-bullet-list-small");return;}
_.map(abstractModel.abstractDetail_highlight_terms_map,function(value,key){$(this.el).find("#abstractDetail_highlight_"+key).empty();$("#abstractDetail_highlight_"+key).append(value);});$(".collapse").on("hide.bs.collapse",function(){$(this).parent().find(".plusminus span").html('Open');$(this).parent().find(".plusminus span").last().html('+');});$(".collapse").on("show.bs.collapse",function(){$(this).parent().find(".plusminus span").html('Close');$(this).parent().find(".plusminus span").last().html('-');if($(this).attr("id")=="linkedTermsHolder"&&$('#linkedTermsHolder').html().length==0){findLongLinkTerms(abstractModel);}});},getAbstractModelCommon:function(event,trigger){$("#abstractLodingId").html($("#ev-loading").clone(false).html());event.preventDefault?event.preventDefault():event.returnValue=false;var url;var target=event.target;while(target){if(target instanceof HTMLAnchorElement){url=target.getAttribute('href');break;}
target=target.parentNode;}
this.getAbstractDetails(url,trigger);return url;},commonpopupClick:function(event){event.preventDefault?event.preventDefault():event.returnValue=false;var url;var target=event.target;while(target){if(target instanceof HTMLAnchorElement){url=target.getAttribute('href');break;}
target=target.parentNode;}
var commonPopupView=new CommonPopupView({link:url,});commonPopupView.show();return false;},assignVariables:function(){var searchquery=this.model.encodeddisplayquery;var sessionid=encodeURIComponent(this.model.get("sessionid"));var searchid=encodeURIComponent(this.model.get("searchId"));var resultscount=this.model.get("resultscount");var searchtype=encodeURIComponent(this.model.get("QueryString").searchtype);var database=this.model.get("database");var databaseid=this.model.get("compmask");var handle=this.model.get("result").doc.hitindex;var docid=this.model.get("result").doc.docid;var view=encodeURIComponent(this.model.get("view"));},getAbstractDetails:function(urlParam,trigger_value){var param=this.getURLParam();if(!(param.patentrefabstract=='compendexajax'||param.patentrefabstract=='patentajax'||param.patentrefabstract=='nonpatentajax')){var contentUrl=urlParam.replace("?","?content=true&");}else{var contentUrl=urlParam;}
var self=this;this.model.fetch({url:contentUrl,contentType:"application/json",success:function(model,response,options){},error:function(xhr,status,error){if(status.responseText&&status.responseText.indexOf('"error":"captcha')!=-1){$("#ev-results-container").html("");BaseFeatureView.prototype.showHideCaptcha(true,status.responseJSON.imagetextenc,self.$el,self,self.verifyCaptchaCallback,{urlParam:urlParam});}else{if(status.status==422){app.model.trigger("ev:alert",status.responseJSON.error,status.responseJSON.message,false);}else{if(status.responseText.indexOf('<h1 class="pageheader">System Error</h1>'==-1)){window.location=self.getSystemError();}else{app.model.trigger("ev:alert","error",status.responseText,false);}}}
self.render();}});},verifyCaptchaCallback:function(callbackData){$("#ev-results-container").html($("#ev-loading").clone(false).html());this.getAbstractDetails(callbackData.urlParam);},render:function(){var ModelJson=this.model.toJSON();if(this.model.get("view")=='abstract'||this.model.get("view")=='detailed'){this.model.set("usageOrigin","recordpage");}else{this.model.set("usageOrigin",this.model.get("view")+"s");}
this.model.set("QueryString",this.getURLParam());this.model.set("baseaddress",$(location).attr("host"));this.setdetUrl();this.setabsUrl();this.setPrevandNextUrl();if(this.model.get("QueryString").toolsinScopus!='Noload'){this.abstractDetailcontent.html(this.template({abstractDetail:ModelJson}));}
this.renderAbstractQueryBarView();this.renderAbstractMainContentView();if(this.model.get("QueryString").toolsinScopus!='Noload'){CitedByManager.init("#ev-abstractdetail-content",this.model.get("result").doc.docid);}
if(this.model.get("result").doc.dbid=='cpx'||this.model.get("result").doc.dbid=='ins'){this.loadMLTDoc(this.model.get("result").doc.docid,this.model.get("searchId"));}else{this.$el.find('#mltPod').hide();}
this.renderAbstractOutputToolBarView();this.assignVariables();this.onloadEvents();$(this.el).fadeIn();this.redirectafterLogin(this.model.get("QueryString"));this.$el.find("#groupselect").select2({minimumResultsForSearch:Infinity,width:'60%'});},loadErratum:function(docId,requestType,searchId){var erratums=new Erratums();erratums.fetch({url:"/search/record/erratumrecord.url?docId="+docId+"&requestType="+requestType,contentType:"application/json",suppressErrors:true,success:function(data){if(!_.isUndefined(data.attributes)&&!_.isUndefined(data.attributes.erratumResults)&&!_.isNull(data.attributes.erratumResults)&&!_.isEmpty(data.attributes.erratumResults)){var i=0;_.each(data.attributes.erratumResults,function(value,status){if(!_.isUndefined(value.abstractrecord.text)&&!_.isNull(value.abstractrecord.text)&&!_.isEmpty(value.abstractrecord.text)){var count=200;var href='';if(value.abstractrecord.text.length<=count){href='<li class="padding-bottom-10"><a href="/search/doc/abstract.url?usageOrigin=recordpage&SEARCHID='+searchId+'&docid='+value.doc.docid+'&indivDoc=true" title="View records">'
+value.titleNoHighlight+'</a></br><label>'+value.abstractrecord.text+'</label> </li>';}else{var space=value.abstractrecord.text.substring(count,count+1);while(space.indexOf(" ")==-1){if(_.isUndefined(space)||_.isEmpty(space)){break;}
count=count+1;space=value.abstractrecord.text.substring(count,count+1);}
var lessView=value.abstractrecord.text.slice(0,count+1);var moreView=value.abstractrecord.text.replace(lessView,"");i=i+1;href='<li class="padding-bottom-10"><a href="/search/doc/abstract.url?usageOrigin=recordpage&SEARCHID='+searchId+'&docid='+value.doc.docid+'&indivDoc=true" title="View records">'
+value.titleNoHighlight+'</a></br><label>'+lessView+'<span class="collapse" id="erratumText'+i+'">'
+moreView+'</span><a class="viewMore display-inline" href="#erratumText'+i+'" aria-expanded="false" aria-controls="erratumText'
+i+'" data-toggle="collapse"><span class="plusminus"></a></label> </li>';}
$('#Erratum_list').append(href);}});$('#Erratum_row').show();}else if(!_.isUndefined(data.attributes)&&!_.isUndefined(data.attributes.sourceResults)&&!_.isNull(data.attributes.sourceResults)&&!_.isEmpty(data.attributes.sourceResults)){var href='<a href="/search/doc/abstract.url?usageOrigin=recordpage&SEARCHID='+searchId+'&docid='+data.attributes.sourceResults["0"].doc.docid+'&indivDoc=true" title="View records">'+data.attributes.sourceResults["0"].titleNoHighlight+'</a>'
$('#Erratum_source_container').append(href);$('#Erratum_source_row').show();}},error:function(jqXHR,status,error){console.log(status);$('#Erratum_source_row').hide();$('#Erratum_row').hide();}});},erratumViewMore:function(event){if(event.currentTarget.getAttribute('aria-expanded')==='false'){$("#"+event.currentTarget.getAttribute('aria-controls')).css('display','inline');}else{$("#"+event.currentTarget.getAttribute('aria-controls')).css('display','none');}},loadMLTDoc:function(docId,searchId){var self=this,mltV=app.mltVersion||1,myMLTModel=new MLTModel();if(app.model.attributes.moreLikeThisFeatureAllowed){BaseFeatureView.prototype.showhideLoading(true,self.$el.find('#mltPod'));myMLTModel.fetch({url:"/morelikethis/records.url?docId="+docId+"&version="+mltV,contentType:"application/json",success:function(data){BaseFeatureView.prototype.showhideLoading(false,self.$el.find('#mltPod'));data.attributes.searchId=searchId;if(data.attributes.results.length>0){if(!_.isUndefined(data.attributes.numericDataAvailable)&&!_.isUndefined(data.attributes.numericDataUsed)){app.mlt.numericDataAvailable=data.attributes.numericDataAvailable;app.mlt.numericDataUsed=data.attributes.numericDataUsed;}
self.$el.find('#mltPod').html(self.template_mltPod({abstractDetail:data.attributes}));}else{self.$el.find('#mltPod').hide();}},error:function(jqXHR,status,error){BaseFeatureView.prototype.showhideLoading(false,self.$el.find('#mltPod'));self.$el.find('#mltPod').hide();}});}else{self.$el.find('#mltPod').hide();}},onloadEvents:function(){Backbone.Radio.channel("highlightChannel").request("setStyles");$("#highlight").show();if(app.highlightingEnabled()){$("#hlight_color_abs").spectrum({showPaletteOnly:true,showPalette:true,color:app.sessionSettings.attributes.highlight,preferredFormat:'hex',palette:[['#ff8200','#2babe2','#158c75',"#000000","#ffffaa"]]});$("#hlight_color_abs").change(function(){var newColor=$("#hlight_color_abs").spectrum("get").toString();Backbone.Radio.channel("sessionsettingschannel").request("sessionsettings:set",{highlight:newColor})
if(newColor!="#ffffaa"){$(".bghit").removeClass("bghit").addClass("hit");$(".sp-preview-inner").css({"border-top":"","border-right":"","width":"","height":""});$("#hghlightingStyleId").html('span.hit, label.hit, td.hit, .resulttitle span.hit{font-size:100%;font-weight:bold;	color:'+app.sessionSettings.attributes.highlight+' !important;}span.bghit, label.bghit, td.bghit {font-weight: bold;font-size:100%;color:black;background-color: #FFFFAA;}a span.hit{color:inherit;}');}
if(newColor=="#ffffaa"){$(".hit").removeClass("hit").addClass("bghit");$("#hghlightingStyleId").append('span.hit, label.hit {font-weight: bold;}span.bghit, label.bghit {font-weight: bold;font-size:100%;color:black !important;background-color: #FFFFAA;}');$(".sp-preview-inner").css({"border-top":"20px solid #000000","border-right":"25px solid #ffffaa","width":"0","height":"0"});}});}else{if(_.indexOf(["#000000","#ffffaa"],app.sessionSettings.attributes.highlight)<0){Backbone.Radio.channel("sessionsettingschannel").request("sessionsettings:set",{highlight:"#ffffaa"});$(".hit").removeClass("hit").addClass("bghit");}
$("#hlight_color_abs").spectrum({showPaletteOnly:true,showPalette:true,color:app.sessionSettings.attributes.highlight,preferredFormat:'hex',palette:[["#000000","#ffffaa"]]});if(app.sessionSettings.attributes.highlight!="#ffffaa"){$(".bghit").removeClass("bghit").addClass("hit");$(".sp-preview-inner").css({"border-top":"","border-right":"","width":"","height":""});}
$("#hlight_color_abs").change(function(){var newColor=$("#hlight_color_abs").spectrum("get").toString();if(newColor!="#ffffaa"){$(".bghit").removeClass("bghit").addClass("hit");$(".sp-preview-inner").css({"border-top":"","border-right":"","width":"","height":""});}
$(".hit").css("color",newColor);$(".bghit").css("font-weight","bold");$("a span.hit").css("color","inherit");if(newColor=="#ffffaa"){$(".hit").removeClass("hit").addClass("bghit");$("#hghlightingStyleId").append('span.hit, label.hit {font-weight: bold;}span.bghit, label.bghit {font-weight: bold;font-size:100%;color:black !important;background-color: #FFFFAA;}');$(".sp-preview-inner").css({"border-top":"20px solid #000000","border-right":"25px solid #ffffaa","width":"0","height":"0"});}
Backbone.Radio.channel("sessionsettingschannel").request("sessionsettings:set",{highlight:newColor});});}
if(app.sessionSettings.attributes.highlight=="#ffffaa"||(!app.highlightingEnabled()&&app.sessionSettings.attributes.highlight=="#ffffaa")){$(".sp-preview-inner").css({"border-top":"20px solid #000000","border-right":"25px solid #ffffaa","width":"0","height":"0"});}},updateHighlight:function(changedAttrs){if(changedAttrs.highlight){$("#hlight_color_abs").spectrum("set",changedAttrs.highlight);$(".hit").css("color",changedAttrs.highlight);$("a span.hit").css("color","inherit");}},setdetUrl:function(){var detUrl;if(this.model.get("QueryString").indivDoc=='true'){detUrl='/search/doc/detailed.url?patentrefdetailed=true&pageType='+this.model.get("pageType")+'&searchtype='+encodeURIComponent(this.model.get("searchtype"))+'&SEARCHID='+encodeURIComponent(this.model.get("searchId"))+'&database='+encodeURIComponent(this.model.get("database"))+'&docid='+encodeURIComponent(this.model.get("result").doc.docid);if(this.model.get("QueryString").tagscope){detUrl=detUrl.concat('&tagscope='+encodeURIComponent(this.model.get("QueryString").tagscope));}
detUrl=detUrl.concat('&format='+encodeURIComponent(this.model.get("pageType"))+'DetailedFormat&indivDoc=true');}else{detUrl='/search/doc/detailed.url?'
if(_.isUndefined(this.model.get("searchId"))||_.isNull(this.model.get("searchId"))||_.isEmpty(this.model.get("searchId"))){detUrl=detUrl.concat('docid='+encodeURIComponent(this.model.get("result").doc.docid));}else{detUrl=detUrl.concat('SEARCHID='+encodeURIComponent(this.model.get("searchId"))+'&DOCINDEX='+this.model.get("docIndex")+'&database='+encodeURIComponent(this.model.get("database"))+'&pageType='+encodeURIComponent(this.model.get("pageType"))+'&searchtype='+encodeURIComponent(this.model.get("searchtype")));if(this.model.get("QueryString").tagscope){detUrl=detUrl.concat('&tagscope='+encodeURIComponent(this.model.get("QueryString").tagscope));}
detUrl=detUrl.concat('&dedupResultCount='+this.model.get("dedupResultCount")+'&format='+encodeURIComponent(this.model.get("pageType"))+'DetailedFormat');if(this.model.get("searchtype")=='tagSearch'){detUrl=detUrl.concat('&docid='+encodeURIComponent(this.model.get("result").doc.docid));}}}
this.model.set("detUrl",detUrl);},setabsUrl:function(){var absUrl;if(this.model.get("QueryString").indivDoc=='true'){absUrl='/search/doc/abstract.url?patentrefabstract=true&pageType='+this.model.get("pageType")+'&searchtype='+encodeURIComponent(this.model.get("searchtype"))+'&SEARCHID='+encodeURIComponent(this.model.get("searchId"))+'&database='+encodeURIComponent(this.model.get("database"))+'&docid='+encodeURIComponent(this.model.get("result").doc.docid);if(this.model.get("QueryString").tagscope){absUrl=absUrl.concat('&tagscope='+encodeURIComponent(this.model.get("QueryString").tagscope));}
absUrl=absUrl.concat('&format='+encodeURIComponent(this.model.get("pageType"))+'&indivDoc=true');}else{absUrl='/search/doc/abstract.url?'
if(_.isUndefined(this.model.get("searchId"))||_.isNull(this.model.get("searchId"))||_.isEmpty(this.model.get("searchId"))){absUrl=absUrl.concat('docid='+encodeURIComponent(this.model.get("result").doc.docid));}else{absUrl=absUrl.concat('SEARCHID='+encodeURIComponent(this.model.get("searchId"))+'&DOCINDEX='+this.model.get("docIndex")+'&database='+encodeURIComponent(this.model.get("database"))+'&pageType='+encodeURIComponent(this.model.get("pageType"))+'&searchtype='+encodeURIComponent(this.model.get("searchtype")));if(this.model.get("QueryString").tagscope){absUrl=absUrl.concat('&tagscope='+encodeURIComponent(this.model.get("QueryString").tagscope));}
absUrl=absUrl.concat('&dedupResultCount='+this.model.get("dedupResultCount")+'&format='+encodeURIComponent(this.model.get("pageType"))+'');if(this.model.get("searchtype")=='tagSearch'){absUrl=absUrl.concat('&docid='+encodeURIComponent(this.model.get("result").doc.docid));}}}
this.model.set("absUrl",absUrl);},setPrevandNextUrl:function(){var prevURL;var nextURL;if((this.model.get("view")=='abstract')){prevURL='/search/doc/abstract.url';nextURL='/search/doc/abstract.url';}else if(this.model.get("view")=='detailed'){prevURL='/search/doc/detailed.url';nextURL='/search/doc/detailed.url';}else{prevURL='/search/doc/abstract.url';nextURL='/search/doc/abstract.url';}
prevURL=prevURL.concat('?&pageType='+this.model.get("pageType")+'&searchtype='+this.model.get("searchtype")+'&SEARCHID='+this.model.get("searchId")+'&DOCINDEX='+(this.model.get("docIndex")-1)+'&database='+this.model.get("database")+'&format='+this.model.get("pageType"));nextURL=nextURL.concat('?&pageType='+this.model.get("pageType")+'&searchtype='+this.model.get("searchtype")+'&SEARCHID='+this.model.get("searchId")+'&DOCINDEX='+(this.model.get("docIndex")+1)+'&database='+this.model.get("database")+'&format='+this.model.get("pageType"));if((this.model.get("view")=='detailed')){prevURL=prevURL.concat('DetailedFormat');nextURL=nextURL.concat('DetailedFormat');}else{prevURL=prevURL.concat('AbstractFormat');nextURL=nextURL.concat('AbstractFormat');}
prevURL=prevURL.concat('&dedupResultCount='+this.model.get("dedupResultCount"));nextURL=nextURL.concat('&dedupResultCount='+this.model.get("dedupResultCount"));if(this.model.get("dupFlag")){prevURL=prevURL.concat('&DupFlag='+this.model.get("dupFlag")+'&dbpref='+this.model.get("dedupQuery").dedupDB+'&fieldpref='+this.model.get("dedupQuery").dedupOption+'&origin='+this.model.get("dedupQuery").origin+'&dbLink='+this.model.get("dedupQuery").dbLink+'&linkSet='+this.model.get("dedupQuery").linkSet);nextURL=nextURL.concat('&DupFlag='+this.model.get("dupFlag")+'&dbpref='+this.model.get("dedupQuery").dedupDB+'&fieldpref='+this.model.get("dedupQuery").dedupOption+'&origin='+this.model.get("dedupQuery").origin+'&dbLink='+this.model.get("dedupQuery").dbLink+'&linkSet='+this.model.get("dedupQuery").linkSet);}
if(!_.isEmpty(this.model.get("responseModel"))&&!_.isEmpty(this.model.get("responseModel").prevDocId)){prevURL=prevURL.concat('&docid='+this.model.get("responseModel").prevDocId);}
if(!_.isEmpty(this.model.get("responseModel"))&&!_.isEmpty(this.model.get("responseModel").nextDocId)){nextURL=nextURL.concat('&docid='+this.model.get("responseModel").nextDocId);}
if(!_.isEmpty(this.model.get("tagscope"))){prevURL=prevURL.concat('&tagscope='+this.model.get("tagscope"));nextURL=nextURL.concat('&tagscope='+this.model.get("tagscope"));}
prevURL=prevURL.concat('&usageOrigin='+this.model.get("usageOrigin")+'&usageZone=previousrecord');nextURL=nextURL.concat('&usageOrigin='+this.model.get("usageOrigin")+'&usageZone=nextrecord');this.model.set("prevURL",prevURL);this.model.set("nextURL",nextURL);},renderAbstractQueryBarView:function(){var abstractQueryBarView=new AbstractQueryBarView(this.model,this.el);abstractQueryBarView.render();},renderAbstractOutputToolBarView:function(){var abstractOutputToolBarView=new AbstractOutputToolBarView(this.model,this.el);abstractOutputToolBarView.render();},renderAbstractMainContentView:function(){var abstractMainContentView=new AbstractMainContentView(this.model,this.el);abstractMainContentView.render();}});var AbstractQueryBarView=BaseFeatureView.extend({template:_.template($('#ev-abstractQueryBar-template').html()),initialize:function(model,el){this.model=model;this.el=el;},render:function(){$(this.el).find("#abstract-query-bar").html(this.template({abstractDetail:this.model.toJSON()}));},});var AbstractOutputToolBarView=BaseFeatureView.extend({template:_.template($('#ev-abstractOutputToolBar-template').html()),initialize:function(model,el){this.model=model;this.el=el;},render:function(){$(this.el).find("#abstract-output-toolbar_top").html(this.template({abstractDetail:this.model.toJSON(),position:'top'}));$(this.el).find("#abstract-output-toolbar_bottom").html(this.template({abstractDetail:this.model.toJSON(),position:'bottom'}));checkForOneClick();},});var AbstractShareRecordsView=Backbone.Marionette.View.extend({template:_.template($('#ev-shareRecords-template').html()),initialize:function(model){this.model=model;},render:function(){$("#common-modal-content-wrapper-id").html(this.template({abstractDetail:this.model.toJSON()}));}});var AbstractMainContentView=BaseFeatureView.extend({template:_.template($('#ev-AbstractMainContent-template').html()),initialize:function(model,el){this.model=model;this.el=el;},render:function(){$(this.el).find("#abstractareaResultId").html(this.template({abstractDetail:this.model.toJSON()}));this.renderAbstractFormatViewView();if(!_.isUndefined(this.model.attributes.result.doi)&&this.model.attributes.result.doi.length>0){this.renderPlumColumn();}else{$("#plumCol").hide();}},renderAbstractFormatViewView:function(){var abstractFormatDetailView=new AbstractFormatDetailView(this.model,this.el);abstractFormatDetailView.render();},renderPlumColumn:function(){this.plumCol=new PlumColumnView({model:this.model});this.plumCol.render();}});plumWidget={plumVisibility:function(){$("#plumCol").css("display","block");}};var PlumColumnView=BaseFeatureView.extend({template:_.template($("#ev-plumx-template").html()),el:"#plumCol",init:function(){},onRender:function(){__plumX.widgets.init();}});var AbstractFormatDetailView=BaseFeatureView.extend({template_abstract:_.template($('#ev-AbstractFormat-template').html()),template_detail:_.template($('#ev-DetailFormat-template').html()),template_comRef:_.template($('#ev-AbstractCompendexRef-template').html()),template_comRef_Row:_.template($('#ev-template_compendexRefRwo').html()),template_stdVer:_.template($('#ev-StandardVer-template').html()),template_stdVer_Row:_.template($('#ev-StandardVerRow-template').html()),initialize:function(model,el){this.model=model;this.el=el;},render:function(){var title_searchType=app.getRegion().currentView.abstractView.model.attributes.QueryString.searchtype;if(_.isUndefined(title_searchType)||_.isEmpty(title_searchType)||_.isNull(title_searchType)||'quickSearch'==title_searchType){title_searchType='Quick';}else if('expertSearch'==title_searchType){title_searchType='Expert';}
window.document.title="Engineering Village - "+title_searchType+" Search Abstract Format";var abstractModel=this.model.toJSON();app.appChannel.trigger('ev:sitecatalyst','newPage',abstractModel.view);if(abstractModel.view=='compendexref'||abstractModel.view=='patentref'||abstractModel.view=='nonpatentref'){var ref="Compendex";if(abstractModel.view=='patentref'){ref="Patent"}else if(abstractModel.view=='nonpatentref'){ref="Other"}
window.document.title="Engineering Village - "+ref+" References";$(this.el).find("#abstractlayout").html(this.template_comRef({abstractDetail:abstractModel}));$(this.el).find("#compendexRowId").html(this.template_comRef_Row({abstractDetail:abstractModel}));_.each(abstractModel.referenceBean.resultformat_abssourcelines,function(value,status){var resultnum=abstractModel.referenceBean.startingIndex+status+1;$(this.el).find("#citationsourceline"+resultnum).empty();$("#citationsourceline"+resultnum).append(value);});$($(this.el).find("#abstractlayout")).find("ul").addClass("ev-bullet-list-small");return;}else if(abstractModel.view=='standardref'){window.document.title="Engineering Village - Standard Version";$(this.el).find("#abstractlayout").html(this.template_stdVer({abstractDetail:abstractModel}));$(this.el).find("#standardRow").html(this.template_stdVer_Row({abstractDetail:abstractModel}));}else if(abstractModel.view=='detailed'){window.document.title="Engineering Village - "+title_searchType+" Search Detailed Format";$(this.el).find("#abstractlayout").html(this.template_detail({abstractDetail:abstractModel}));}else{window.document.title="Engineering Village - "+title_searchType+" Search Abstract Format";$(this.el).find("#abstractlayout").html(this.template_abstract({abstractDetail:abstractModel}));$(this.el).find("#abstractDetail_resultformat_abssourceline").empty();$(this.el).find("#abstractDetail_resultformat_abssourceline").append(abstractModel.abstractDetail_resultformat_abssourceline);}
_.map(abstractModel.abstractDetail_highlight_terms_map,function(value,key){$(this.el).find("#abstractDetail_highlight_"+key).empty();$("#abstractDetail_highlight_"+key).append(value);});$(".collapse").on("hide.bs.collapse",function(){$(this).parent().find(".plusminus span").html('Open');$(this).parent().find(".plusminus span").last().html('+');});$(".collapse").on("show.bs.collapse",function(){$(this).parent().find(".plusminus span").html('Close');$(this).parent().find(".plusminus span").last().html('-');if($(this).attr("id")=="linkedTermsHolder"&&$('#linkedTermsHolder').html().length==0){findLongLinkTerms(abstractModel);}});var manuallyLinkedEl=$("#manuallyLinked");if(manuallyLinkedEl.length){var values=manuallyLinkedEl.html().split('|');manuallyLinkedEl.html('<ul>'+$.map(values,function(v){return'<li>'+v+'</li>';}).join('')+'</ul>');}}});function findLongLinkTerms(abstractModel){var searchid=encodeURIComponent(abstractModel["searchId"]);var docid=abstractModel["result"].doc.docid;var tagdoc=abstractModel.tagdoc;var date=new Date();var url="/search/doc/enclongterms.url?searchid="
+searchid+"&istag="+tagdoc+"&docid="+docid+"&timestamp="
+date.getTime();$.ajax({url:url,success:function(data){$('#linkedTermsHolder').html(data);var linkedTerm=$("#linkedTermsHolder");if(linkedTerm.length){var values=linkedTerm.html().split('|');linkedTerm.html('<ul>'+$.map(values,function(v){return'<li>'+v+'</li>';}).join('')+'</ul>');}},error:function(){varTerms="An error has occurred.";}});}
function appendResult(obj){if(obj.emailStatus){$('#emailStatusText').html('Your email has been successfully sent to '+obj.to);try{siteCatalyst.emailPrintEvents([{"docid":docid}],'email');}catch(e){}}else{$('#emailStatusText').html('Your email has not been sent due to some error, please try again later.');}}
function emailSubmit(form){$.ajax({type:'POST',url:form.action,data:$("#emailForm").serialize()+"&via=ajax",success:function(data){$("#emailRecordForm").hide();$("#footerId").hide();appendResult(JSON.parse(data));tempalateStatus=true;},error:function(jqXHR,status,error){console.warn("error!");},complete:function(jqXHR,status){}});return false;}
function copyfieldtext(e,id){var field=document.getElementById(id)
field.focus()
field.setSelectionRange(0,field.value.length)
copySelectionText()}
function copySelectionText(){var copysuccess
try{copysuccess=document.execCommand("copy")}catch(e){copysuccess=false}
return copysuccess}
function validateForm(sendemail){$(".w-message").empty();$('input').removeClass('warning');var milli=(new Date()).getTime();sendemail.from.value=sendemail.from.value.replace(/\s+/g,"");sendemail.to.value=sendemail.to.value.replace(/\s+/g,"");var from=sendemail.from.value;var to=sendemail.to.value;to=to.replace(/;/g,",");var subject=sendemail.subject.value;var folder_id="";if(sendemail.folderid){folder_id=sendemail.folderid.value;}
if(from.length==0){errorMsg(sendemail.from,"Provide your valid email address.");return false;}
var fromSplit=from.replace(/;/g,",");fromSplit=fromSplit.split(/,/);if(fromSplit.length>1){errorMsg(sendemail.from,"You may enter only one email address in the Your email field.");return false;}
if(to.length==0){errorMsg(sendemail.to,"Provide a recipient email address.");return false;}
var booleanTo=validateToRecipients(to);if(booleanTo==false){errorMsg(sendemail.to,"Invalid Email address.");return false;}
var booleanFrom=validateEmail(from);if(booleanFrom==false){errorMsg(sendemail.from,"Invalid Email address.");return false;}
if(subject.length==0){errorMsg(sendemail.subject,"Provide a Subject.");return(false);}
emailSubmit(sendemail);return false;};function errorMsg(event,msg){$(event).addClass("warning");$(event).parents('td').find('.w-message').show().text(msg);$(event).parent().find('label').addClass("active");event.focus();return(false);}
function validateToRecipients(toEmail)
{var result=true;receipients=toEmail.split(/,/);for(var i=0;i<receipients.length;i++)
{if(!echeck(receipients[i])){return false;}
result=result||validateEmail(email);}
return result;}
function validateEmail(email)
{var splitted=email.match("^(.+)@(.+)$");if(splitted==null)return false;if(splitted[1]!=null)
{var regexp_user=/^\"?[\w-_\.]*\"?$/;if(splitted[1].match(regexp_user)==null)return false;}
if(splitted[2]!=null)
{var regexp_domain=/^[\w-\.]*\.[A-Za-z]{2,4}$/;if(splitted[2].match(regexp_domain)==null)
{var regexp_ip=/^\[\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\]$/;if(splitted[2].match(regexp_ip)==null)return false;}
return true;}
return false;}
function echeck(str){var at="@"
var dot="."
var lat=str.indexOf(at)
var lstr=str.length
var ldot=str.indexOf(dot)
if(str.indexOf(at)==-1){return false}
if(str.indexOf(at)==-1||str.indexOf(at)==0||str.indexOf(at)==lstr){return false}
if(str.indexOf(dot)==-1||str.indexOf(dot)==0||str.indexOf(dot)==lstr){return false}
if(str.indexOf(at,(lat+1))!=-1){return false}
if(str.substring(lat-1,lat)==dot||str.substring(lat+1,lat+2)==dot){return false}
if(str.indexOf(dot,(lat+2))==-1){return false}
if(str.indexOf(" ")!=-1){return false}
return true}
function savedrecordsFormat(sessionid,searchtype,searchid,database,databaseid,displayformat,source){var i=0;var url=null;var docidstring="&docidlist=";var handlestring="&handlelist=";var hiddensize=document.quicksearchresultsform.elements.length;var cbcheckvalue=false;if(document.quicksearchresultsform.cbresult.checked){cbcheckvalue=true;}
for(var i=0;i<hiddensize;i++){var nameOfElement=document.quicksearchresultsform.elements[i].name;var valueOfElement=document.quicksearchresultsform.elements[i].value;if((nameOfElement.search(/HANDLE/)!=-1)&&(valueOfElement!="")){handlestring+=valueOfElement;}
if((nameOfElement.search(/DOC-ID/)!=-1)&&(valueOfElement!="")){docidstring+=valueOfElement;}}
if(displayformat=='addrecord'){url="//personal/folders/save/view.url?CID=viewSavedFolders&databaseid="+databaseid
+docidstring+"&database="+database+"&EISESSION="+sessionid;}else{url="/login/customer.url?CID=personalLoginForm&displaylogin=true&displayform=addrecords&database="
+database+"&databaseid="+databaseid+"&source="
+source+docidstring+"&EISESSION="+sessionid;}
NewWindow=window.open(url,'NewWindow','status=yes,resizable,scrollbars,width=600,height=400');NewWindow.focus();}
var app=app||{};var sortOptionsAvailable=false;function getSortOptions(sort){if(sortOptionsAvailable==false&&sort!=null&&sort.length>0){app.appChannel.trigger('ev:selectedSortOptions',sort);sortOptionsAvailable=true;}}
var SelectedRecordsPage=Backbone.Model.extend({defaults:{format:'citation',title:'Selected records',pagesize:25,page:1,error:null,info:null,searchid:null,sortOptions:[],sortUsage:'',usageOrigin:'',usageZone:''},initialize:function(){this.on('change:page',function(){if(this.page==0)this.page=1});}});var SelectedRecordsSortOptView=BaseFeatureView.extend({initialize:function(){this.listenTo(this.model,'change:sortOptions',this.render);this.listenTo(this.model,'change:page',this.render);this.listenTo(app.appChannel,"ev:selectedSortOptions",this.sortUpdated);},sortUpdated:function(opt){this.model.set('sortOptions',opt);},render:function(e){$('#ev-selected-sort-opt').empty();$('#ev-selected-sort-opt').append('<option disabled selected>Select sort type</option>');_.each(this.model.get('sortOptions'),function(opt){var sortkey="sortBy="+opt.field+"&sortDirn="+opt.direction;$('#ev-selected-sort-opt').append('<option value='+sortkey+'>'+opt.label+'</option>');});$("#ev-selected-sort-opt").select2({minimumResultsForSearch:Infinity,width:'80%'});},events:{}});var SelectedRecordsSortOptModel=Backbone.Model.extend({initialize:function(){}});var SelectedRecordsPagenavView=BaseFeatureView.extend({el:"#ev-selectedrecords-tools-pagenav-text",initialize:function(){this.listenTo(this.model,'change:pagesize',this.render);this.listenTo(this.model,'change:page',this.render);this.listenTo(this.model,'pagenav',this.render);},render:function(e){$(".ev-tools-pagenav-nextlink").hide();$(".ev-tools-pagenav-prevlink").hide();var page=this.model.get('page');var pagesize=this.model.get('pagesize');var selected=app.model.get('selectedRecords');var maxpage=Math.ceil(selected/pagesize);this.$el.text(+page+' of '+Math.ceil(selected/pagesize)+' pages');if(page<maxpage)$(".ev-tools-pagenav-nextlink").show();if(page>1)$(".ev-tools-pagenav-prevlink").show();$("#ev-selectedrecords-tools-pagesize").select2({minimumResultsForSearch:Infinity,width:'20%'});app.router.navigate('/selected/'+this.model.get('format')+'.url?page='+page,{trigger:false,replace:true});}});var SelectedRecordsToolsView=BaseFeatureView.extend({el:"#ev-selectedrecords-tools",initialize:function(opts){this.listenTo(this.model,'change:format',this.render);this.listenTo(this.model,'remove',this.render);},render:function(){if(app.model.attributes.selectedRecords==0){window.document.title="Engineering Village - Selected Records";console.log("NOT rendering tools, no selected records!");this.$el.hide();return false;}
$("#ev-selectedrecords-displaycount").html('<h2 id="results-count" class="results-count">'+app.model.get('selectedRecords')+'<span> records</span></h2> ');$("#pageformat-on-select").select2({minimumResultsForSearch:Infinity,width:'90%'});$("#ev-selectedrecords-tools-"+this.model.get('format')+"-format").prop("checked",true);$("#pageformat-on-select option[value='"+this.model.get('format')+"']").attr("selected","selected");this.$el.show();}});var SelectedRecordsTitleView=BaseFeatureView.extend({el:"#ev-selectedrecords-title h1",initialize:function(opts){this.listenTo(this.model,"change:title",this.render);},render:function(e){$(this.el).html(this.model.title||"Selected records");return false;}});var SelectedRecordsContentView=BaseFeatureView.extend({el:"#ev-selectedrecords-content",initialize:function(opts){this.listenTo(this.model,'change:pagesize',this.render);this.listenTo(this.model,'change:format',this.render);this.listenTo(this.model,'change:page',this.render);this.listenTo(this.model,'remove',this.render);this.listenTo(this.model,'change:sortUsage',this.render);this.usageOrigin='';this.usageZone='';this.currentPageView;},events:{"click #knovellink.knovellink":"trackKnovelUsage","change #ev-selected-sort-opt":"render"},trackKnovelUsage:function(event){Backbone.Radio.channel("usageStreamLineChannel").request("sendKnovelUsage",$(event.currentTarget),'selectedrecords','resultslist');},openFullText:function(event){event.preventDefault?event.preventDefault():event.returnValue=false;var elem=$(event.target).attr("href");if(typeof elem=='undefined'){elem=$(event.target).parent().attr("href");}
window.open(elem,"newwindow","width=600,height=500,toolbar=no,location=no,scrollbars,resizable");return false;},render:function(param){if(app.model.attributes.selectedRecords==0){this.$el.fadeIn().html('<p class="" style="    padding-left: 25px;">Currently there are no records selected. Please select records from the search results and try again.</p>\n');return false;}
var self=this;var pageformat=this.model.get('format')||'citation';self.$el.html($("#ev-loading").clone(false).html());if(app.model.attributes.selectedRecords==0){self.$el.fadeIn().html('<p class="" style="    padding-left: 25px;">Currently there are no records selected. Please select records from the search results and try again.</p>\n');}else{var url='/selected/content/'+pageformat+'.url?CID='+this.model.get('format')+'SelectedSet&pageSizeVal='+this.model.get('pagesize')+'&BASKETCOUNT='+this.model.get('page')+'&'+this.model.get('sortUsage')+'&usageOrigin='+this.usageOrigin+'&usageZone='+this.usageZone;$.ajax({url:url,success:function(data,status,xhr){self.$el.html(data).fadeIn();self.redirectafterLogin(param);Backbone.Radio.channel("sessionsettingschannel").request("sessionsettings:setLocal",{"resultsPerPage":self.model.get('pagesize')});$('#ev-selectedrecords-tools-pagesize').val(self.model.get('pagesize'));$("#ev-selectedrecords-tools-pagesize").select2({minimumResultsForSearch:Infinity,width:'20%'});},error:function(xhr,status,thrown){self.$el.html('<p class="ev-subheading">An error has occurred.</p>\n'+'	<p>'+thrown+'</p>\n');},complete:function(xhr,status){self.$el.fadeIn();}});}}});var SelectedRecordsPageView=BaseFeatureView.extend({el:"#ev-selectedrecords-container",events:{"change #pageformat-on-select":"changeformat","click #ev-selectedrecords-tools-removealllink, .ev-sel-rec-delete":"remove","keydown #ev-selectedrecords-tools-removealllink, .ev-sel-rec-delete":"removeOnEnter","change #ev-selectedrecords-tools-pagesize":"pagesize","click .ev-tools-pagenav-link":"pagenav","click #email-link":"emailModel","click #print-link":"printModel","click .download-link":"showDLTemplate","click .oneclick-dl":"oneDownloadClick","change #ev-selected-sort-opt":"changeSort","click .resultcontent .lh-link-Internal":"showLocalHoldingsPopup"},initialize:function(opts){this.titleView=new SelectedRecordsTitleView({model:this.model});this.toolsView=new SelectedRecordsToolsView({model:this.model});this.pagenavView=new SelectedRecordsPagenavView({model:this.model});this.contentView=new SelectedRecordsContentView({model:this.model});this.sortOptView=new SelectedRecordsSortOptView({model:this.model});this.listenTo(app.model,"change:selectedRecords",this.clearAllRecords);},render:function(){$(".ev-container").hide();this.$el.show();var param=this.getURLParam();$(".ev-content").hide();this.titleView.render();this.toolsView.render();this.pagenavView.render();this.contentView.usageOrigin=param.usageOrigin;this.contentView.usageZone=param.usageZone;this.contentView.render(param);this.sortOptView.render();window.document.title="Selected Records - Citation Format";},emailModel:function(){var commonPopupView=new CommonPopupView({link:'/delivery/email/display.url?'+'&displayformat='+this.model.get('format')+'&timestamp='+new Date().getTime()+'&'+this.model.get('sortUsage')+'&usageOrigin=selectedrecords'});commonPopupView.show();return false;},printModel:function(){var commonPopupView=new CommonPopupView({link:'/delivery/print/display.url?timestamp='+new Date().getTime()+'&displayformat='+this.model.get('format')+'&'+this.model.get('sortUsage')+'&usageOrigin=selectedrecords'});commonPopupView.show();return false;},changeformat:function(e){var selectedHref=$('#'+e.currentTarget.id).find('option:selected').attr('href');e.preventDefault();app.router.navigate(selectedHref,{trigger:false,replace:true});$("#ev-header-selectedrecords-link").attr('href',selectedHref);var qArray=(Backbone.history.getFragment());var exformat=/selected\/(.*)\.url/g.exec(qArray);this.contentView.usageOrigin='selectedrecords';this.contentView.usageZone=this.contentView.currentPageView||'citation';var currentView=exformat[1];var capCurrentView=currentView.charAt(0).toUpperCase()+currentView.slice(1);this.contentView.currentPageView=exformat[1];this.model.set('format',currentView||'citation');window.document.title='Selected Records - '+capCurrentView+' Format'||'Selected Records - Citation Format';return false;},changeSort:function(e){var selectedHref=$('#'+e.currentTarget.id).find('option:selected').val();var path=$(location).attr('pathname');var search=$(location).attr('search');var finalSortUrl=path+search+'&'+selectedHref;e.preventDefault();app.router.navigate(finalSortUrl,{trigger:false,replace:true});this.contentView.usageOrigin='selectedrecords';this.contentView.usageZone='sortresults';this.model.set('sortUsage',selectedHref);return false;},pagesize:function(e){e.preventDefault();this.contentView.usageOrigin='selectedrecords';this.contentView.usageZone='resultsperpage';this.model.set({'pagesize':$(e.currentTarget).val(),'page':1});return false;},remove:function(e){e.preventDefault();var self=app.getView('selectedrecordsPageView').selectedrecordsPageView;var removelink=$(e.currentTarget);this.contentView.usageOrigin='selectedrecords';this.contentView.usageZone='delete';var same=this;$.ajax({url:removelink.attr('href'),success:function(data,status,xhr,settings){if(removelink.attr('id')=="ev-selectedrecords-tools-removealllink")app.model.set('selectedRecords',0);else app.model.set('selectedRecords',app.model.get('selectedRecords')-1);var docId=same.getURLParamByName('docid',removelink.attr('href'));$("input[type=checkbox][value="+docId+"]").prop("checked",false);if($("#page-select").is(":checked")){$("#page-select").prop("checked",false);}
self.model.trigger("remove");},error:function(xhr,status,thrown){this.model.set('error','An error has occurred.');},complete:function(xhr,status){}});return false;},removeOnEnter:function(e){if(e.keyCode===13){$(e.target).click();return false;}},pagenav:function(e){e.preventDefault();var next=($(e.currentTarget).hasClass('ev-tools-pagenav-prevlink')?false:true);var maxpage=Math.ceil(app.model.attributes.selectedRecords/app.model.attributes.pagesize);var newpage=this.model.get('page')+(next?1:-1);if(newpage<1)newpage=1;else if(newpage>maxpage)newpage=maxpage;this.contentView.usageZone=next?'nextpage':'previouspage';this.contentView.usageOrigin='selectedrecords';this.model.set('page',newpage);return false;},updateView:function(){this.toolsView.render();this.contentView.render();},oneDownloadClick:function(e){e.preventDefault();var dlUrl='/delivery/download/display.url?'+'&displayformat='+'citation'+'&allselected=true'+'&timestamp='+new Date().getTime()+'&'+this.model.get('sortUsage')+'&usageOrigin=selectedrecords';recordPageDownloadSubmit(dlUrl);return false;},showDLTemplate:function(e){e.preventDefault();var commonPopupView=new CommonPopupView({link:'/delivery/download/display.url?'+'&displayformat='+'citation'+'&allselected=true'+'&timestamp='+new Date().getTime()+'&'+this.model.get('sortUsage')+'&usageOrigin=selectedrecords',});commonPopupView.show();return false;},clearAllRecords:function(){if(app.model.attributes.selectedRecords==0)
app.getView('selectedrecordsPageView').selectedrecordsPageView.model.trigger('remove');}});var app=app||{};var folderChannel=Backbone.Radio.channel("folders");var FolderPage=Backbone.Model.extend({defaults:{view:'',title:'',error:null,info:null,folderid:null,docid:null,searchid:null,folderList:null}});var Folder=Backbone.Model.extend({defaults:{id:'',name:'',encodedname:'',size:0,maxsize:50,docids:[]},save:function(model,options){options=options||{};Backbone.Model.prototype.save.call(this,model,options);},destroy:function(options){options=options||{};options.url='/personal/folders/delete.url?folderid='+this.id;Backbone.Model.prototype.destroy.call(this,options);}});var FolderListCollection=Backbone.Collection.extend({model:Folder,fetch:function(options){options=options||{};options.url='/personal/folders/fetch.url';return Backbone.Model.prototype.fetch.call(this,options);}});var FolderRecordsView=BaseFeatureView.extend({el:"#ev-folders-record-content",events:{"click #folders-previous-link-atag2":"goBack","click #folders-list-link-action":"folderlist","click .download-link":"showDLTemplate","click .oneclick-dl":"oneDownloadClick","click #email-link":"emailModel","click #print-link":"printModel","change #pageformat-on-folders":"changeformat",'click .resultcontent .lh-link-Internal':'showLocalHoldingsPopup',"click #knovellink.knovellink":"trackKnovelUsage"},initialize:function(){var self=this;this.usageOrigin='';this.usageZone='';this.currentPageView;},render:function(e){var self=this;folderChannel.request('folders:setTitle','View Folder : '+self.model.get('name'));$("#ev-loading").show();$("#ev-folder-content").hide();var pageformat=this.model.get('format')||'citation';var queryFragment=app.getSearchFragment();if(this.usageOrigin!=''){queryFragment=queryFragment.replace('usageOrigin=folders','');queryFragment=queryFragment.replace('usageOrigin=addtofolder','');queryFragment=queryFragment+'&usageOrigin='+this.usageOrigin;this.usageOrigin='';}
if(this.usageZone!=''){if(this.usageZone!='delete'){queryFragment=queryFragment+'&usageZone='+this.usageZone+'view';}else{queryFragment=queryFragment+'&usageZone='+this.usageZone;}
this.usageZone='';}
$.ajax({url:'/selected/content/'+pageformat+'folder.url?'+queryFragment,success:function(data,status,xhr){if(data.redirect){window.location.href=data.redirect;}
self.$el.find('#ev-folders-record-fetch').html(data);$("#pageformat-on-folders").val(pageformat);self.setElement('#ev-folders-record-content');app.appChannel.trigger("ev:sitecatalyst","newPage","/selected/content/"+pageformat+"folder.url");},error:function(xhr,status,thrown){app.model.trigger("ev:alert","error","Folder '"+self.model.attributes.encodedname+' could not be retrieved.',false,true);$("#ev-loading").hide();$("#ev-folders-record-fetch").show();$("#ev-folder-content").show();app.router.navigate("/personal/folders.url?backurl=SAVETOFOLDER",true);},complete:function(xhr,status){console.log("folder doc load complete...;");$("#ev-loading").hide();$("#ev-folders-record-fetch").show();$("#ev-folder-content").show();$("#pageformat-on-folders").select2({minimumResultsForSearch:Infinity,width:'90%'});checkForOneClick(true);}});return this;},folderlist:function(e){e.preventDefault();var viewlink=$(e.target);app.router.navigate(viewlink.attr('href'),{trigger:false,replace:true});folderChannel.request('folders:setFolderId',null);folderChannel.request('folders:setView','list');return false;},goBack:function(evt){evt.preventDefault();app.router.previous();return false;},oneDownloadClick:function(e){e.preventDefault();basketDownloadSubmit("savedrecords","",app.userSession.attributes.sessionId.id,this.model.id,undefined,undefined);return false;},showDLTemplate:function(e){e.preventDefault();var commonPopupView=new CommonPopupView({link:'/delivery/download/display.url?'+'&displayformat='+this.model.get("format")+'&allselected=true'+'&folderid='+this.model.id+'&timestamp='+new Date().getTime()+'&usageOrigin=savedrecords',});commonPopupView.show();return false;},emailModel:function(){var commonPopupView=new CommonPopupView({link:'/delivery/email/display.url?'+'&displayformat='+this.model.get("format")+'&folderid='+this.model.id+'&timestamp='+new Date().getTime()+'&usageOrigin=savedrecords'});commonPopupView.show();return false;},printModel:function(){var commonPopupView=new CommonPopupView({link:'/delivery/print/display.url?'+'&displayformat='+this.model.get("format")+'&folderid='+this.model.id+'&timestamp='+new Date().getTime()+'&usageOrigin=savedrecords'});commonPopupView.show();return false;},changeformat:function(e){var qArray=(Backbone.history.getFragment());var selectedFormat=$('#'+e.currentTarget.id).find('option:selected').attr('value');e.preventDefault();this.usageOrigin='savedrecords';this.currentPageView=selectedFormat;this.usageZone=this.currentPageView||'citation';this.model.set('format',selectedFormat||'citation');this.render();return false;},trackKnovelUsage:function(event){Backbone.Radio.channel("usageStreamLineChannel").request("sendKnovelUsage",$(event.currentTarget),'savedrecords','resultslist');}});var FolderListView=Backbone.Marionette.View.extend({tagName:'ul',events:{"click *":"hideall","click .folder-view-link-action":"view","click .folder-delete-link-action":"remove","click .folder-delete-submit":"remove","click .folder-rename-link-action":"rename","click .folder-rename-submit":"rename"},initialize:function(){var self=this;this.model.bind("reset",this.render,this);},title:'<li id="folder-list-title" class="folder-list-item"><ul class="folder-tools-line horizlist">'+'	<li class="folder-info"><b>Name</b></li>'+'	<li class="folder-view"><b>View</b></li>'+'	<li class="folder-delete"><b>Delete</b></li>'+'</ul></li>',render:function(e){folderChannel.request('folders:setTitle','Folders');$("#ev-folders-list-loading").show();$(this.el).hide();$(this.el).empty();_.each(this.model.models,function(folder){$(this.el).append(new FolderListItemView({model:folder}).render().el);},this);this.showOrHideCreateFolder();if(this.model.models.length>0){$(this.el).prepend(this.title);}
$("#ev-folders-list-loading").hide();$(this.el).fadeIn(1000);return this;},showOrHideCreateFolder:function(){if(this.model.models.length>=10)
$("#ev-folders-create").hide();else{$("#ev-folders-create").show();}},add:function(e){e.preventDefault();var input=$("#folder-create-name");var error=folderChannel.request("folders:validateFolderName",input.val());if(error){app.model.trigger("ev:alert","error",error,false,true);input.focus();$("#folder-create-add").prop("disabled",false);return false;}
var self=this;var addfolder=new Folder();addfolder.set('name',input.val());addfolder.save({},{url:'/personal/folders/add.url',wait:true,success:function(model,response){app.model.trigger("ev:alert","info","Folder '"+response.name+"' was successfully added.",false,true);var folder=self.model.add(response);if(self.model.models.length==1){self.render();}else{$("#folder-list-title").after(new FolderListItemView({model:folder}).render().el);}
input.val('');$("#folder-create-add").prop("disabled",false);self.showOrHideCreateFolder();},error:function(model,response){app.model.trigger("ev:alert","error","Folder '"+"Unable to create new folder.",false,true);$("#folder-create-add").prop("disabled",false);}});},remove:function(e){e.preventDefault();var self=this;var deletelink=$(e.currentTarget);var folder=this.model.get(deletelink.attr('folderid'));var folderid=folder.id;var foldername=folder.get("name");Backbone.Radio.channel("commonModal").request("showmodal",{cbSubmit:function(){folder.destroy({success:function(response){app.model.trigger("ev:alert","info","Folder '"+foldername+"' was successfully deleted.",false,true);self.model.remove(folderid);if(self.model.models.length==0)$(self.el).empty();$('#common-modal').modal('toggle');self.showOrHideCreateFolder();},error:function(response){app.model.trigger("ev:alert","error","Unable to delete folder '"+foldername+"'",false,true);self.model.add(folder);$('#common-modal').modal('toggle');}});return false;},serverWait:true,modalType:"warn",content:{bodyContent:"Please confirm you want to remove this folder and the contents in it.",titleContent:"Warning"}});},rename:function(e){e.preventDefault();var self=this;var renamelink=$(e.target);var folderid=renamelink.attr('folderid');$(".folder-delete-confirm[folderid='"+folderid+"']").hide();if(renamelink&&renamelink.attr('class').indexOf("folder-rename-link-action")!=-1){$(".folder-name[folderid='"+folderid+"']").toggle();$(".folder-rename-confirm[folderid='"+folderid+"']").toggle();return false;}
var newfoldername=$(".folder-rename-input[folderid='"+folderid+"']");var oldfoldername=$(".folder-name[folderid='"+folderid+"']");var error=folderChannel.request("folders:validateFolderName",newfoldername.val());if(error){app.model.trigger("ev:alert","error",error,false,true);return false;}
var folder=this.model.get(folderid);folder.set('name',newfoldername.val());folder.save({},{url:'/personal/folders/update.url',wait:true,success:function(model,response){app.model.trigger("ev:alert","info","Folder was successfully renamed to '"+newfoldername.val()+"'",false,true);newfoldername.val('');},error:function(model,response){app.model.trigger("ev:alert","error","Unable to rename folder '"+oldfoldername.text()+"'",false,true);folder.set("name",oldfoldername.text());}});return false;},view:function(e){e.preventDefault();var viewlink=$(e.target);var folderid=viewlink.attr('folderid');app.router.navigate(viewlink.attr('href'),{trigger:false,replace:true});folderChannel.request('folders:setFolderId',folderid);folderChannel.request('folders:setView','folder');return false;},hideall:function(e){app.model.trigger("ev:clearAlert");this.hidefeatures(e);},hidefeatures:function(e){var target=(e&&typeof e!='undefined'?$(e.target):null)
if(target&&target.length>0){var folderid=target.attr('folderid');$(".folder-name:not([folderid='"+folderid+"'])").show();$(".folder-rename-confirm:not([folderid='"+folderid+"'])").hide();$(".folder-delete-confirm:not([folderid='"+folderid+"'])").hide();}}});var FolderListItemView=Backbone.Marionette.View.extend({className:"folder-list-item",tagName:"li",template:_.template($('#ev-folderlist-template').html()),initialize:function(){this.model.bind("change",this.render,this);this.model.bind("error",this.render,this);this.model.bind("destroy",this.close,this);},render:function(e){$(this.el).html(this.template(this.model.toJSON()));return this;},close:function(){$(this.el).unbind();$(this.el).remove();}});var FolderTitleView=Backbone.Marionette.View.extend({el:"#ev-folders-title",initialize:function(opts){this.listenTo(this.model,"change:title",this.render);},render:function(e){$(this.el).html(this.model.title||"Folders");return false;}});var FolderPageView=Backbone.Marionette.View.extend({channelName:'folders',el:"#ev-folders-container",template:_.template($('#ev-folders-template').html()),events:{"click #folders-previous-link-atag":"goBack","click .alert-close":"hidemessages","click #folder-create-name":"hidemessages","click #folder-create-add":"addToList","click .ev-sel-rec-delete, #removeMissingId":"removeOneRecord","click #ev-folders-tools-removealllink":"removeAll",},initialize:function(opts){this.model.bind("change:view",this.render,this);this.folderList=new FolderListCollection();this.model.bind("change:error",this.showmessage,this);this.model.bind("change:info",this.showmessage,this);this.titleView=new FolderTitleView({model:this.model});Backbone.Radio.channel(this.channelName).reply('folders:validateFolderName',this.validateFolderName,this);Backbone.Radio.channel(this.channelName).reply('folders:setTitle',this.setTitle,this);Backbone.Radio.channel(this.channelName).reply('folders:setFolderId',this.setFolderId,this);Backbone.Radio.channel(this.channelName).reply('folders:setView',this.setView,this);Backbone.Radio.channel(this.channelName).reply('folders:setInfo',this.setInfo,this);Backbone.Radio.channel(this.channelName).reply('folders:setError',this.setError,this);},render:function(){var self=this;window.document.title="Engineering Village - Folders";$(".ev-container").hide();this.$el.show();this.$el.html(this.template(this.model.toJSON()));if(app.getLocation().indexOf("display.url")>=0){$("#ev-folders-content").show();}
$("#ev-folders-list-loading").show();$("#ev-folders-content-message").hide();var fetched=this.folderList.fetch({error:function(collection,response,options){(options.textStatus.indexOf('parsererror')!==-1)?window.location.href='/customer/authenticate/loginfull.url':''}}).done(function(){if(self.model.get('view')=='folder')
self.renderFolder('');else if(self.model.get('view')=='savetofolder')
self.renderSaveToFolder();else
self.renderList();});},setTitle:function(title){this.model.set('title',title);},setView:function(view){this.model.set('view',view);},setFolderId:function(folderid){this.model.set('folderid',folderid);},setInfo:function(info){this.model.set('info',info);},setError:function(error){this.model.set('error',error);},showmessage:function(e){var message=null;var messageel=$("#ev-folders-content-message");messageel.removeClass('alert-error').removeClass('alert-info');var show=(this.model.get('error')!=null||this.model.get('info')!=null);if(this.folderListView)this.folderListView.hidefeatures(e);if(this.model.get('error')){messageel.addClass('alert-error');messageel.find('.alert-message').text(this.model.get('error'));}else if(this.model.get('info')){messageel.addClass('alert-info');messageel.find('.alert-message').text(this.model.get('info'));}
messageel.toggle(show);return true;},hidemessages:function(e){$("#ev-folders-content-message").hide();this.folderListView.hidefeatures(e);this.model.set('error',null);this.model.set('info',null);},addToList:function(e){$("#folder-create-add").prop("disabled",true);this.hidemessages(e);this.folderListView.add(e);},renderList:function(){console.log("Rendering Folder List");$(".ev-content").hide();$("#ev-folders-content").show();this.folderListView=new FolderListView({model:this.folderList});$("#ev-folders-list-content").html(this.folderListView.render().el);},renderFolder:function(usageZone){console.log("Rendering View Folder");$(".ev-content").hide();if(this.folderRecordsView){$('#ev-folders-record-fetch').empty();}
var folder=this.folderList.get(this.model.get('folderid'));window.document.title="My Folders : "+folder.get('name');if(folder){$('#ev-folders-title #folders-title').html("Folder Name : "+folder.get('name'));}
this.folderRecordsView=new FolderRecordsView({model:folder});this.folderRecordsView.usageZone=usageZone;this.folderRecordsView.usageOrigin='savedrecords';this.folderRecordsView.render().$el.show();},renderSaveToFolder:function(){$(".ev-container").hide();this.$el.html(this.template());this.$el.show();console.log("Rendering Save to Folder");},goBack:function(evt){evt.preventDefault();app.router.previous();return false;},validateFolderName:function(foldername){if(!$.trim(foldername)){return"Folder name cannot be empty.";}else{var valid="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_";var temp;for(var i=0;i<foldername.length;i++){temp=foldername.substring(i,i+1);if((valid.indexOf(temp)=="-1")&&(temp!=' ')){return"Special Characters are not allowed in folder names. Please try another name.";}}}
var unique=true;this.folderList.each(function(model,index){if(model.get("name").toLowerCase()==foldername.toLowerCase()){return unique=false;}});if(!unique)
return"Folder name already exists. Please try another name.";return null;},removeOneRecord:function(e){this.remove(e,'one');},removeAll:function(e){this.remove(e,'All');},remove:function(e,count){e.preventDefault();var self=this;var removelink=$(e.target).parent().attr('href');if(_.isUndefined(removelink)){removelink=$(e.target).attr('href');}
if(_.isUndefined(removelink)){this.model.set('error','An error has occurred.');app.model.trigger("ev:alert","error","Unable to delete record",false,true);}
Backbone.Radio.channel("commonModal").request("showmodal",{cbSubmit:function(){var seperator=removelink.split('?');$.ajax({url:seperator[0],type:'post',data:seperator[1],success:function(data,status,xhr){if(count=='All'){app.router.navigate("/personal/folders/display.url",true);}else{$("#ev-loading").show();$("#ev-folders-record-fetch").hide();self.folderList.fetch({error:function(collection,response,options){(options.textStatus.indexOf('parsererror')!==-1)?window.location.href='/customer/authenticate/loginfull.url':''}}).done(function(){if(self.model.get('view')=='folder')
self.renderFolder('delete');else if(self.model.get('view')=='savetofolder')
self.renderSaveToFolder();else
self.renderList();});}
app.model.trigger("ev:alert","info","Record successfully deleted.",false,true);$('#common-modal').modal('toggle');},error:function(xhr,status,thrown){self.model.set('error','An error has occurred.');app.model.trigger("ev:alert","error","Unable to delete record",false,true);$('#common-modal').modal('toggle');$("#ev-loading").hide();$("#ev-folders-record-fetch").show();},complete:function(xhr,status){}});return false;},serverWait:true,modalType:"warn",content:{bodyContent:"Please confirm you want to remove record(s) from the folder.",titleContent:"Warning"}});return false;},});var app=app||{};var BulletinsModel=Backbone.Model.extend({defaults:{},});function refreshYears(){}
var BulletinsView=BaseFeatureView.extend({template:_.template($('#ev-BulletinsRecent-template').html()),el:'#ev-bulletins-container',initialize:function(){this.model.on('change:randomOnload',this.render,this);this.model.on('change:litpage',this.renderResult,this);this.model.on('change:patpage',this.renderResult,this);this.polymers=false;},events:{'click #displayBtn':'archiveformSubmit','change select.catdrop':'catdropChange','click .navigatorLink':'navigatorClick','click #backToBulletinsId':'backtoBulletins','change #rad_id':'changeDB','change #category_id':'changeCatogery','change #archiveYrId':'toggleDisplayhbtn'},render:function(){window.document.title="Engineering Village - Encompass Bulletins";this.renderResult();this.renderArchieveBox();$(this.el).fadeIn();},renderResult:function(){var ModelJson=this.model.toJSON();$(this.el).find("#ev-bulletinResults-container").html(this.template({bulletins:ModelJson}));$(".hr").focus();},changeDB:function(){console.log('calling db');var db=$("select[name='db'] :selected").val();$("select.category option").remove();var select=document.getElementById('category_id');var opt=document.createElement('option');opt.value='';opt.innerHTML='Category';select.appendChild(opt);if(db=='1')
$("select.lit option").clone().appendTo($("select.category"));if(db=='2')
$("select.pat option").clone().appendTo($("select.category"))
this.changeCatogery();this.toggleDisplayhbtn();},changeCatogery:function(){var min=2001;var max=2018;$("select.allyears  option").remove();var select=document.getElementById('archiveYrId');var first_opt=document.createElement('option');first_opt.value='';first_opt.innerHTML='Publication year';select.appendChild(first_opt);if($("select.category").find(":selected").val()!=''){if($("select.category").find(":selected").val()=='polymers'){max=2002;}
for(var i=max;i>=min;i--){var opt=document.createElement('option');opt.value=i;opt.innerHTML=i;select.appendChild(opt);}}
this.toggleDisplayhbtn();},toggleDisplayhbtn:function(){var db=$("select[name='db'] :selected").val();var cy=$("select.category :selected").val();var yr=$("select[name='yr'] :selected").val();if(db==''||cy==''||yr==''){$("#displayBtn").attr("disabled",true);}else{$("#displayBtn").attr("disabled",false)}},renderArchieveBox:function(){var ModelJson=this.model.toJSON();var archieveSearchBoxView=new ArchieveSearchBoxView(this.model);archieveSearchBoxView.render(this.el);$(this.el).find("#catogeryOptions").empty();if(ModelJson.litpage.selectcategoryoptions){$(this.el).find("#catogeryOptions").append(ModelJson.litpage.selectcategoryoptions);}if(ModelJson.patpage.selectcategoryoptions){$(this.el).find("#catogeryOptions").append(ModelJson.patpage.selectcategoryoptions);}
$("#archiveYrId").select2({minimumResultsForSearch:Infinity,width:'100%'});$("#rad_id").select2({minimumResultsForSearch:Infinity,width:'100%'});$("#category_id").select2({minimumResultsForSearch:Infinity,width:'100%'});this.toggleDisplayhbtn();},renderbulletins:function(){$(".ev-container").hide();$('#ev-bulletins-container').show();var title='<h1 id="bulletinbox_title" class="pageheader" >Bulletins</h1>';$("#ev-bulletins-title").html(title);$("#ev-bulletinResults-container").html($("#ev-loading").clone(false).html());this.getBulletinDetails('/bulletins/displayAjax.url');},archiveformSubmit:function(event){event.preventDefault();if(_.isUndefined($("#displayBtn").attr("disabled"))){$(this.el).find("#ev-bulletinResults-container").empty();$("#ev-bulletinResults-container").html($("#ev-loading").clone(false).html());var db=$("select[name='db'] :selected").val();var cy=$("select.category :selected").val();var yr=$("select[name='yr'] :selected").val();var url="/bulletins/archive.url?docIndex=1&cy="+cy+"&yr="+yr+"&db="+db+"&database="+$("#database").val()+"&randomOnload="+this.model.get("randomOnload");this.getBulletinDetails(url);}},backtoBulletins:function(event){event.preventDefault();$("#ev-bulletinResults-container").html($("#ev-loading").clone(false).html());this.getBulletinDetails('/bulletins/displayAjax.url');return false;},navigatorClick:function(event){event.preventDefault();var url=$(event.target).attr('href');this.getBulletinDetails(url+"&randomOnload="+this.model.get("randomOnload"));return false;},getBulletinDetails:function(urlParam){this.model.fetch({url:urlParam,contentType:"application/json",});}});var ArchieveSearchBoxView=BaseFeatureView.extend({template:_.template($('#ev-archieveSearchBox-template').html()),initialize:function(model){this.model=model;},render:function(el){$(el).find("#ev-archievesearchBox-container").html(this.template({bulletins:this.model.toJSON()}));},});var app=app||{};var pageState=Backbone.Model.extend({defaults:{title:'Tags & Groups intial'}}),tagsGroupsTitle=new pageState();var TagsGroupsNavItemView=Backbone.Model.extend({initialize:function(attrs){this.title=attrs.title;this.url=attrs.url;this.viewtype=attrs.viewtype;},fetch:function(opts){typeof(opts)!='undefined'||(opts={});var self=this;Backbone.Model.prototype.fetch.call(self,opts);}});var TagsGroupsPages=Backbone.Collection.extend({model:TagsGroupsNavItemView,url:"tagsgroups/"});var Title=BaseFeatureView.extend({initialize:function(){this.listenTo(tagsGroupsTitle,'change:title',this.render);this.render();},render:function(){this.el.innerHTML=tagsGroupsTitle.get('title');}});var TagsGroupsNavItem=BaseFeatureView.extend({tagName:'li',initialize:function(){this.render();},render:function(){this.el.innerHTML="<button type=\"button\" data-url=\""+this.model.get('url')+"\" title=\""+this.model.get('title')+"\""+this.model.get('disabled')+">"+this.model.get('linkName')+"</button>";this.$el.attr('data-CID',this.model.cid);this.$el.attr('class',this.model.get('classname'));this.$el.attr('data-view',this.model.get('viewtype'));},close:function(){$(this.el).unbind();$(this.el).remove();}});var TagsGroupsNavItemList=BaseFeatureView.extend({tagName:'ul',className:'horizlist',id:'tagsgroups_tool_links',initialize:function(){this.listenTo(this.collection,'reset',this.render);this.render();this.$el.on('click','li',function(event){event.preventDefault();var $target=$(event.currentTarget);if($target.find("button").is(':disabled')){return false;}
app.router.navigate($target.find("button").attr('data-url').replace("?content=t",""),{trigger:false,replace:true});tagsGroupsTitle.set({'title':event.target.title,'cid':$(this).attr('data-CID'),'viewtype':$(this).attr('data-view')});});return false;},render:function(){var frag=document.createDocumentFragment();this.collection.each(function(model){var subView=new TagsGroupsNavItem({model:model});frag.appendChild(subView.el);});this.$el.html(frag);},});var tagGroupsCol=new TagGroupCollection();var TagsGroupsNavItemContent=BaseFeatureView.extend({template:_.template($('#ev-tagsgroups-template').html()),viewgroupstemplate:_.template($('#ev-viewEditGroups-template').html()),edittagstemplate:_.template($('#ev-editTags-template').html()),scopestemplate:_.template($('#ev-scopes-template').html()),initialize:function(attrs){this.listenTo(tagsGroupsTitle,'change',this.render);},events:{"change #cloudselect":"cloudSelect","change #sortby":"sortByClick","click #searchTagsubmit":'tagsGroupsSubmit',"submit #searchtagsform":'tagsGroupsSubmit',"click .cloudtag, .taglink":'tagsGroupsResult',"click #createGroup, .ev-group-list-row-edit":"createGroup","click .ev-group-list-row-delete":"deleteGroup","click .ev-group-list-row-cancel":"cancelMembership","change #scopesselect":"scopesSelect","click .ev-tag-row-edit":"editTag","input .edit-input":"validateEditName","click .ev-tag-row-delete":"deleteTag","click .ev-edit-tag-form .edit-cancel":"cancelDeleteTag","click .ev-edit-tag-form .ev-tag-save":"saveTag",},validateEditName:function(e){e.preventDefault();app.nameFieldMask(e);return false;},cancelMembership:function(e){var $target=$(e.currentTarget),$id=$target.data('id'),self=this,member=new GroupMemberModel({groupID:$id,memberID:app.userSession.attributes.userProfile.userId});member.destroy({success:function(model,response){tagGroupsCol.fetch({success:function(model,data){BaseFeatureView.prototype.showhideLoading(false,self.$el);self.$el.html(self.viewgroupstemplate({groups:model.models}));},error:function(model,error){}});}});},cancelDeleteTag:function(e){e.preventDefault();var $target=$(e.currentTarget);$target.parent().prev().show();$target.parent().hide();return false;},editTag:function(e){e.preventDefault();var $target=$(e.currentTarget);$target.parent().next().show();$target.parent().hide();return false;},saveTag:function(e){e.preventDefault();var $target=$(e.currentTarget),tagSearchValue=$target.data("oldvalue"),newTag=$target.parent().find('.edit-input'),newTagVal=newTag.val().trim(),scope=$target.data("scope"),groupid=$target.data("groupid"),customerid=$target.data("custid"),url='/rest/tags/search/updateEditableTag',self=this,userid=app.userSession.attributes.userProfile.userId,tagModel=new Backbone.Model();if(newTagVal.length==0){newTag.addClass("warning");newTag.parents('span.ev-edit-tag-form').find('.ev-text-input-label-error').show().text("Enter tag name.");newTag.focus();return false;}
tagSearchValue=encodeURIComponent(tagSearchValue);newTagVal=encodeURIComponent(newTagVal);url+="?tagSearchValue="+tagSearchValue
+"&newtag="+newTagVal
+"&scope="+scope
+"&userid="+userid;if(groupid)
url+="&groupid="+groupid;if(customerid)
url+="&customerid="+customerid;$.ajax({type:'GET',url:url,success:function(data){tagModel.fetch({url:"/rest/tags/search/findEditableTags?scope="+scope+"&groupid="+groupid,success:function(model,data){BaseFeatureView.prototype.showhideLoading(false,$(self.el));self.$el.find('.ev-tags-edit-container').html(self.edittagstemplate({tagsModel:data._embedded}));},error:function(model,error){}});},error:function(jqXHR,status,error){},complete:function(jqXHR,status){}});return false;},deleteTag:function(e){e.preventDefault();var $target=$(e.currentTarget),tagSearchValue=$target.data("value"),scope=$target.data("scope"),groupid=$target.data("groupid"),customerid=$target.data("custid"),url='/rest/tags/search/deleteEditableTag',self=this,userid=app.userSession.attributes.userProfile.userId,tagModel=new Backbone.Model();tagSearchValue=encodeURIComponent(tagSearchValue);url+="?tagSearchValue="+tagSearchValue
+"&scope="+scope
+"&userid="+userid;if(groupid)
url+="&groupid="+groupid;if(customerid)
url+="&customerid="+customerid;$.ajax({type:'GET',url:url,success:function(data){tagModel.fetch({url:"/rest/tags/search/findEditableTags?scope="+scope+"&groupid="+groupid,success:function(model,data){BaseFeatureView.prototype.showhideLoading(false,$(self.el));self.$el.find('.ev-tags-edit-container').html(self.edittagstemplate({tagsModel:data._embedded}));},error:function(model,error){}});},error:function(jqXHR,status,error){},complete:function(jqXHR,status){}});return false;},createGroup:function(e){e.preventDefault();var $target=$(e.currentTarget),$cid=$target.data('id'),groupModel=tagGroupsCol.get($cid)||{view:"add"};var groupPopupView=new GroupPopupView(groupModel);var commonPopupView=new CommonPopupView({view:groupPopupView});commonPopupView.show();return false;},deleteGroup:function(e){e.preventDefault();var $target=$(e.currentTarget),$cid=$target.data('id'),groupModel=tagGroupsCol.get($cid),self=this;groupModel.destroy({success:function(model,response){tagGroupsCol.fetch({success:function(model,data){BaseFeatureView.prototype.showhideLoading(false,self.$el);self.$el.html(self.viewgroupstemplate({groups:model.models}));},error:function(model,error){}});}});},tagsGroupsSubmit:function(event){if(!_.isUndefined(event))
event.preventDefault();var tagName=$("#SEARCHID");if(tagName.val().trim().length==0){tagName.addClass("warning");tagName.parents('#searchTag_Div').find('.ev-text-input-label-error').show().text("Enter tag name.");return false;}else{tagName.removeClass("warning");tagName.parents('#searchTag_Div').find('.ev-text-input-label-error').hide();}
var usgOrigin=app.getParamByName("usageOrigin");var usgZone=app.getParamByName("usageZone");if(!usgOrigin)usgOrigin="searchtags";if(!_.isUndefined(event)&&!_.isUndefined(event.currentTarget)&&event.currentTarget.id=='searchTagsubmit'){usgOrigin="searchtags";}
app.router.navigate('/search/results/tags.url?usageOrigin='+usgOrigin+'&usageZone='+usgZone+'&'+$('#searchtagsform').serialize(),false);app.getRegion().currentView.rendertagsGroupsView();},tagsGroupsResult:function(event){event.preventDefault();app.router.navigate($(event.currentTarget).attr('href'),true);},scopesSelect:function(event){var self=this,cid=tagsGroupsTitle.get('cid'),model=self.collection.get(cid),scope=$(event.target).val(),scopeStr=scope.split(':'),scopeVal=scopeStr[0],groupId=scopeStr.length>1?scopeStr[1]:"";var url="/rest/tags/search/findEditableTags?scope="+scopeVal+"&groupid="+groupId;$("#searchscopeselect").val(scopeVal);BaseFeatureView.prototype.showhideLoading(true,self.$el);model.fetch({url:url,contentType:"application/json",accept:"application/json",success:function(model,data){BaseFeatureView.prototype.showhideLoading(false,self.$el);self.$el.find('.ev-tags-edit-container').html(self.edittagstemplate({tagsModel:data._embedded}));},error:function(model,error){BaseFeatureView.prototype.showhideLoading(false,self.$el);self.$el.html(error.responseText);}});},cloudSelect:function(event){var self=this,cid=tagsGroupsTitle.get('cid'),model=self.collection.get(cid),sort=$("#sortby select option:selected").val(),scope=$(event.target).val();if(scope=="6"){document.location="/customer/authenticate/loginfull.url?backurl=/tagsgroups/display.url";}else{var url="/tagsgroups/display.url?viewtab=browsetags&scope="+scope+"&sort="+sort;app.router.navigate(url,{trigger:false,replace:true});$("#searchscopeselect").val(scope);model.url=url+"&browsetags=t";this.renderTemplateContent(model);}},sortByClick:function(event){var self=this,cid=tagsGroupsTitle.get('cid'),model=self.collection.get(cid),scope=$("#cloudselect option:selected").val(),sort=$(event.target).val(),url="/tagsgroups/display.url?viewtab=browsetags&sort="+sort+"&scope="+scope;app.router.navigate(url,{trigger:false,replace:true});model.url=url+"&browsetags=t";this.renderTemplateContent(model);},render:function(){var self=this,cid=tagsGroupsTitle.get('cid'),model=self.collection.get(cid)
url=model.url;BaseFeatureView.prototype.showhideLoading(true,self.$el);app.$searchContainer.hide();$('#tagsgroups_tool_links li').removeClass('selected');if(model.viewtype=="browsetags"){$('.ev-browsetags').addClass('selected');var scope=this.getURLParamByName("scope",window.location.href)||1,sort=this.getURLParamByName("sort",window.location.href)||"alpha";url+="&sort="+sort+"&scope="+scope+"&browsetags=t";}else if(model.viewtype=="searchtags"){$('.ev-searchtags').addClass('selected');url+="&browsetags=t&sort=alpha&size=1";}else if(model.viewtype=="editgroups"){$('.ev-editgroups').addClass('selected');if(!app.userStatus){document.location="/customer/authenticate/loginfull.url?backurl=/tagsgroups/display.url";return false;}
var groupId=this.getURLParamByName("groupid",window.location.href),self=this;tagGroupsCol.fetch({success:function(model,data){BaseFeatureView.prototype.showhideLoading(false,self.$el);self.$el.html(self.viewgroupstemplate({groups:model.models}));},error:function(model,error){}});if(groupId){var grpModel=new TagGroupModel({groupID:groupId});grpModel.fetch({success:function(model,data){data.groupID=groupId;if(data._embedded&&data._embedded.members){_.each(data._embedded.members,function(member,index){if(member.memberID==app.userSession.attributes.userProfile.userId){data.isAccpeted=true;}});}
var invitePopup=new InviteGroupPopup(data),commonPopupView=new CommonPopupView({view:invitePopup});commonPopupView.show();},error:function(model,error){}});}
return false;}else if(model.viewtype=="edittags"){$('.ev-edittags').addClass('selected');if(!app.userStatus){document.location="/customer/authenticate/loginfull.url?backurl=/tagsgroups/display.url";return false;}
url+="&sort=alpha&scope=1&browsetags=t";}
model.fetch({url:url,contentType:"application/json",accept:"application/json",success:function(model,data){BaseFeatureView.prototype.showhideLoading(false,self.$el);var model_Values=model.attributes;data.sort=self.getURLParamByName("sort",url);if(model_Values.viewtype=="edittags"){self.$el.html(self.scopestemplate({tagsModel:data}));model.fetch({url:"/rest/tags/search/findEditableTags?scope=1",success:function(model,data){self.$el.find('.ev-tags-edit-container').html(self.edittagstemplate({tagsModel:data._embedded}));},error:function(){}});self.$el.find("#scopesselect").select2({minimumResultsForSearch:Infinity,width:'80%'});}else{self.$el.html(self.template({tagsgroups:data,model:model_Values}));}
if(model_Values.viewtype=="browsetags"){self.$el.find("#cloudselect").select2({minimumResultsForSearch:Infinity,width:'70%'});self.$el.find("#sortby select").select2({minimumResultsForSearch:Infinity,width:'80%'});}else if(model_Values.viewtype=="searchtags"){$("#searchscopeselect").select2({minimumResultsForSearch:Infinity,width:'100%'});}
var params=self.getURLParam();if(!(_.isUndefined(params.SEARCHID)||_.isNull(params.SEARCHID)||_.isEmpty(params.SEARCHID))){$('#SEARCHID').val(params.SEARCHID);self.$el.find('.ev-text-input-large').addClass('ev-text-input-active');$('#searchscopeselect').val(params.scope);self.tagsGroupsSubmit();}},error:function(model,error){BaseFeatureView.prototype.showhideLoading(false,self.$el);self.$el.html(error.responseText);}});},renderTemplateContent:function(model){var self=this;BaseFeatureView.prototype.showhideLoading(true,self.$el);model.fetch({contentType:"application/json",accept:"application/json",success:function(model,data){BaseFeatureView.prototype.showhideLoading(false,self.$el);data.sort=self.getURLParamByName("sort",model.url);self.$el.html(self.template({tagsgroups:data,model:model.attributes}));self.$el.find("#cloudselect").select2({minimumResultsForSearch:Infinity,width:'70%'});self.$el.find("#sortby select").select2({minimumResultsForSearch:Infinity,width:'80%'});},error:function(model,error){BaseFeatureView.prototype.showhideLoading(false,self.$el);self.$el.html(error.responseText);}});}});var linksObj=[{title:'Tags & Groups',url:'/tagsgroups/display.url?viewtab=browsetags',classname:'ev-browsetags selected',linkName:'Browse tags',viewtype:"browsetags",result:false},{title:'Search Tags',url:'/tagsgroups/display.url?viewtab=searchtags',classname:'ev-searchtags',linkName:'Search tags',viewtype:"searchtags",result:false},{title:'Login to View/Edit Groups',url:'/tagsgroups/display.url?viewtab=editgroups',classname:'ev-editgroups',linkName:'View/Edit groups',viewtype:"editgroups",disabled:"disabled"},{title:'Login to Rename/Delete Tags',url:'/tagsgroups/display.url?viewtab=edittags',classname:'ev-edittags',linkName:'Rename/Delete tags',viewtype:"edittags",disabled:"disabled"}];var TagsGroupsPagesCollection=new TagsGroupsPages();for(var i=0;i<linksObj.length;i++){TagsGroupsPagesCollection.add(linksObj[i]);}
var titleView=new Title(),navItemMenuView=new TagsGroupsNavItemList({collection:TagsGroupsPagesCollection}),navItemContentView=new TagsGroupsNavItemContent({collection:TagsGroupsPagesCollection});var TagsGroupsMainView=BaseFeatureView.extend({initialize:function(){this.tagsgroupstitle=$("#tagsgroups_title");this.tagsgroupsMenu=$("#tagsgroups_top");this.tagsgroupsContent=$("#ev-tagsgroups-content");this.loadStaus=false;},renderTagsGroups:function(view){window.document.title="Engineering Village - Tags & Groups";var params=this.getURLParam(),CID="";app.$tagsgroupsContainer.fadeIn();this.tagsgroupstitle.append(titleView.el);this.tagsgroupsMenu.append(navItemMenuView.el)
this.tagsgroupsContent.append(navItemContentView.el);$("#ev-spine").collapse('hide');if(app.userStatus){$("#tagsgroups_tool_links .ev-editgroups button[disabled]").prop("title","View/Edit groups");$("#tagsgroups_tool_links .ev-edittags button[disabled]").prop("title","View/Edit tags");$("#tagsgroups_tool_links button[disabled]").prop("disabled",false);}
if(params.searchtype=='TagSearch'){CID=$("ul li.ev-searchtags").attr('data-cid');}else{CID=$("ul li.ev-"+params.viewtab).attr('data-cid');}
if(!params.viewtab=='searchtags'||!params.searchtype=='TagSearch'){$(".ev-container").hide();}else{$("#ev-search-container").show();}
var result=false;if(!(_.isUndefined(tagsGroupsTitle)||_.isNull(tagsGroupsTitle))){result=!tagsGroupsTitle.get('result');}
tagsGroupsTitle.set({'title':'Tags & Groups','cid':CID,'result':result});}});var GroupPopupView=Backbone.Marionette.View.extend({template:_.template($('#ev-groupPopup-template').html()),initialize:function(model){this.model=model;},render:function(){$("#common-modal-content-wrapper-id").html(this.template({groupDetails:this.model}));}});var InviteGroupPopup=Backbone.Marionette.View.extend({template:_.template($('#ev-inviteGroupPopup-template').html()),initialize:function(model){this.model=model;},render:function(){$("#common-modal-content-wrapper-id").html(this.template({groupInvite:this.model}));}});function acceptInvitation(e){e.preventDefault();var $target=$(e.currentTarget),groupId=$target.data('groupid'),memberModel=new GroupMemberModel({groupID:groupId,memberID:app.userSession.attributes.userProfile.userId});memberModel.once("sync",function(model,response,options){$('#common-modal').modal('hide');var self=TagsGroupsNavItemContent.prototype;tagGroupsCol.fetch({success:function(model,data){BaseFeatureView.prototype.showhideLoading(false,$(self.el));navItemContentView.$el.html(self.viewgroupstemplate({groups:model.models}));},error:function(model,error){}});});memberModel.once("error",function(model,response,options){});memberModel.save();}
function saveGroupForm(e){e.preventDefault();var $target=$(e.currentTarget),viewType=$target.data('type'),name=$("#groupName").val().trim(),color=$("#groupColor option:selected").val(),desc=$("#groupDes").val().trim(),sharewith=$("#groupShare").val().trim();var grpModel=new TagGroupModel({title:name,color:color,description:desc,groupinvite:sharewith,ownerid:app.userSession.attributes.userProfile.userId});if(!viewType){grpModel.set("groupID",$target.data("id"));}
grpModel.once("sync",function(model,response,options){$('#common-modal').modal('hide');var self=TagsGroupsNavItemContent.prototype;tagGroupsCol.fetch({success:function(model,data){BaseFeatureView.prototype.showhideLoading(false,$(self.el));navItemContentView.$el.html(self.viewgroupstemplate({groups:model.models}));},error:function(model,error){}});});grpModel.once("error",function(model,response,options){});grpModel.save();}
function validateSaveGroupForm(){$(".ev-text-input-label-error").empty();$('input').removeClass('warning');var grpName=$('#groupName');var groupShare=$('#groupShare').val().trim();groupShare=groupShare.replace(/;/g,",");if(grpName.val().trim().length==0){grpName.addClass("warning");grpName.parents('td').find('.ev-text-input-label-error').show().text("Enter group name.");grpName.parent().find('label').addClass("active");grpName.focus();return false;}
if(groupShare.length>1){var booleanTo=validateToRecipients(groupShare);if(booleanTo==false){$('#groupShare').addClass("warning");$('#groupShare').parents('td').find('.ev-text-input-label-error').show().text("Invalid Email address.");$('#groupShare').parent().find('label').addClass("active");$('#groupShare').focus();return false;}}
return true;}
function validateToRecipients(toEmail){var result=true;receipients=toEmail.split(/,/);for(var i=0;i<receipients.length;i++)
{if(!echeck(receipients[i])){return false;}
result=result||validateEmail(email);}
return result;}
function validateEmail(email){var splitted=email.match("^(.+)@(.+)$");if(splitted==null)return false;if(splitted[1]!=null)
{var regexp_user=/^\"?[\w-_\.]*\"?$/;if(splitted[1].match(regexp_user)==null)return false;}
if(splitted[2]!=null)
{var regexp_domain=/^[\w-\.]*\.[A-Za-z]{2,4}$/;if(splitted[2].match(regexp_domain)==null){var regexp_ip=/^\[\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\]$/;if(splitted[2].match(regexp_ip)==null)return false;}
return true;}
return false;}
function echeck(str){var at="@"
var dot="."
var lat=str.indexOf(at)
var lstr=str.length
var ldot=str.indexOf(dot)
if(str.indexOf(at)==-1){return false}
if(str.indexOf(at)==-1||str.indexOf(at)==0||str.indexOf(at)==lstr){return false}
if(str.indexOf(dot)==-1||str.indexOf(dot)==0||str.indexOf(dot)==lstr){return false}
if(str.indexOf(at,(lat+1))!=-1){return false}
if(str.substring(lat-1,lat)==dot||str.substring(lat+1,lat+2)==dot){return false}
if(str.indexOf(dot,(lat+2))==-1){return false}
if(str.indexOf(" ")!=-1){return false}
return true}
var app=app||{};Backbone.Radio.channel("savetoFolderChannel").reply("showmodal",function(url){var commonPopupView=new CommonPopupView({gotoFolderView:url});commonPopupView.show();});var SavetoFolderModel=Backbone.Model.extend({defaults:{},});var SavetoFolderView=BaseFeatureView.extend({template:_.template($('#ev-template_saveToFolder').html()),el:'#content_saveFolder',className:'row',initialize:function(options){this.url=options.url;this.model.on('sync',this.render,this);},render:function(){var folderModel=this.model.toJSON();$('#content_image').removeClass('contentImage-alert');console.log(this.model);$("#content_saveFolder").html(this.template({saveFolderForm:folderModel}));if(folderModel.foldercount==0){$('#saveTofolder_h3').append('<li>With your personal account, you can create up to ten folders in which to save selected records. Each folder can contain up to 100 records. To create a new folder, please enter a folder name:</li>');}else if(folderModel.foldercount>0){$('#saveTofolder_h3').append('<li>With your personal account, you can create up to ten folders in which to save selected records. Each folder can contain up to 100 records. Choose an existing folder or create a new folder.</li>')}
$("#saveFolderid").select2({minimumResultsForSearch:Infinity,width:'100%'});var that=this;$(".savetofolderSubmit").click(function(e){e.preventDefault();console.log(folderModel.foldercount);if(that.validateSelectedFolder(folderModel.foldercount)){that.submitForm();}
return false;});$(".createfolderSubmit").click(function(e){e.preventDefault();if(that.validateFolderName()){that.submitForm();}
return false;});return this;},submitForm:function(){$('#savetofolder').hide();$('#ev-folder-loading').show();$.ajax({type:'POST',url:"/personal/folders/save/add.url?"+$("#savetofolder").serialize(),contentType:"application/json",success:function(data){console.warn(data);$('#common-modal').modal('hide');app.model.trigger("ev:alert","success","Your selected record(s) have been saved to <a href=\"/personal/folders.url?folderid="+
data.folderid+"&usageOrigin=addtofolder&backurl=1\">"+data.foldername+" </a>folder.",false);$('#savetofolder').show();$('#ev-folder-loading').hide();},error:function(jqXHR,status,error){console.warn("error!");$('#savetofolder').show();$('#ev-folder-loading').hide();},complete:function(jqXHR,status){}});},getsavetoFolderForm:function(urlParam){this.model.fetch({url:urlParam,contentType:"application/json",success:function(data){console.log("calling this success"+data);app.appChannel.trigger("ev:sitecatalyst","newPage","/personal/folders/save/view.url");},error:function(data,model){console.log("calling this error"+data+"    model"+model);window.location.href=model.responseText;}});},validateFolderName:function(){$('#SaveToFoldererror').html("");$('#CreateToFoldererror').html("");console.log(document.forms["savetofolder"].folderid);if(typeof(document.forms["savetofolder"].folderid)!='undefined')
{for(var i=0;i<document.forms["savetofolder"].folderid.length;i++)
{document.forms["savetofolder"].folderid.options[i].selected=false;}}
var stripped=stripWhitespace(document.forms["savetofolder"].foldername.value);if(isWhitespace(stripped))
{$('#CreateToFoldererror').html("Please enter a new folder name.");document.forms["savetofolder"].foldername.focus();return false;}
if(typeof(document.forms["savetofolder"].folderid)!='undefined')
{var existingFodlers=document.forms["savetofolder"].folderid.options.length
var cap=stripped.toUpperCase();for(var i=0;i<existingFodlers;i++)
{var foldername=$.trim(document.forms["savetofolder"].folderid.options[i].text.split('(')[0]);var capfoldername=foldername.toUpperCase();if(stripWhitespace(capfoldername)==cap)
{$('#CreateToFoldererror').html("Folder name already exists. Please try another name.");return false;}}}
for(var i=0;i<stripped.length;i++)
{if(badchars.indexOf(stripped.charAt(i))!=-1)
{$('#CreateToFoldererror').html("Folder name cannot contain a "+stripped.charAt(i));return false;}}
var valid="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_";var temp;for(var i=0;i<stripped.length;i++)
{temp=stripped.substring(i,i+1);if((valid.indexOf(temp)=="-1")&&(temp!=' '))
{$('#CreateToFoldererror').html("Special Characters are not allowed in folder names. Please try another name.");document.forms["savetofolder"].foldername.focus();return false;}}
var maxfoldersize=document.forms["savetofolder"].maxfoldersize.value;var intmaxfoldersize=parseInt(maxfoldersize,10);var doccount=document.forms["savetofolder"].documentcount.value;var intdoccount=parseInt(doccount,10);if((intdoccount)>intmaxfoldersize)
{$('#CreateToFoldererror').html("You have tried to save "+intdoccount+" records to a folder that can only accept "+intmaxfoldersize+" more records (the maximum number of records per folder is "+intmaxfoldersize+"). Try saving fewer records, or save records to another folder.");return false;}
try{var docids=$("#docids").val();if(docids!="undefined"&&docids!=""){app.appChannel.trigger("ev:sitecatalyst","saveToList",docids.replace("[","").replace("]","").split(',').map(function(docId){return docId}));}else if($("#docid").val()!=undefined&&$("#docid").val()!=""){app.appChannel.trigger("ev:sitecatalyst","saveToList",[$("#docid").val()]);}}catch(e){}
return true;},validateSelectedFolder:function(nooffolders){$('#SaveToFoldererror').html("");$('#CreateToFoldererror').html("");if(nooffolders>0&&nooffolders<10){document.forms["savetofolder"].foldername.value='';}
var folderids=document.forms["savetofolder"].folderid.value;var flag=false;var maxfoldersize=document.forms["savetofolder"].maxfoldersize.value;var intmaxfoldersize=parseInt(maxfoldersize,10);var doccount=document.forms["savetofolder"].documentcount.value;var intdoccount=parseInt(doccount,10);for(var i=0;i<document.forms["savetofolder"].folderid.length;i++)
{if(document.forms["savetofolder"].folderid.options[i].selected)
{var folderDets=document.forms["savetofolder"].folderid.options[i].value;var currentTokens=folderDets.split(",");var foldersize=currentTokens[1];var intfoldersize=parseInt(foldersize);var allowsize=parseInt(intmaxfoldersize-intfoldersize);if((intfoldersize+intdoccount)>intmaxfoldersize)
{$('#SaveToFoldererror').html("You have tried to save "+intdoccount+" records to a folder that can only accept "+allowsize+" more records (the maximum number of records per folder is "+intmaxfoldersize+"). Try saving fewer records, or save records to another folder.");return false;}
flag=true;}}
if(!flag)
{$('#SaveToFoldererror').html("Please select a Folder");return false;}
try{var docids=$("#docids").val();if(docids!="undefined"&&docids!=""){app.appChannel.trigger("ev:sitecatalyst","saveToList",docids.replace("[","").replace("]","").split(',').map(function(docId){return docId}));}else if($("#docid").val()!=undefined&&$("#docid").val()!=""){app.appChannel.trigger("ev:sitecatalyst","saveToList",[$("#docid").val()]);}}catch(e){}
return flag;},});var whitespace=" \t\n\r";var badchars="&";function isEmpty(s)
{return((s==null)||(s.length==0))}
function stripWhitespace(s)
{return stripCharsInBag(s,whitespace)}
function isWhitespace(s)
{var i;if(isEmpty(s))return true;for(i=0;i<s.length;i++)
{var c=s.charAt(i);if(whitespace.indexOf(c)==-1)return false;}
return true;}
function stripCharsInBag(s,bag)
{var i;var returnString="";for(i=0;i<s.length;i++)
{var c=s.charAt(i);if(bag.indexOf(c)==-1)returnString+=c;}
return returnString;}
ClearBasketForDownload={timeoutstatus:false,startProcess:function(){setTimeout(ClearBasketForDownload.checkStatus,2000);ClearBasketForDownload.timeoutstatus=false;setTimeout(ClearBasketForDownload.timeoutOccured,60000);},stopProcess:function(){},checkStatus:function(){if(!ClearBasketForDownload.timeoutstatus){$.ajax({url:"/delivery/download/downloadstatus.url",cache:false,success:function(data,status,xhr){if(data!=null&&data.downloadstatus=='DOWNLOAD_STARTED'){setTimeout(ClearBasketForDownload.checkStatus,2000);}else if(data!=null&&data.downloadstatus=='DOWNLOAD_INTERRUPTED'){ClearBasketForDownload.handleFailureDownload();}else if(data!=null&&data.downloadstatus=='DOWNLOAD_SUCCEEDED'){ClearBasketForDownload.handleSuccessDownload();}else{ClearBasketForDownload.handleUnexpectedErrorDownload();}},error:function(data){ClearBasketForDownload.handleUnexpectedErrorDownload();},});}else{ClearBasketForDownload.timeoutstatus=false;ClearBasketForDownload.handleError("An unexpected error has occurred. Selected records were not removed.");}},handleSuccessDownload:function(){ClearBasketForDownload.clearBasket();},handleFailureDownload:function(){ClearBasketForDownload.handleError("An unexpected error has occurred. Your records were not downloaded.");},handleUnexpectedErrorDownload:function(){ClearBasketForDownload.handleError("An unexpected error has occurred. Your records were not downloaded.");},clearBasket:function(){app.basket.deleteAll({success:function(data,status,xhr){app.model.attributes.selectedRecords=0;app.model.trigger("change:selectedRecords");},error:function(data){ClearBasketForDownload.handleError("An unexpected error has occurred. Selected records were not removed.");}});},handleError:function(msg){app.model.trigger("ev:alert","error",msg,true);},timeoutOccured:function(){ClearBasketForDownload.timeoutstatus=true;}};var dlOptions;function initOneClick(){if(app.userSession.isIndividuallyAuthenticated()){$.cookie('ev_dldpref','{"location":"'+app.sessionSettings.attributes.dlLocation
+'","format":"'+app.sessionSettings.attributes.dlFormat+'","displaytype":"'
+app.sessionSettings.attributes.dlOutput+'","rmselected":"'+app.sessionSettings.attributes.dlRemoveSelected
+'","summary":"'+app.sessionSettings.attributes.dlSummary+'","baseaddress":"'+app.sessionSettings.attributes.carsDomain
+'","filenameprefix":"'+app.sessionSettings.attributes.dlFileNamePrefix+'"}',{path:'/'});}else{$.cookie('ev_oneclickdl',null,{path:'/'});}
$("body").append('<form name="oneClickDLForm" id="oneClickDLForm" method="post" action="/delivery/download/submit.url"></form>');}
function checkReferexOnlyFolder(){var downloadformat=dlOptions.format;if(downloadformat==="excel"&&$('title:contains(My Folders:)').length>0){var dbarray=$(".dbnameidentifier:not(:contains(Referex))");if(typeof(dbarray)!='undefined'&&dbarray!=null&&dbarray.length==0){return true;}}
return false;}
function checkForOneClick(isFolderView){if(app.sessionSettings){if(updateDlOptions()){changeOneClick(dlOptions.location,isFolderView);}}}
function updateDlOptions(isFolderView){var cookiename="ev_oneclickdl";if(app.userSession.isIndividuallyAuthenticated()){cookiename="ev_dldpref";}
if($.cookie(cookiename)&&$.cookie(cookiename)!='null'){dlOptions=JSON.parse($.cookie(cookiename));return true;}
return false;}
function changeOneClick(dlType,isFolderView){if(dlType=="tofolder"&&typeof isFolderView!='undefined'&&isFolderView!=null&&isFolderView){var downloadicon='<img id="downloadicon" border="0" alt="" src="/static/images/1x1_transparent.png" class="sprite sprite-Download" style="border:none"/>';if($('#downloadlink').is(':visible')){$("#downloadlink").html(downloadicon+"Download");$("#downloadlink").removeClass();$("#downloadlink").addClass("nooneclickdl");$("#downloadlink").attr("title",'Download selections');}
if($('#oneclickDL').is(':visible')){$("#oneclickDL").hide();}
if($('#downloadli').is(':visible')){$("#downloadli").removeClass();$("#downloadli").addClass("download");$("#downloadli").addClass("activeControls");}
return false;}
var downloadicon="";if(dlType=="refworks"){downloadicon='<img id="downloadicon" class="dlicon" border="0" alt="" src="/static/images/refworks.jpg"/>';}else if(dlType=="googledrive"){downloadicon='<img id="downloadicon" class="dlicon" border="0" alt="" src="/static/images/drive.png"/>';}else if(dlType=="dropbox"){downloadicon='<img id="downloadicon" class="dlicon" border="0" alt="" src="/static/images/dropbox.png"/>';}else if(dlType=="mendeley"){downloadicon='<img id="downloadicon" class="dlicon" border="0" alt="" src="/static/images/mendeley.png"/>';}else if(dlType=="tofolder"){downloadicon='<span class="ss-downloadfolder"></span>';}else{downloadicon='<span class="ss-desktop"></span>';}
$(".download-link").html('<span class="ss-navigatedown"></span>');$(".download-link").addClass("editDLSettings");$(".download-link").addClass("oneclick");$(".download-link").attr("title",'Click to change one click download preferences.');$(".oneclick-dl").html("");$(".oneclick-dl").html(downloadicon);$(".oneclick-dl").show();$("#downloadli").removeClass();$("#downloadli").addClass("activeControls");}
function getURLParamByName(name,url){if(!url)return null;name=name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexS="[\\?&]"+name+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(url);return results==null?null:results[1];}
function recordPageDownloadSubmit(dlLinkUrl){dlLinkUrl=dlLinkUrl.match(/\?.+/)[0];dlLinkUrl=dlLinkUrl.substr(1,dlLinkUrl.length);var downloadLocation=dlOptions.location;var usageOriginForOneClick=getURLParamByName('usageOrigin',dlLinkUrl);var removeSelected=(usageOriginForOneClick=="recordpage")?false:dlOptions.rmselected;if(dlOptions.displaytype=='default'){dlDisplayType=dlLinkUrl.split('displayformat=')[1].split('&')[0];}else if((dlOptions.displaytype==undefined||dlOptions.displaytype=='undefined')&&(downloadLocation=="mendeley")){dlDisplayType='abstract';}else{dlDisplayType=dlOptions.displaytype;}
try{if(downloadLocation=="tofolder"){if(!app.userStatus){app.appChannel.trigger('ev:sitecatalyst','contentExport',{docList:"",dlopt:dlOptions});}}else{if(usageOriginForDelivery=='recordpage'){app.appChannel.trigger('ev:sitecatalyst','contentDownload',{docList:$(':input[type="checkbox"][name="cbresult"]').map(function(){if($(this).is(":visible")){return $(this).attr('docid')}}).get(),dlopt:dlOptions});}else{app.appChannel.trigger('ev:sitecatalyst','getExportDociIds',dlOptions);}}}catch(e){}
if(downloadLocation=="mendeley"){var vars=dlLinkUrl.split('&');var docid='';for(var i=0;i<vars.length;i++){var pair=vars[i].split('=');if(pair[0]=="docidlist"){docid=pair[1];break;}}
var mendeleylink="/mendeley/submit.url?usageZone=oneclick&usageOrigin="+usageOriginForOneClick+"&docId="+docid;var new_window=window.open(mendeleylink,"_blank",'toolbar=yes,status=yes,scrollbars=yes,resizable=yes,width=700,height=500');new_window.focus();return false;}else if(downloadLocation=="tofolder"){var folderurl=tofolderurl;if(folderurl!=null&&folderurl.length>0){console.log(folderurl);Backbone.Radio.channel("savetoFolderChannel").request("showmodal",folderurl+"&usageZone=oneclick&usageOrigin="+usageOriginForOneClick);}
return false;}else{var params="&clearBasket=true";var baseaddress=dlOptions.baseaddress;var downloadformat=dlOptions.format;var displayformat=dlOptions.displaytype;var downloadfilenameprefix=dlOptions.filenameprefix;var milli=(new Date()).getTime();if(typeof(sessionid)!='undefined'&&sessionid.length>0){if(sessionid.indexOf("_")>=0){sessionid=sessionid.split("_")[1];}
params+="&sessionid="+sessionid;}
if(displayformat=='default'){params+=dlLinkUrl;}else{var vars=dlLinkUrl.split('&');for(var i=0;i<vars.length;i++){var pair=vars[i].split('=');if(pair[0]!="displayformat"){params+="&"+pair[0]+"="+pair[1];}}
params+="&displayformat="+displayformat;}
if(downloadLocation=="refworks"){var refworksURL="http://www.refworks.com/express/ExpressImport.asp?filter=Desktop+Biblio.+Mgt.+Software&vendor=Engineering+Village+2";if(app.userSession.attributes.userProfile.userId){params+="&uid="+app.userSession.attributes.userProfile.userId;}
url="http://"+baseaddress
+"/delivery/download/refworks.url?downloadformat="
+downloadformat
+"&timestamp="+milli
+"&usageZone=oneclick"
+"&"+params;window.open(refworksURL+"&url="+escape(url),"RefWorksMain","width=800,height=500,scrollbars=yes,menubar=yes,resizable=yes,directories=yes,location=yes,status=yes");}else if(downloadLocation=="dropbox"){var downloadUrl='/delivery/download/submit.url?usageZone=oneclick&downloadMedium=dropbox&downloadformat='+downloadformat+"&filenameprefix="+downloadfilenameprefix+"&"+params;var dropBoxPageUrl='https://'+baseaddress+'/delivery/download/dropbox.url?downloadformat='+downloadformat+"&filenameprefix="+downloadfilenameprefix+'&'+params+'&dropBoxDownloadUrl='+escape(downloadUrl);var new_window1=window.open(dropBoxPageUrl,'DropBox',"height=350,width=820,resizable=yes,scrollbars=yes");new_window1.focus();}else if(downloadLocation=="googledrive"){var googleDrivePageUrl='https://'+baseaddress+'/delivery/download/googledrive.url?usageZone=oneclick&downloadformat='+downloadformat+"&filenameprefix="+downloadfilenameprefix+'&'+params;var new_window1=window.open(googleDrivePageUrl,'GoogleDrive',"height=350,width=820,resizable=yes,scrollbars=yes");new_window1.focus();ret=false;}else{var downloadUrl='/delivery/download/submit.url?usageZone=oneclick&downloadformat='+downloadformat+"&filenameprefix="+downloadfilenameprefix+'&'+params;$("#oneClickDLForm").attr("action",downloadUrl);$("#oneClickDLForm").submit();if(removeSelected){ClearBasketForDownload.startProcess();}}
return false;}}
function basketDownloadSubmit(usageOriginForDelivery,databaseid,sessionid,folderid,sortBy,sortDirn){var baseaddress=dlOptions.baseaddress;var displaytype=dlOptions.displaytype;var downloadformat=dlOptions.format;var downloadLocation=dlOptions.location;var downloadfilenameprefix=dlOptions.filenameprefix;var removeSelected=dlOptions.rmselected;var summary=dlOptions.summary;var addParams='';var milli=(new Date()).getTime();if(displaytype=='default'){if(typeof($("input[name='selectoption']:checked").val())!="undefined"&&downloadLocation!="refworks"){displaytype=$("input[name='selectoption']:checked").val();}else{displaytype='citation';}}
if((displaytype==undefined||displaytype=='undefined')&&(downloadLocation=="mendeley")){dlDisplayType='abstract';}else{dlDisplayType=displaytype;}
try{if(downloadLocation=="tofolder"){if(!app.userStatus){app.appChannel.trigger('ev:sitecatalyst','contentExport',{docList:"",dlopt:dlOptions});}}else{if(usageOriginForDelivery=='recordpage'){app.appChannel.trigger('ev:sitecatalyst','contentDownload',{docList:$(':input[type="checkbox"][name="cbresult"]').map(function(){if($(this).is(":visible")){return $(this).attr('docid')}}).get(),dlopt:dlOptions});}else if((folderid!=undefined&&folderid!="undefined"&&folderid!="")||(usageOriginForDelivery!=undefined&&usageOriginForDelivery=="savedrecords")){}else{app.appChannel.trigger('ev:sitecatalyst','getExportDociIds',dlOptions);}}}catch(e){}
if(downloadLocation=="mendeley"){if(typeof(folderid)!=="undefined"&&folderid!==null&&folderid!=''){var mendeleylink="/mendeley/submit.url?usageZone=oneclick&usageOrigin="+usageOriginForDelivery+"&folderId="+folderid;}else{var mendeleylink="/mendeley/submit.url?usageZone=oneclick&usageOrigin="+usageOriginForDelivery;}
var new_window=window.open(mendeleylink,"_blank",'toolbar=yes,status=yes,scrollbars=yes,resizable=yes,width=700,height=500');new_window.focus();return false;}else if(downloadLocation=="tofolder"){if(tofolderurl!=null&&tofolderurl.length>0){var folderurl=tofolderurl;console.log(folderurl);Backbone.Radio.channel("savetoFolderChannel").request("showmodal",folderurl+"&usageZone=oneclick&usageOrigin="+usageOriginForDelivery);}}else{if(downloadformat==undefined||downloadformat==""){alert("You must choose a download format.");return(false);}
if(typeof(folderid)!='undefined'){addParams+="&folderid="+folderid;}else{addParams+="&summary="+summary;if(downloadLocation=='mypc'&&(removeSelected==true||removeSelected=='true')){addParams+="&clearBasket=true";}}
addParams+="&sortBy="+sortBy+"&sortDirn="+sortDirn;if(typeof(sessionid)!='undefined'&&sessionid.length>0){if(sessionid.indexOf("_")>=0){sessionid=sessionid.split("_")[1];}}
var url="";if(downloadLocation=="refworks"){var refworksURL="http://www.refworks.com/express/ExpressImport.asp?filter=Desktop+Biblio.+Mgt.+Software&vendor=Engineering+Village+2";if(app.userSession.attributes.userProfile.userId){addParams+="&uid="+app.userSession.attributes.userProfile.userId;}
url="http://"+baseaddress
+"/delivery/download/refworks.url?downloadformat="
+downloadformat+"&timestamp="+milli
+"&sessionid="+sessionid
+'&database='+databaseid
+'&usageZone=oneclick&usageOrigin='+usageOriginForDelivery
+addParams;window.open(refworksURL+"&url="+escape(url),"RefWorksMain","width=800,height=500,scrollbars=yes,menubar=yes,resizable=yes,directories=yes,location=yes,status=yes");}else if(downloadLocation=="dropbox"){var downloadUrl='/delivery/download/submit.url?usageZone=oneclick&usageOrigin='+usageOriginForDelivery+'&downloadMedium=dropbox&downloadformat='+downloadformat+'&filenameprefix='+downloadfilenameprefix+'&displayformat='+displaytype+'&database='+databaseid+"&sessionid="+sessionid+addParams;var dropBoxPageUrl='https://'+baseaddress+'/delivery/download/dropbox.url?downloadformat='+downloadformat+'&displayformat='+displaytype+'&filenameprefix='+downloadfilenameprefix+'&dropBoxDownloadUrl='+escape(downloadUrl);if(typeof(folderid)=='undefined'){dropBoxPageUrl+="&summary="+summary;}
var new_window1=window.open(dropBoxPageUrl,'DropBox',"height=350,width=820,resizable=yes,scrollbars=yes");new_window1.focus();}else if(downloadLocation=="googledrive"){var googleDrivePageUrl='https://'+baseaddress+'/delivery/download/googledrive.url?usageZone=oneclick&usageOrigin='+usageOriginForDelivery+'&downloadformat='+downloadformat+'&filenameprefix='+downloadfilenameprefix+'&displayformat='+displaytype+"&sessionid="+sessionid+'&database='+databaseid+addParams;var new_window1=window.open(googleDrivePageUrl,'GoogleDrive',"height=350,width=820,resizable=yes,scrollbars=yes");new_window1.focus();ret=false;}else{var downloadUrl='/delivery/download/submit.url?usageZone=oneclick&usageOrigin='+usageOriginForDelivery+'&downloadformat='+downloadformat+'&filenameprefix='+downloadfilenameprefix+'&displayformat='+displaytype+'&database='+databaseid+addParams;if(downloadLocation=='mypc'&&(removeSelected==true||removeSelected=='true')){var w=window.open(downloadUrl,"_blank");if(w.addEventListener){w.addEventListener("unload",function(){ClearBasketForDownload.clearBasket();});}else{var count=0;var doClear=function(){if(w.closed){ClearBasketForDownload.clearBasket();}else{count++;if(count>30){ClearBasketForDownload.clearBasket();}else{setTimeout(doClear,2000);}}};setTimeout(doClear,2000);}}else{$("#oneClickDLForm").attr("action",downloadUrl);$("#oneClickDLForm").submit();}}
return false;}}
function setDLTabListener(e){if(e.keyCode==9&&document.activeElement.id=='updateUserSettings'){$("#outputMyPC").focus();e.preventDefault();}}
function checkForRefworks(radio){var output=$(radio).attr("id");var defOutput="";if(output=="outputMyPC"){$(".clrbsktEnabled").prop("disabled",false);$(".clrbsktEnabled").parent().removeClass("grayText");}else{$(".clrbsktEnabled").prop("disabled",true);$(".clrbsktEnabled").parent().addClass("grayText");}
if(output=="outputRefWorks"){$("#rdRis").prop("checked",true);$("#rdCit").prop("checked",true);$(".typeEnabled").prop("disabled",true);$(".summaryEnabled").prop("disabled",true);$(".typeEnabled").parent().addClass("grayText");$("#savePrefsButton").show();handleFnPrefix();$("#filenameprefix").prop("disabled",true);$("#filenamesuffix").addClass("grayText");}else if(output=="outputMendeley"||(output=="outputToFolder"&&(typeof isFolderView=='undefined'||isFolderView==null||!isFolderView))){$(".summaryEnabled").prop("disabled",true);$(".typeEnabled").prop("disabled",true);$(".typeEnabled").parent().addClass("grayText");$(".typeEnabled[type='checkbox']").prop("checked",false);$(".typeEnabled[type='radio']").prop("checked",false);$("#savePrefsButton").show();handleFnPrefix();$("#filenameprefix").prop("disabled",true);$("#filenamesuffix").addClass("grayText");}else{$(".summaryEnabled").prop("disabled",false);$(".typeEnabled").prop("disabled",false);$(".typeEnabled").parent().removeClass("grayText");$("#savePrefsButton").show();$("#filenameprefix").prop("disabled",false);$("#filenamesuffix").removeClass("grayText");handleNonMendeleyOptions();}
var disableFolder=false;if(app.getLocation().indexOf('folders.url')!==-1){disableFolder=true}
if(disableFolder||(typeof isFolderView!='undefined'&&isFolderView!=null&&isFolderView)){$("#outputToFolder").prop("disabled",true);$("label[for='outputToFolder'] img").attr("src","/static/images/SavetoFolder_gray.png");$("label[for='outputToFolder']").addClass("grayText");$("#savePrefsButton").show();if(output=='outputToFolder'){$("#outputMyPC").prop("checked",true);}}}
function handleNonMendeleyOptions(){var dtype=$('input[name="displayformat"]:checked').val();var dlformat=$('input[name="downloadformat"]:checked').val();if(typeof dtype==='undefined'||dtype==null||dtype==''){$("#rdPdf").prop("checked",true);}
if(typeof dlformat==='undefined'||dlformat==null||dlformat==''){$("#rdDefault").prop("checked",true);}}
function handleFnPrefix(){var fileNamePrefix=$.trim($('#filenameprefix').val());if(fileNamePrefix==null||fileNamePrefix.length>50||fileNamePrefix.length<3||!isValidInput(fileNamePrefix)){if(typeof dlOptions==='undefined'||dlOptions.filenameprefix==null||typeof dlOptions.filenameprefix==='undefined'||dlOptions.filenameprefix==''){$('#filenameprefix').val($('#dlFileNamePrefixOrg').val());}else{$('#filenameprefix').val(dlOptions.filenameprefix);}}
$("#valerrormsgcontainer").css("display","none");}
function updatefilenameprefixlable(){var formatval=$('input[name="downloadformat"]:checked').val();var outputval=$('input[name="displayformat"]:checked').val();if(formatval=='ris'){outputval="RIS";}else if(formatval=='bib'){outputval="BIB";}
if(outputval=='default'){outputval="current_page_view";}
if(formatval==="ascii"){formatval="txt";}else if(formatval==="bib"){formatval="bib";}else if(formatval==="csv"){formatval="csv";}else if(formatval==="pdf"){formatval="pdf";}else if(formatval==="rtf"){formatval="rtf";}else if(formatval==="excel"){formatval="xlsx";}else if(typeof formatval==="undefined"||formatval===null||formatval===""){formatval="format";}else{formatval="ris";}
if(typeof outputval==="undefined"||outputval===null||outputval===""){outputval="Output";}
$('#filenamesuffix').html('_'+outputval+'_Date/Time.'+formatval);}
function checkForRisandBib(){var opLocVal=$('input[name="outputLocation"]:checked').val();if(opLocVal=='mendeley'||opLocVal=='tofolder'){return;}else{var formatval=$('input[name="downloadformat"]:checked').val();if(formatval=='ris'||formatval=='bib'){$("#rdDefault").prop("checked",true);$('input[name="displayformat"]').prop("disabled",true);$('input[name="displayformat"]').parent().find("label").addClass("grayText");}else{$('input[name="displayformat"]').prop("disabled",false);$('input[name="displayformat"]').parent().find("label").removeClass("grayText");}}}
function handleKeyPress(event){if(event.keyCode==13){saveDownloadPrefs(event);event.preventDefault();return false;}}
function isSummaryAllowed(){var folderid=$("#folderid").val();var docid=$("#docidlist").val();if(folderid){return false;}else if(docid){return false;}
return true;}
function isRemoveSelectedAllowed(){var folderid=$("#folderid").val();var docid=$("#docidlist").val();if(folderid){return false;}else if(docid){return false;}
return true;}
function isSummarySelected(){var summary=$('input[name="summary"]:checked').val();if(summary){return true;}
return false;}
function isRemoveSelected(){var clrbasket=$('input[name="clearBasket"]:checked').val();if(clrbasket){return true;}
return false;}
function handleRemoveSelectedFlow(){var removeSelFlow=false;if(isRemoveSelectedAllowed()){if($('#outputMyPC').is(':checked')){removeSelFlow=isRemoveSelected();}else{$('input[name="clearBasket"]').prop("checked",false);}}else{$('input[name="clearBasket"]').prop("checked",false);}
return removeSelFlow;}
function saveDownloadPrefs(event){var baseaddress=$("input[name='baseaddress']").val();var displaytype=$('input[name="displayformat"]:checked').val();var downloadformat=$('input[name="downloadformat"]:checked').val();var downloadLocation=$('input[name="outputLocation"]:checked').val();var summary=isSummarySelected();var rmselected=isRemoveSelected();if(downloadLocation!="mendeley"&&downloadLocation!="tofolder"&&(downloadformat==undefined||downloadformat=="")){alert("You must choose a download format.");event.preventDefault();return(false);}
if(downloadLocation!="mendeley"&&downloadLocation!="tofolder"&&(displaytype==undefined||displaytype=="")){alert("You must choose a output type.");event.preventDefault();return(false);}
var filenameprefix=$.trim($('#filenameprefix').val());if(filenameprefix.length<3){handlevalidationerror("File name prefix cannot be empty and should have minimum of 3 characters");event.preventDefault();return(false);}
if(filenameprefix.length>50){handlevalidationerror("File name prefix cannot have more than 50 characters");event.preventDefault();return(false);}
if(!isValidInput(filenameprefix)){handlevalidationerror("File name prefix can have only letters, numbers and underscore character");return false;}
function handlevalidationerror(msg,tab){$("#valerrormsg").html(msg);$("#valerrormsgcontainer").css("display","block");if(typeof makeTabs!='undefined'){makeTabs("#preftabs");}
$("#preftabs").tabs({active:tab});if(tab==0){$("#facetContainer").css("border","double 2px orange");}else if(tab==1){$("#fileNameContainer").css("border","double 2px orange");}
$("#saveCancelContainer").css("padding-top","0px");}
var dlData={"dlLocation":downloadLocation,"dlFormat":downloadformat,"dlOutput":displaytype,"dlFileNamePrefix":filenameprefix,"dlSummary":summary,"dlRemoveSelected":rmselected};Backbone.Radio.channel("sessionsettingschannel").request("sessionsettings:set",dlData);if(app.userSession.isIndividuallyAuthenticated()){var isPrefUpdateChosen=$('#updateUserSettings:checked').val();if(isPrefUpdateChosen==="true"){app.myPrefs.once("sync",function(){app.myPrefs.at(0).save(dlData,{patch:true,success:function(data){proceedWithDownload(downloadLocation,downloadformat,displaytype,baseaddress,filenameprefix,true,isPrefUpdateChosen);},error:function(data){$("#dlprefsSaved,#dlprefsandsettingsSaved,#prefsSaved,#prefsNotSaved").hide();$("#dlprefsandsettingsnotSaved").fadeIn("slow");$('#downloadlink').attr("title","Click to change one click download preferences.");$('#downloadlink').tooltipster('destroy');}});});app.myPrefs.fetch();}else{proceedWithDownload(downloadLocation,downloadformat,displaytype,baseaddress,filenameprefix,true,isPrefUpdateChosen);}}else{proceedWithDownload(downloadLocation,downloadformat,displaytype,baseaddress,filenameprefix,false,null);}
event.preventDefault();return false;}
function proceedWithDownload(downloadLocation,downloadformat,displaytype,baseaddress,filenameprefix,isLoggedInUser,isPrefUpdateChosen){var milli=(new Date()).getTime();var docidlist=$("#docidlist").val();var handlelist=$("#handlelist").val();var folderid=$("#folderid").val();var summary=isSummarySelected();var rmselected=isRemoveSelected();if(isLoggedInUser){$.cookie('ev_dldpref','{"location":"'+downloadLocation+'","format":"'+downloadformat+'","displaytype":"'+displaytype+'","rmselected":"'+rmselected+'","summary":"'+summary+'","baseaddress":"'+baseaddress+'","filenameprefix":"'+filenameprefix+'"}',{path:'/'});if(isPrefUpdateChosen==='true'){$("#dlprefsandsettingsSaved").fadeIn("slow");$("#dlprefsandsettingsnotSaved,#prefsSaved,#dlprefsSaved,#prefsNotSaved").hide();}else{$("#dlprefsSaved").fadeIn("slow");$("#dlprefsandsettingsnotSaved,#prefsSaved,#dlprefsandsettingsSaved,#prefsNotSaved").hide();}}else{$.cookie('ev_oneclickdl','{"location":"'+downloadLocation+'","format":"'+downloadformat+'","displaytype":"'+displaytype+'","rmselected":"'+rmselected+'","summary":"'+summary+'","baseaddress":"'+baseaddress+'","filenameprefix":"'+filenameprefix+'"}',{path:'/'});$("#dlprefsSaved").fadeIn("slow");$("#prefsSaved,#prefsNotSaved").hide();}
var usageOriginForDelivery=$("#usageOriginFromDownload").val();dlOptions={location:downloadLocation,format:downloadformat,displaytype:displaytype,baseaddress:baseaddress,filenameprefix:filenameprefix,summary:summary,rmselected:rmselected};if(displaytype=='default'){if(typeof($("input[name='selectoption']:checked").val())!="undefined"&&downloadLocation!="refworks"){actionDisplayType=$("input[name='selectoption']:checked").val();}if(downloadLocation=="refworks"){actionDisplayType="citation";}
displaytype=actionDisplayType;$('#oneClickContent input[value="'+actionDisplayType+'"]').prop("checked",true);}
changeOneClick(downloadLocation);if((displaytype==undefined||displaytype=='undefined')&&(downloadLocation=="mendeley")){dlDisplayType='abstract';}else{dlDisplayType=displaytype;}
try{if(downloadLocation=="tofolder"){if(!app.userStatus){app.appChannel.trigger('ev:sitecatalyst','contentExport',{docList:"",dlopt:dlOptions});}}else{if(usageOriginForDelivery=='recordpage'){app.appChannel.trigger('ev:sitecatalyst','contentDownload',{docList:$(':input[type="checkbox"][name="cbresult"]').map(function(){if($(this).is(":visible")){return $(this).attr('docid')}}).get(),dlopt:dlOptions});}else if((folderid!=undefined&&folderid!="undefined"&&folderid!="")||(usageOriginForDelivery!=undefined&&usageOriginForDelivery=='savedrecords')){}else{app.appChannel.trigger('ev:sitecatalyst','getExportDociIds',dlOptions);}}}catch(e){}
var url="";if(downloadLocation=="refworks"){var refworksURL="http://www.refworks.com/express/ExpressImport.asp?filter=Desktop+Biblio.+Mgt.+Software&vendor=Engineering+Village+2";url="http://"+baseaddress
+"/delivery/download/refworks.url?usageOrigin="+usageOriginForDelivery+"&downloadformat="
+downloadformat+"&timestamp="+milli
+"&sessionid="+$("#sessionid").val()
+"&usageOrigin="+usageOriginForDelivery;if(docidlist&&docidlist.length>0)
url+="&docidlist="+docidlist;if(handlelist&&handlelist.length>0)
url+="&handlelist="+handlelist;if(folderid&&folderid.length>0)
url+="&folderid="+folderid;if(app.userSession.attributes.userProfile.userId)
url+="&uid="+app.userSession.attributes.userProfile.userId;window.open(refworksURL+"&url="+escape(url),"RefWorksMain","width=800,height=500,scrollbars=yes,menubar=yes,resizable=yes,directories=yes,location=yes,status=yes");}else if(downloadLocation=="dropbox"){submitDropboxDL();}else if(downloadLocation=="googledrive"){submitGoogleDriveDL();}else if(downloadLocation=="mendeley"){var docid=$("#docidlist").val();var folderid=$("#folderid").val();if(typeof(docid)!=="undefined"&&docid!==null&&docid!=''){var mendeleylink="/mendeley/submit.url?usageOrigin="+usageOriginForDelivery+"&docId="+docid;}else if(typeof(folderid)!=="undefined"&&folderid!==null&&folderid!=''){var mendeleylink="/mendeley/submit.url?usageOrigin="+usageOriginForDelivery+"&folderId="+folderid;}else{var mendeleylink="/mendeley/submit.url?usageOrigin="+usageOriginForDelivery;}
var new_window=window.open(mendeleylink,"_blank",'toolbar=yes,status=yes,scrollbars=yes,resizable=yes,width=700,height=500');new_window.focus();}else if(downloadLocation=="tofolder"&&tofolderurl.length>0){var saveToFolderUrl;if(app.userSession.isIndividuallyAuthenticated()){saveToFolderUrl=tofolderurl.replace(/backurl=/,"nobackurl=");}else{saveToFolderUrl=tofolderurl;}
Backbone.Radio.channel("savetoFolderChannel").request("showmodal",saveToFolderUrl+"&usageOrigin="+usageOriginForDelivery);}else{if(!isSummaryAllowed()){$('input[name="summary"]').prop("checked",false);}
var removeSelFlow=handleRemoveSelectedFlow();if(removeSelFlow){var myPcUrl=$("#download").prop("action")+"?"+$("#download").serialize();var w=window.open(myPcUrl,"_blank");if(w.addEventListener){w.addEventListener("unload",function(){ClearBasketForDownload.clearBasket();});}else{var count=0;var doClear=function(){if(w.closed){ClearBasketForDownload.clearBasket();}else{count++;if(count>30){ClearBasketForDownload.clearBasket();}else{setTimeout(doClear,2000);}}};setTimeout(doClear,2000);}}else{$("#download").submit();}}
$('#downloadlink').attr("title","Click to change one click download preferences.");if(!(downloadLocation=="tofolder"&&tofolderurl.length>0))
$('#common-modal').modal('hide');app.model.trigger("ev:alert","success","Your download settings for this session have been saved. Save this preference to your profile in Settings.",false,true);}
var app=app||{};var savedSearchCount=0;var validateName={whitespace:" \t\n\r",errors:[],isEmpty:function(s)
{return((s==null)||(s.trim().length==0))},stripCharsInBag:function(s,bag){var i;var returnString="";for(i=0;i<s.length;i++)
{var c=s.charAt(i);if(bag.indexOf(c)==-1)returnString+=c;}
return returnString;},stripWhitespace:function(s){return this.stripCharsInBag(s,this.whitespace)},isWhitespace:function(s)
{var i;if(this.isEmpty(s))return true;for(i=0;i<s.length;i++)
{var c=s.charAt(i);if(this.whitespace.indexOf(c)==-1)return false;}
return true;},validateSearchName:function(editName){var stripped=this.stripWhitespace(editName);this.errors={};if(this.isWhitespace(stripped))
{this.errors['name']="Please enter a new search name.";return this.errors;}
var valid="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_(,)[]{}*?$.-'/\"";var temp;for(var i=0;i<stripped.length;i++)
{temp=stripped.substring(i,i+1);if((valid.indexOf(temp)=="-1")&&(temp!=' '))
{this.errors['name']="Special Characters are not allowed in search name. Please try another name.";return this.errors;}}
return true;},validateToRecipients:function(cclist)
{this.errors={};try{$.each(cclist.split(","),function(idx,val){var regex=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;if($.trim(val).length==0||!regex.test($.trim(val))){this.errors['name']="Please enter a comma separated list or single valid email address.";return this.errors;}});}catch(err){console.log("Error while validating email!",err);this.errors['name']="Please enter a comma separated list or single valid email address.";return this.errors;}
return true;}};var saveSeachAlertModel=Backbone.Model.extend({defaults:{SavedSearch:[],EmailAlert:[],}})
var saveSeachAlertView=BaseFeatureView.extend({initialize:function(){app.savedSearches.once("sync",this.saveSearchUpdate,this);app.emailAlerts.once("sync",this.alertUpdate,this);app.savedSearches.fetch();app.emailAlerts.fetch();this.listenTo(app.appChannel,"ev:saveSearchAlerts",this.updateAlerts);this.listenTo(app.appChannel,"ev:updateSaveSearchAlertsFromResults",this.updateAlertsForResults);this.listenTo(this.model,'change',this.alertCount);},saveSearchUpdate:function(saveSeachCollection,response,options){this.model.set({SavedSearch:saveSeachCollection.pluck("searchId")});},alertUpdate:function(alertCollection,response,options){alertCollection.each(function(alert){if((alert.attributes.alertDisabled=='YES')){this.model.attributes.SavedSearch.push(alert.attributes.searchId);}else{this.model.attributes.EmailAlert.push(alert.attributes.searchId);}},this);this.alertCount();},alertCount:function(){$("#ev-header-alerts-link .ev-badge").text(this.model.get('EmailAlert').length);},updateAlertsForResults:function(searchId,type){if(!_.isUndefined(app.getRegion().currentView.searchView)&&!_.isUndefined(app.getRegion().currentView.searchView.searchResultsView)&&!_.isUndefined(app.getRegion().currentView.searchView.searchResultsView.model.attributes)&&!_.isUndefined(app.getRegion().currentView.searchView.searchResultsView.model.attributes.searchMetaData)&&!_.isUndefined(app.getRegion().currentView.searchView.searchResultsView.model.attributes.searchMetaData.searchId)&&(app.getRegion().currentView.searchView.searchResultsView.model.attributes.searchMetaData.searchId==searchId)){if(type=='EmailAlert'){$("#save-search-link").addClass("saved");$("#create-alert-link").addClass("saved");}else if(type=='SavedSearch'){$("#save-search-link").addClass("saved");$("#create-alert-link").removeClass("saved");}else if(type=='removeAlert'){$("#save-search-link").removeClass("saved");$("#create-alert-link").removeClass("saved");}}else if(searchId=='removeAll'){$("#save-search-link").removeClass("saved");$("#create-alert-link").removeClass("saved");}},updateAlerts:function(entity){var key=Object.keys(entity)[0],val=entity[Object.keys(entity)[0]],self=this;var saveSearch=this.model.get('SavedSearch'),alerts=this.model.get('EmailAlert'),searchState='',selectVal='mark',saveSearchIndex=saveSearch.indexOf(val),alertsIndex=alerts.indexOf(val);switch(key){case"SavedSearch":if(saveSearchIndex!==-1){saveSearch.splice(saveSearchIndex,1);selectVal='unmark';}else{if(alertsIndex!==-1){alerts.splice(alertsIndex,1);selectVal='unmark';}
this.model.set({'SavedSearch':saveSearch.concat(val)});}
searchState='SavedSearch';this.alertsIcon(searchState,selectVal,val);break;case"EmailAlert":if(alertsIndex!==-1){alerts.splice(alertsIndex,1);this.model.set({'SavedSearch':saveSearch.concat(val)});selectVal='unmark';}else{if(saveSearchIndex!==-1){saveSearch.splice(saveSearchIndex,1);}
this.model.set({'EmailAlert':alerts.concat(val)});}
searchState='EmailAlert';this.alertsIcon(searchState,selectVal,val);break;case"statusCheck":if(saveSearchIndex!==-1){this.alertsIcon('SavedSearch','',val);}else if(alertsIndex!==-1){this.alertsIcon('EmailAlert','',val);}
break;case"remove":if(saveSearchIndex!==-1){saveSearch.splice(saveSearchIndex,1);}else if(alertsIndex!==-1){alerts.splice(alertsIndex,1);}
this.alertsIcon('remove','',val);break;case"removeAll":alerts.length=0;saveSearch.length=0;this.alertsIcon('removeall','','');break;};},alertsIcon:function(searchState,selectVal,id){$("#ev-header-alerts-link .ev-badge").text(this.model.get('EmailAlert').length);savedSearchCount=this.model.get('SavedSearch').length+this.model.get('EmailAlert').length;var resultSaveIcon=$('#save-search-link'),resultAlertIcon=$('#create-alert-link'),historyAlertIcon=$("#actions-"+id+" .EmailAlert"),historySaveIcon=$("#actions-"+id+" .SavedSearch"),removeSaved=$("#save-search-link, #create-alert-link, #actions-"+id+" .EmailAlert, #actions-"+id+" .SavedSearch");if(searchState!==''){if(searchState=='EmailAlert'){resultSaveIcon.hasClass('saved')?'':resultSaveIcon.addClass('saved');(selectVal=='unmark')?resultAlertIcon.removeClass('saved'):resultAlertIcon.addClass('saved');(selectVal=='unmark')?historyAlertIcon.removeClass("saved"):historyAlertIcon.addClass("saved");historySaveIcon.hasClass('saved')?'':historySaveIcon.addClass("saved");}else{if(selectVal=='unmark'){removeSaved.removeClass('saved');}else{historySaveIcon.hasClass('saved')?'':historySaveIcon.addClass("saved");resultSaveIcon.hasClass('saved')?'':resultSaveIcon.addClass("saved");}}}}});var SaveSearch=Backbone.Model.extend({defaults:{id:'',},searchTypeUpdate:function(model,options){options=options||{};options.contentType="application/json";options.url='/personal/savesearch/'+options.alertType+'.url?alertcbx='+this.attributes.searchId;Backbone.Model.prototype.save.call(this,model,options);},rename:function(model,options){options=options||{};options.contentType="application/json";options.url='/personal/savesearch/submitSearchName.url?searchid='+this.attributes.searchId+'&searchName='+options.searchName+'&submit=Save';Backbone.Model.prototype.save.call(this,model,options);},statusEnableDisable:function(model,options){options=options||{};options.contentType="application/json";options.url='/personal/savesearch/disableAlert.url?searchid='+this.attributes.searchId+'&alertDisabled='+options.alertStatus+"&via=check";Backbone.Model.prototype.save.call(this,model,options);},recentPublishStatus:function(model,options){options=options||{};options.contentType="application/json";options.url='/personal/savesearch/updateAlertLatest.url?searchid='+this.attributes.searchId+'&alertLatest='+options.pubStatus+"&via=check";Backbone.Model.prototype.save.call(this,model,options);},recipients:function(model,options){options=options||{};options.contentType="application/json";options.url='/personal/savesearch/emailcclist.url?searchid='+this.attributes.searchId+'&action='+options.action+'&list='+options.list+'&via=ccAjax';Backbone.Model.prototype.save.call(this,model,options);},removeSearchAlert:function(options){options=options||{};options.contentType="application/json";options.url='/personal/savesearch/DeleteSearch.url?searchid='+this.attributes.searchId;Backbone.Model.prototype.destroy.call(this,options);},removeAll:function(options){options=options||{};options.contentType="application/json";options.url='/personal/savesearch/DeleteAllSearchesAlerts.url';Backbone.Model.prototype.destroy.call(this,options);},});var SaveSearchListCollection=Backbone.Collection.extend({model:SaveSearch,fetch:function(options){options=options||{};options.contentType="application/json";options.url='/personal/savesearch/fetchsavedsearches.url?usageOrigin='+BaseFeatureView.prototype.getQueryValue('usageOrigin')+'&usageZone='+BaseFeatureView.prototype.getQueryValue('usageZone');return Backbone.Model.prototype.fetch.call(this,options);},});var saveSeachMainView=BaseFeatureView.extend({el:'#ev-savesearch-container',template:_.template($('#ev-saveSearchAlert-template').html()),initialize:function(){this.SaveSearchList=new SaveSearchListCollection();app.saveSeachCollection=this.SaveSearchList;this.SaveSearchList.bind("reset",this.removeAll);},events:{"click .remove-all":"removeAllAlerts"},removeAllAlerts:function(event){event.preventDefault();var self=this;Backbone.Radio.channel("commonModal").request("showmodal",{cbSubmit:function(){self.model.removeAll({wait:true,success:function(response){app.saveSeachCollection.reset();app.appChannel.trigger('ev:saveSearchAlerts',{'removeAll':''});app.appChannel.trigger('ev:updateSaveSearchAlertsFromResults',"removeAll",'removeAlert');$('#common-modal').modal('toggle');},error:function(response){$('#common-modal').modal('toggle');}});},serverWait:true,modalType:"warn",content:{bodyContent:"Are you sure you want to delete these alerts?",titleContent:"Warning"}});},removeAll:function(){$('ul.alert-list-item-row').remove();$("#ev-alert-list-loading").hide();$('.all-alert-remove').hide();$('#ev-saveSearchAlertList-content').append('You have no email alerts and saved searches.');return false;},renderList:function(){$("#ev-savedSeach-content").show();var self=this;if(this.SaveSearchList.models.length==0){$("#ev-alert-list-loading").hide();$('#ev-saveSearchAlertList-content').append('You have no email alerts and saved searches.');return false;}
$(".all-alert-remove").show();this.savedSearchListView=new SavedSearchListView({collection:this.SaveSearchList});},renderSaveSeach:function(view){var self=this;$(".ev-container").hide();$("#ev-spine").collapse('hide');$(this.el).fadeIn();$(".ev-content").hide();this.$el.html(this.template(this.model.toJSON()));$("#ev-alert-list-loading").show();var fetched=this.SaveSearchList.fetch({error:function(collection,response,options){(options.textStatus.indexOf('parsererror')!==-1)?window.location.href='/customer/authenticate/loginfull.url':''}}).done(function(data){self.renderList();});},});var SavedSearchListView=BaseFeatureView.extend({initialize:function(){this.render();},render:function(e){var self=this;this.collection.each(function(alert){$('#ev-saveSearchAlertList-content').append(new AlertListItemView({model:alert}).render().el);},this);$("#ev-alert-list-loading").hide();$('#ev-saveSearchAlertList-content').fadeIn();return this;}});var AlertListItemView=BaseFeatureView.extend({className:"alert-list-item-row",tagName:"ul",template:_.template($('#ev-saveSearchRecords-template').html()),cclistBefore:'',initialize:function(){this.model.bind("error",this.render,this);this.model.bind("destroy",this.close,this);},events:{"click .alert-delete":"deleteAlert","click .editAlert":"editAlert","click .editSearchAlert":"editSearchAlert","click .alertStatusChange :checkbox":"disableOrEnableAlert","click .recentPub :checkbox":"updateRecentStatus","click .searchId-type :checkbox ":"changeSearchType","click .editCCList":"updateRecipients",},changeSearchType:function(event){var $target=$(event.target);if(!$target.is(':checkbox'))$target=$target.find('input:checkbox');var $alertType=($target.is(':checked'))?"AddAlerts":"ClearAlerts";var id=$($target).attr('id').replace('searchId-type-','');this.model.searchTypeUpdate({},{wait:true,success:function(model,response){app.appChannel.trigger('ev:saveSearchAlerts',($alertType=='AddAlerts')?{'EmailAlert':id}:{'SavedSearch':id});app.appChannel.trigger('ev:updateSaveSearchAlertsFromResults',id,($alertType=='AddAlerts')?'EmailAlert':'SavedSearch');},error:function(model,response){},alertType:$alertType});$('#'+'recentPub-status-'+id).attr('disabled',function(_,attr){return!attr});$("[searchid='"+id+"'].toggleCCList").toggleClass('ev-disable active');$("[searchid='"+id+"'].toggleCCList").attr('disabled',function(_,attr){return!attr});},deleteAlert:function(event){var self=this,searchId='';event.preventDefault();searchId=$(event.currentTarget).attr('id');Backbone.Radio.channel("commonModal").request("showmodal",{cbSubmit:function(){self.model.removeSearchAlert({wait:true,success:function(model,response){$(self.el).remove();app.appChannel.trigger('ev:saveSearchAlerts',{'remove':searchId});app.appChannel.trigger('ev:updateSaveSearchAlertsFromResults',searchId,'removeAlert');$('#common-modal').modal('toggle');if(app.saveSeachCollection.length==0||savedSearchCount==0){$('#ev-saveSearchAlertList-content').append('You have no email alerts and saved searches.');$('.all-alert-remove').hide();}},error:function(model,response){$('#common-modal').modal('toggle');},});return false;},serverWait:true,modalType:"warn",content:{bodyContent:"Are you sure you want to delete this alert?",titleContent:"Warning"}});},editToggle:function(event){var self=event,link=$(event.target),linkId=link.attr('editType'),searchid=$(event.target).parent().attr('searchid');$(".alertName.ev-button-group-left").not("[searchid='"+searchid+"']").addClass("hidden");$(".alertName.active").not("[searchid='"+searchid+"']").removeClass("hidden");if(link&&link.attr('class').indexOf("editing")!=-1){$('[searchid="'+searchid+'" ] .'+linkId+'-input').val($('[searchid="'+searchid+'" ] #'+linkId+'_original').html());$("."+linkId+"[searchid='"+searchid+"']").toggleClass('hidden');this.cclistBefore=$('[searchid="'+searchid+'" ] #cclistta').val();return false;}else{var original=$('[searchid="'+searchid+'" ] #'+linkId+'_original'),updated=$('[searchid="'+searchid+'" ] .'+linkId+'-input'),originalName=original.html(),editName=updated.val();return{id:original,actual:original.html(),edit:updated.val(),searchId:searchid}}
return false;},editAlert:function(event){event.preventDefault();var toggleStatus=this.editToggle(event);if(!toggleStatus){return false;}else{var editName=toggleStatus.edit,original=toggleStatus.id,originalName=toggleStatus.actual,searchid=toggleStatus.searchId,validate=validateName.validateSearchName(editName);if(typeof(validate)==="boolean"){original.html(editName);this.model.rename({},{wait:true,success:function(model,response){if(response!=null&&response.status=='failed'){original.html(originalName);}else{$('#alertName_original_'+searchid).html(editName);}},error:function(model,response){original.html(originalName);},searchName:editName});$(".alertName[searchid='"+searchid+"']").toggleClass('hidden');return false;}else{app.model.trigger("ev:alert","error",validate.name);}}},editSearchAlert:function(event){event.preventDefault?event.preventDefault():event.returnValue=false;var url=$(event.currentTarget).attr("href");app.router.navigate(url,true);},disableOrEnableAlert:function(event){var $target=$(event.target);if(!$target.is(':checkbox'))$target=$target.find('input:checkbox');var disableStatus=!($target.is(':checked'));this.model.statusEnableDisable({},{success:function(model,response){if(response!=null&&response.status=='failure'){return false;}},error:function(model,response){return false;},alertStatus:disableStatus});},updateRecentStatus:function(event){var $target=$(event.target)
if(!$target.is(':checkbox'))$target=$target.find('input:checkbox');var publishStatus=$target.is(':checked');this.model.recentPublishStatus({},{wait:true,success:function(model,response){},error:function(model,response){return false;},pubStatus:publishStatus});},updateRecipients:function(event){event.preventDefault();var action=$(event.target).attr('action'),searchid=$(event.target).parent().attr('searchid'),ccListAction='',cclist='',editName='',original='',originalName='';if($('[searchid="'+searchid+'" ].alertCCList').hasClass('ev-disable')){return false;}
var toggleStatus=this.editToggle(event);if(!toggleStatus){return false;}else{ccListAction='editcclist';editName=toggleStatus.edit;original=toggleStatus.id;originalName=toggleStatus.actual;cclist=editName;var validate=true;if(this.cclistBefore!=""&&editName==""){ccListAction='deletecclist';cclist='';original=$('[searchid="'+searchid+'" ] #alertCCList_original');originalName=original.html();original.html('');}else{validate=validateName.validateToRecipients(editName);}
if(typeof(validate)==="boolean"){original.html(editName);}
else{app.model.trigger("ev:alert","error",validate.name);return false}}
this.model.recipients({},{wait:true,success:function(model,response){if(response!=null&&response.status=='failed'){original.html(originalName);return false;}else{if(response.deletecclist){app.model.trigger("ev:alert","success","You have successfully deleted recipients.");}else{app.model.trigger("ev:alert","success","Your recipient(s) information has been updated successfully.");}
$("[searchid='"+searchid+"'] [action=delete]").removeClass("linkDisabled ");}},error:function(model,response){original.html(originalName);return false;},action:ccListAction,list:cclist});$(".alertCCList[searchid='"+searchid+"']").toggleClass('hidden');},render:function(e){window.document.title="Engineering Village - Alerts & Saved searches";$(this.el).html(this.template({alert:this.model.toJSON()}));return this;},close:function(){$(this.el).unbind();$(this.el).remove();},});var app=app||{};var gmapsloaded=false;var gmapsloaderror=false;(function(){var proxied=window.alert;window.alert=function(){var test=true;if(arguments&&arguments.length>=1&&arguments[0].match(/Google has disabled use of the Maps API for this application/g)){mapToggleAnchor.attr('title','Show Map');mapToggleAnchor.text('Show Map');$("#maps").hide();gmapsloaderror=true;}
return proxied.apply(this,arguments);};})();var MapView=Backbone.Marionette.View.extend({el:"#ev-maps-container",template:_.template($('#ev-maps-template').html()),options:{EV_MAXZOOM:10,EV_MAXMARKERCOUNT:30,gmap:null,startLatLng:null,bounds:null,mapToggleAnchor:$("#mapToggleAnchor"),mapcanvas:$("#map_canvas"),divmap:$("#maps"),mapKey:'AIzaSyCfQ_HSbcET25jn-cuT2Lz0CVycFnoGgZQ',database:null},events:{"click #resetcenter":"resetMap","click #map-close-button":"closeMap"},initialize:function(opt){if(gmapsloaderror)return false;var self=this;this.$el.html(this.template(this.model));if(!gmapsloaded){var url="https://www.google.com/jsapi";$.ajax({url:url,dataType:"script",async:false,success:function(){self.loadMaps();}});gmapsloaded=true;}else{self.togglemap();}},loadMaps:function(){var self=this;var url="https://maps.googleapis.com/maps/api/js?key="+self.options.mapKey+"&sensor=false&v=3.exp";$.ajax({url:url,dataType:"script",async:false,success:function(){self.togglemap();}});},togglemap:function(){var self=this;self.populatemap();},populatemap:function(){var self=this;self.options.startLatLng=new google.maps.LatLng(0,0);self.options.bounds=new google.maps.LatLngBounds();var milli=(new Date()).getTime();var searchid=app.model.attributes.loadedSearchId;var dbmask=self.options.database;var request=$.ajax({url:"/search/results/geoterms.url?searchid="+searchid+"&dbmask="+dbmask+"&timestamp="+milli,dataType:"JSON"});request.done(function(response){self.options.gmap=new google.maps.Map($("#map_canvas")[0],{center:self.options.startLatLng,zoom:1,panControl:false,zoomControl:true,scaleControl:false,maxZoom:self.options.EV_MAXZOOM,minZoom:1,mapTypeId:google.maps.MapTypeId.HYBRID});var places=eval(response);if(places.placemarks!=undefined){var markercount=((places.placemarks.length<self.options.EV_MAXMARKERCOUNT)?places.placemarks.length:self.options.EV_MAXMARKERCOUNT);for(var i=0;i<markercount;i++){var point=new google.maps.LatLng(places.placemarks[i].point.lat,places.placemarks[i].point.lng);self.createMarker(point,places.placemarks[i].name,places.placemarks[i].description,places.placemarks[i].search);self.options.bounds.extend(point);}
if(markercount==0){alert("No map points were returned for your search.");$("#maps").hide();}}else{alert("No map points were returned for your search.");$("#maps").hide();};});request.fail(function(jqXHR,textStatus){alert("Request failed: "+textStatus);});},createMarker:function(point,name,description,searchurl){var self=this;var marker=new google.maps.Marker({position:point,map:self.options.gmap,title:description});google.maps.event.addListener(marker,"click",function(){Backbone.Radio.channel("searchResultChannel").request("navigateToExpertSubmit");$("#mapsUrl").val(searchurl).trigger("change");$("#maps").hide();});return marker;},resetCenterAndZoom:function(){var self=this;if(self.options.bounds!=null){self.options.gmap.fitBounds(self.options.bounds);self.options.gmap.setCenter(self.options.bounds.getCenter());}},isBrowserCompatible:function(){var support=$.support;if(support){return true;}
return false;},resetMap:function(event){var self=this;event.preventDefault();self.resetCenterAndZoom();},closeMap:function(event){event.preventDefault();var self=this;self.options.mapToggleAnchor.attr('title','Show Map');self.options.mapToggleAnchor.text('Show Map');$("#maps").hide();},});var askAnExpertView=BaseFeatureView.extend({template:_.template($("#ev-askAnExpert-template").html()),el:'#ev-AskAnExpert-container',initialize:function(){},events:{'click #askSpecialist_id':'askSpecialist','click #asklib_id':'askLibrarian',},render:function(){console.log("render is called");$(this.el).find('#ev-AskAnExpert-content').html(this.template({}));$('#ev-AskAnExpert-content').show();var librarianEmail="/askanexpert/email/display.url?section=Ask%20a%20Librarian&sectionid=three";var refemail=app.userSession.attributes.userTextZones.REFERENCE_SERVICES_LINK;;if(_.isUndefined(refemail)||_.isNull(refemail)||_.isEmpty(refemail)||this.validateEmail(refemail)){$(this.el).find('#askLibrarian_div').html('<button id="asklib_id" class="ev-button-small-primary " href="'+librarianEmail+'">Ask a librarian</button>');}else if(refemail.indexOf("mailto:")!==-1){librarianEmail=refemail;$(this.el).find('#askLibrarian_div').html('<a name="Email a Librarian" title="Email a Librarian"  href="'+librarianEmail+'">Email a Librarian</a>');}else if(refemail.contains("javascript:")){javaScriptLink=true;this.librarianEmail=refemail;$(this.el).find('#askLibrarian_div').html('<a name="Email a Librarian" title="Email a Librarian"  href="'+librarianEmail+'">Email a Librarian</a>');}else if(refemail.contains("http")){this.librarianEmail=refemail;$(this.el).find('#askLibrarian_div').html('<button id="asklib_id" class="ev-button-small-primary " href="'+librarianEmail+'">Ask a librarian</button>');}},askSpecialist:function(){var commonPopupView=new CommonPopupView({link:"/askanexpert/email/display.url?section=Ask%20a%20Product%20Specialist&sectionid=two"});commonPopupView.show();$('#askexpert-modal-title').html('Ask a product specialist: ');return false;},askLibrarian:function(e){var link_href=$(e.currentTarget).attr("href");console.log(link_href);var commonPopupView=new CommonPopupView({link:link_href});commonPopupView.show();commonPopupView.$modal.find('.modal-title').html('Ask a librarian:  ');$('#askexpert-modal-title').html('Ask a librarian:');$('#header_detail').html('');return false;},validateEmail:function(email){var re=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(email);}});(function(){var c=document.getElementById("plx-css-popup");if(!c){var q=document.head||document.getElementsByTagName("head")[0]||document.documentElement,c=document.createElement("link");c.setAttribute("id","plx-css-popup");c.setAttribute("type","text/css");c.setAttribute("rel","stylesheet");c.setAttribute("href","//d39af2mgp1pqhg.cloudfront.net/popup.css");q.appendChild(c)}})();(function(){window.__plumX=window.__plumX||{};window.__plumX.widgets=window.__plumX.widgets||{};var c=__plumX.widgets;c.imageServiceUrl="https://print.plu.mx/widget/other/pc/png?size=256";c.dataServiceUrl="https://api.plu.mx/widget/other";c.dataServiceUrlEl="https://api.plu.mx/widget/elsevier";c.staticImagesUrl="//d39af2mgp1pqhg.cloudfront.net/2e9971b1fdcd89dc49349f95aa214ae5/";c.extjsBaseUrl="//d39af2mgp1pqhg.cloudfront.net";c.isElsevier=!1;c.init=function(){for(var q in c)try{c[q].wireUp()}catch(p){}}})();(function e$$0(q,p,h){function m(a,b){if(!p[a]){if(!q[a]){var e="function"==typeof require&&require;if(!b&&e)return e(a,!0);if(l)return l(a,!0);e=Error("Cannot find module '"+a+"'");throw e.code="MODULE_NOT_FOUND",e;}e=p[a]={exports:{}};q[a][0].call(e.exports,function(b){var g=q[a][1][b];return m(g?g:b)},e,e.exports,e$$0,q,p,h)}return p[a].exports}for(var l="function"==typeof require&&require,f=0;f<h.length;f++)m(h[f]);return m})({1:[function(c,q,p){var h,m,l,f=function(a,b){return function(){return a.apply(b,arguments)}};p=c("./loader");m=c("./resource");l=c("./statistics");p.whenReady(function(a){return a});h=["Usage","Captures","Mentions","Social Media","Citations"];c=function(){function a(a,e){this.handler=a;this.widgetOptions=e;this._whenFail=f(this._whenFail,this);this._whenDone=f(this._whenDone,this);this.handleFail=f(this.handleFail,this);this.handleEmpty=f(this.handleEmpty,this);this.handleData=f(this.handleData,this);this.fetch=f(this.fetch,this);this.stats=null}a.prototype.fetch=function(a){this.params=a;return m.artifact(a).fail(this._whenFail).done(this._whenDone)};a.prototype.handleData=function(){this.handler.stats(this.stats);this.handler.callback.success();return this.handler.placeholder.trigger("plum:widget-load",[this.widgetOptions])};a.prototype.handleEmpty=function(){this.handler.empty();this.handler.callback.empty();return this.handler.placeholder.trigger("plum:widget-empty",[this.widgetOptions])};a.prototype.handleFail=function(){this.handler.fail();this.handler.callback.fail();return this.handler.placeholder.trigger("plum:widget-error",[this.widgetOptions])};a.prototype._whenDone=function(a){var e,r,g,d;this.stats=l(a.statistics);d=!1;r=0;for(g=h.length;r<g;r++)a=h[r],e="hide"+a.charAt(0)+a.substr(1).toLowerCase().replace(" ",""),this.stats.data&&(this.stats.data.hasOwnProperty(a)&&!0!==this.widgetOptions[e])&&(d=!0);return this.stats.isEmpty||!1===d?this.handleEmpty():this.handleData()};a.prototype._whenFail=function(a){return"NotFound"===a?this.handleEmpty():this.handleFail()};return a}();q.exports=c},{"./loader":7,"./resource":13,"./statistics":14}],2:[function(c,q,p){var h,m,l,f,a,b=function(a,d){return function(){return a.apply(d,arguments)}},e=function(a,d){function b(){this.constructor=a}for(var n in d)r.call(d,n)&&(a[n]=d[n]);b.prototype=d.prototype;a.prototype=new b;a.__super__=d.prototype;return a},r={}.hasOwnProperty;l={"stroke-width":1,stroke:"black",fill:"black"};f="http://www.w3.org/2000/svg";p=function(){function a(d){this.strokeWidth=b(this.strokeWidth,this);this.stroke=b(this.stroke,this);this.fill=b(this.fill,this);this.setAttr=b(this.setAttr,this);this.node=document.createElementNS(f,d)}a.prototype.setAttr=function(a,b){return this.node.setAttribute(a,null!=b?b:l[a])};a.prototype.fill=function(a){return this.setAttr("fill",a)};a.prototype.stroke=function(a){return this.setAttr("stroke",a)};a.prototype.strokeWidth=function(a){return this.setAttr("stroke-width",a)};return a}();c=function(a){function d(a){d.__super__.constructor.call(this,a)}e(d,a);return d}(p);p=function(a){function d(a,n,k){d.__super__.constructor.call(this,n);a.appendChild(this.node);this.fill(k.fill);this.stroke(k.stroke);this.strokeWidth(k.strokeWidth)}e(d,a);return d}(p);m=function(a){function d(a,n){this.line=b(this.line,this);this.cubic=b(this.cubic,this);this.close=b(this.close,this);this.start=b(this.start,this);d.__super__.constructor.call(this,a,"path",n);this.path=[];this.started=!1}e(d,a);d.prototype.start=function(a,n){this.path.push("M "+a+","+n);return this.started=!0};d.prototype.close=function(){this.path.push("Z");return this.setAttr("d",this.path.join(" "))};d.prototype.cubic=function(a,n,k,d,b,g){return this.path.push("C "+a+","+n+" "+k+","+d+" "+b+","+g)};d.prototype.line=function(a,n){return this.path.push("L "+a+","+n)};return d}(p);h=function(a){function d(a,n){this.position=b(this.position,this);this.radius=b(this.radius,this);d.__super__.constructor.call(this,a,"circle",n);this.radius(n.r);this.position(n.cx,n.cy)}e(d,a);d.prototype.radius=function(a){return this.setAttr("r",a)};d.prototype.position=function(a,n){this.setAttr("cx",a);return this.setAttr("cy",n)};return d}(p);a=function(a){function d(a){this.circle=b(this.circle,this);this.path=b(this.path,this);d.__super__.constructor.call(this,"svg",a);this.setAttr("viewBox","0 0 100 100");this.setAttr("width",a.width);this.setAttr("height",a.height)}e(d,a);d.prototype.path=function(a){return new m(this.node,a)};d.prototype.circle=function(a){return new h(this.node,a)};return d}(c);c={create:function(b){return new a(b)},supported:!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect};q.exports=c},{}],3:[function(c,q,p){q.exports=window.__plumX.widgets},{}],4:[function(c,q,p){var h,m,l,f,a,b;f=c("./loader").whenReady(function(a){return f=a});p=["div","ul","li","span","img"];c={};h=function(a,b){var g,d,c;d=f("<"+a+">");for(g in b)c=b[g],"text"===g?d.text(c):"html"===g?d.html(c):d.attr(g,c);return d};m=function(a){return function(b){return h(a,b)}};l=0;for(a=p.length;l<a;l++)b=p[l],c[b]=m(b);c.a=function(a){return h("a",f.extend({target:"_blank"},a))};q.exports=c},{"./loader":7}],5:[function(c,q,p){var h,m,l,f,a,b,e=function(a,b){return function(){return a.apply(b,arguments)}},r=function(a,b){function n(){this.constructor=a}for(var k in b)g.call(b,k)&&(a[k]=b[k]);n.prototype=b.prototype;a.prototype=new n;a.__super__=b.prototype;return a},g={}.hasOwnProperty;l=c("./loader");p=c("./config");f=c("./dom");h=l.whenReady(function(a){return h=a});m=p.dataServiceUrl+"/event";a=function(){var a;a=h("#plx-evt-trspt");return a.length?a:f.img({id:"plx-evt-trspt"}).css({display:"none"}).appendTo("body")};b=function(b){return a().attr({src:m+"?"+h.param(b)})};c=function(a){function b(){this._endHover=e(this._endHover,this);this._startHover=e(this._startHover,this);this._clearTimer=e(this._clearTimer,this);this.logEvent=e(this.logEvent,this);this.bindTo=e(this.bindTo,this);return b.__super__.constructor.apply(this,arguments)}r(b,a);b.prototype.timeout=1E3;b.prototype.eventName="hover";b.prototype.bindTo=function(a){return a.on("mouseenter",this._startHover).on("mouseleave",this._endHover)};b.prototype.logEvent=function(){return this.log()};b.prototype._clearTimer=function(){if(this.timer)return clearTimeout(this.timer),this.timer=null};b.prototype._startHover=function(){this._clearTimer();return this.timer=setTimeout(this.logEvent,this.timeout)};b.prototype._endHover=function(){return this._clearTimer()};return b}(function(){function a(b){this.options=b;this.log=e(this.log,this)}a.prototype.log=function(a){null==a&&(a={});return b(h.extend({event:this.eventName},this.options,a))};a.prototype.logEvent=function(){};return a}());q.exports={Hover:c}},{"./config":3,"./dom":4,"./loader":7}],6:[function(c,q,p){var h,m,l,f=function(a,b){return function(){return a.apply(b,arguments)}};l=function(a){var b,e;if(a){e=a.split(".").reverse();for(a=window[e.pop()];a&&(b=a[e.pop()]);)a=b;return a}};m=function(a,b){return function(a,b){return a?function(){var g;if(g=l(a))return g(b.elem())}:function(){}}(a,b)};h=function(){return function(a){var b,e;this.handler=a;e=this.handler.callbacks;for(b in e)a=e[b],this[b]=m(a,this.handler)}}();c=function(){function a(a,e){this.placeholder=a;this.options=e;this.fail=f(this.fail,this);this.elem=f(this.elem,this);this.remove=f(this.remove,this);this.render=f(this.render,this);this.callbacks={success:this.options.onSuccess,empty:this.options.onEmpty,fail:this.options.onFail};this.callback=new h(this)}a.prototype.render=function(a){a=this.renderer(a);this.placeholder.replaceWith(a);return this.placeholder=a};a.prototype.remove=function(){return this.placeholder.hide().removeClass()};a.prototype.elem=function(){return this.placeholder.get(0)};a.prototype.fail=function(){return this.remove()};return a}();q.exports=c},{}],7:[function(c,q,p){var h,m,l,f,a,b,e;h=c("./config");m=null;f=[];e=function(){return m(document).ready(function(a){var b,d,e,n;n=[];d=0;for(e=f.length;d<e;d++)b=f[d],n.push(b(a));return n})};l=function(a){return(document.head||document.getElementsByTagName("head")[0]||document.documentElement).appendChild(a)};b=function(a){var b;b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("src",a);return b};p=function(){var e;e=b("//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js");e.readyState?e.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState)return a()}:e.onload=a;return l(e)};c=function(a){a=a.split(".");return"1"!==a[0]?!1:8<=parseInt(a[1],10)?!0:!1};a=function(){m=window.jQuery.noConflict(!0);return e()};null!=window.jQuery&&c(window.jQuery.fn.jquery)?(m=window.jQuery,e()):p();(function(){var a;a=b(h.extjsBaseUrl+"/extjs/xss.js");return l(a)})();q.exports={whenReady:function(a){return"undefined"!==typeof isReady&&null!==isReady?a(m):f.push(a)}}},{"./config":3}],8:[function(c,q,p){c=function(){for(var c=[],m=0;64>m;)c[m]=0|4294967296*Math.abs(Math.sin(++m));return function(l){var f,a,b,e,r=[];l=unescape(encodeURI(l));for(var g=l.length,d=[f=1732584193,a=-271733879,~f,~a],s=0;s<=g;)r[s>>2]|=(l.charCodeAt(s)||128)<<8*(s++%4);r[l=16*(g+8>>6)+14]=8*g;for(s=0;s<l;s+=16){g=d;for(e=0;64>e;)g=[b=g[3],(f=g[1]|0)+((b=g[0]+[f&(a=g[2])|~f&b,b&f|~b&a,f^a^b,a^(f|~b)][g=e>>4]+(c[e]+(r[[e,5*e+1,3*e+5,7*e][g]%16+s]|0)))<<(g=[7,12,17,22,5,9,14,20,4,11,16,23,6,10,15,21][4*g+e++%4])|b>>>32-g),f,a];for(e=4;e;)d[--e]=d[e]+g[e]}for(l="";32>e;)l+=(d[e>>3]>>4*(1^e++&7)&15).toString(16);return l}}();q.exports=c},{}],9:[function(c,q,p){p=c("./config");c=c("./util");p.pageToken||(p.pageToken=c.guid());q.exports=p.pageToken},{"./config":3,"./util":17}],10:[function(c,q,p){var h,m,l,f,a,b,e,r,g,d;l=c("./print");h=c("./canvas");p=c("./loader");f=c("./util");m=c("./config");a=c("./dom");b=p.whenReady(function(a){return b=a});d=f.shortenKeys;g=function(a){var b,k;b={width:"100%",height:"100%"};k=new l(b);b=h.create(b);a=k["for"](a);(new l.Renderer(b)).render(a);return b.node};r=function(e,n){var k,t;t=b.param(d(e));k=m.imageServiceUrl;n.isElsevier&&(k=m.imageServiceUrlEl);return a.img({src:k+"&"+t})};e=function(a,b){var k;k=f.camelizeKeys(a);return h.supported?g(k):r(k,b)};e.empty=function(){return e({})};e["for"]=function(a,b){return e(a,b)};q.exports=e},{"./canvas":2,"./config":3,"./dom":4,"./loader":7,"./print":12,"./util":17}],11:[function(c,q,p){var h,m,l,f,a,b,e,r,g,d,s,n,k=function(a,k){return function(){return a.apply(k,arguments)}};p=c("./loader");b=c("./util");h=c("./config");d=c("./dom");a=c("./translation");s=p.whenReady(function(a){return s=a});m=["Usage","Captures","Mentions","Social Media","Citations"];f={tiny:"tiny",small:"small",medium:"medium",large:"large","default":"large",defaultBadge:"small"};n=function(a){return function(a){return f[a]||f["default"]}}(this);r=b.categoryClass;g=function(a,k,b){var n,e,g,c;null==b&&(b=function(a){return a});n=r(a);c=d.div({"class":"ppp-title",text:b(a)});g=d.ul();for(e in k)a=k[e],g.append(d.li({"class":n}).append(d.span({"class":"ppp-label",text:b(e)+": "})).append(d.span({"class":"ppp-count",text:a})));return d.li({"class":n}).append(c).append(g)};e=function(){return d.div({"class":"ppp-branding"}).append(d.img({"class":"plx-logo",src:h.staticImagesUrl+"plumx-inverse-logo.png"}))};l=function(){function b(d){this.hidePopup=k(this.hidePopup,this);this.showPopup=k(this.showPopup,this);this.repositionTopPopover=k(this.repositionTopPopover,this);this.positionPopover=k(this.positionPopover,this);this.maybeHidePopover=k(this.maybeHidePopover,this);this.leaveContainer=k(this.leaveContainer,this);this.enterContainer=k(this.enterContainer,this);this.leavePopover=k(this.leavePopover,this);this.enterPopover=k(this.enterPopover,this);this.events=k(this.events,this);this.seeMore=k(this.seeMore,this);this.content=k(this.content,this);this.sizeClass=k(this.sizeClass,this);this.bubbleClass=k(this.bubbleClass,this);this.scaffold=k(this.scaffold,this);var e,t,g,c;this.renderPopup="hidden"!==d.popup;this.href=d.href;this.dir=d.popup||"left";this.summary=d.summary;this.print=d.print;this.isBadge=d.badge;this.size=n(this.isBadge&&"tiny"!==d.size?"defaultBadge":d.size);this.appendBody=d.popover;this.noLink=d.noLink;this.detailSamePage=d.detailSamePage;this.themeClass=null;"themeClass"in d&&(this.themeClass=d.themeClass,this.href+="&theme="+d.themeClass);if("passHiddenCategories"in d){t="hideCitations hideSocialmedia hideUsage hideMentions hideCaptures hideRatings".split(" ");g=0;for(c=t.length;g<c;g++)e=t[g],e in d&&(this.href=this.href+"&"+e+"=true")}this.isEmpty=s.isEmptyObject(this.summary);this.translation=new a(d.lang);this.trans=function(a){return function(k){return a.translation.translate(k)}}(this);this.scaffold(d);this.events()}b.prototype.scaffold=function(a){var k,b,n,t;t=d.div({"class":"PlumX-Popup"});b=d.div({"class":"ppp-container"});n=d.div({"class":"plx-print"}).append(this.print);n=this.noLink?d.a({"class":"plx-wrapping-print-link",href:"javascript:void(0)",title:this.trans("PlumX Metrics Detail Page")}).append(n):this.detailSamePage?d.a({"class":"plx-wrapping-print-link",href:this.href,title:this.trans("PlumX Metrics Detail Page")}).attr("target","_self").append(n):d.a({"class":"plx-wrapping-print-link",href:this.href,title:this.trans("PlumX Metrics Detail Page")}).append(n);b.addClass(this.sizeClass());b.append(n);this.isBadge&&(b.addClass("ppp-badge"),n.append("PlumX Metrics"));this.renderPopup&&(k=this.noLink?d.div({"class":this.bubbleClass()}).append(e()).append(this.content(a)):d.div({"class":this.bubbleClass()}).append(e()).append(this.content(a)).append(this.seeMore()),this.appendBody?s("body").append(k):b.append(k));this.container=b;this.bubble=k||!1;this.element=t.append(b);if(this.themeClass)return this.element=d.div({"class":this.themeClass}).append(t)};b.prototype.bubbleClass=function(){return"ppp-pop ppp-pop-"+this.dir};b.prototype.sizeClass=function(){return"ppp-"+this.size};b.prototype.content=function(a){var k,b,n,t,e,c;b=d.ul();t=0;for(e=m.length;t<e;t++)k=m[t],n="hide"+k.charAt(0)+k.substr(1).toLowerCase().replace(" ",""),c=this.summary[k],s.isEmptyObject(c)||!0!==a[n]&&b.append(g(k,c,this.trans));this.isEmpty&&b.append(this.emptyMessage());return b};b.prototype.seeMore=function(){return this.detailSamePage?d.a({href:this.href}).attr("target","_self").attr("title",this.trans("PlumX Metrics Detail Page")).append(this.trans("see details")):d.a({href:this.href}).attr("title",this.trans("PlumX Metrics Detail Page")).append(this.trans("see details"))};b.prototype.emptyMessage=function(){return d.div({"class":"ppp-empty",text:this.trans("No metrics available.")})};b.prototype.events=function(){if(this.renderPopup)return this.appendBody?(this.inContainer=this.inPopover=this.popoverPositioned=!1,this.bubble.on("mouseenter",this.enterPopover).on("mouseleave",this.leavePopover),this.container.on("mouseenter",this.enterContainer).on("mouseleave",this.leaveContainer)):this.container.on("mouseenter",this.showPopup).on("mouseleave",this.hidePopup)};b.prototype.enterPopover=function(){this.inPopover=!0;return this.bubble.fadeIn("fast")};b.prototype.leavePopover=function(){this.inPopover=!1;return setTimeout(this.maybeHidePopover,250)};b.prototype.enterContainer=function(){this.inContainer=!0;this.positionPopover();return this.bubble.fadeIn("fast")};b.prototype.leaveContainer=function(){this.inContainer=!1;return setTimeout(this.maybeHidePopover,250)};b.prototype.maybeHidePopover=function(){if(!this.inPopover&&!this.inContainer)return this.bubble.fadeOut("fast")};b.prototype.positionPopover=function(){var a,k,b;if(!this.popoverPositioned)return b=this.container.offset(),a=b.left+this.container.width()/2,k=b.top+this.container.height()/2,this.bubble.css(function(){switch(this.dir){case"left":return{left:b.left-175,top:k-60};case"right":return{left:b.left+this.container.width()+
15,top:k-60};case"top":return setTimeout(this.repositionTopPopover,10),{left:-200};case"bottom":return{left:a-80,top:b.top+this.container.height()+15};default:return{left:b.left+this.container.width()+15,top:k-60}}}.call(this)),this.popoverPositioned=!0};b.prototype.repositionTopPopover=function(){var a,b;b=this.container.offset();a=b.left+this.container.width()/2;return this.bubble.css({left:a-80,top:b.top-this.bubble.height()-15,bottom:"inherit"})};b.prototype.showPopup=function(){return this.bubble.fadeIn("fast")};b.prototype.hidePopup=function(){return this.bubble.fadeOut("fast")};return b}();q.exports=function(a){return(new l(a)).element}},{"./config":3,"./dom":4,"./loader":7,"./translation":16,"./util":17}],12:[function(c,q,p){var h,m,l,f,a,b,e,r,g=function(a,b){return function(){return a.apply(b,arguments)}},d=function(a,b){function d(){this.constructor=a}for(var e in b)s.call(b,e)&&(a[e]=b[e]);d.prototype=b.prototype;a.prototype=new d;a.__super__=b.prototype;return a},s={}.hasOwnProperty;m={socialMedia:"#13b7ea",citation:"#fd5704",usage:"#6dd54d",mention:"#f3c316",capture:"#c43bf3",background:"#6e1a62",ring:"#ffffff"};f={socialMedia:[1,1,1,2,2,3,4,7,18],citation:[1,2,3,4,6,10,15,24,44],usage:[1,3,6,11,19,36,73,161,485],mention:[1,1,1,1,1,2,2,3,6],capture:[1,1,2,3,5,7,11,19,39]};l={socialMedia:[1,1,1,2,2,3,4,7,18,44,316,16895933],citation:[1,2,3,4,6,10,15,24,44,74,199,241364],usage:[1,3,6,11,19,36,73,161,485,1181,4558,2133206101],mention:[1,1,1,1,1,2,2,3,6,12,70,1059833],capture:[1,1,2,3,5,7,11,19,39,71,228,3639665]};r={degToRad:function(a){return a*Math.PI/180},log2:function(a){return Math.log(a)/Math.LN2}};h={create:function(a){return(0<a.count?new h.NonEmptyAtom(a):new h.EmptyAtom(a)).serialize()}};h.AtomBase=function(){function a(b){this.serialize=g(this.serialize,this);this.position=g(this.position,this);this.distance=g(this.distance,this);this.metric=b.metric;this.angle=b.angle;this.count=b.count;this.center=b.center;this.mode=b.mode}a.prototype.MIN_RADIUS=5;a.prototype.MAX_RADIUS=14;a.prototype.MIN_PADDING=5;a.prototype.MAX_PADDING=14;a.prototype.DISTANCE=14;a.prototype.isEmpty=function(){return null};a.prototype.radius=function(){return null};a.prototype.padding=function(){return null};a.prototype.distance=function(){return this.DISTANCE+this.padding()};a.prototype.position=function(){var a,b,d;a=r.degToRad(this.angle);b=this.distance();d=Math.sin(a)*b+this.center.x;a=Math.cos(a)*b+this.center.y;return{x:d,y:a}};a.prototype.serialize=function(){var a;a=this.position();return{type:"atom",x:a.x,y:a.y,metric:this.metric,count:this.count,angle:this.angle,radius:this.radius(),distance:this.distance(),isEmpty:this.isEmpty()}};return a}();h.EmptyAtom=function(a){function b(){this.padding=g(this.padding,this);this.radius=g(this.radius,this);return b.__super__.constructor.apply(this,arguments)}d(b,a);b.prototype.isEmpty=function(){return!0};b.prototype.radius=function(){return this.MIN_RADIUS-1};b.prototype.padding=function(){return this.MIN_PADDING-1};return b}(h.AtomBase);h.NonEmptyAtom=function(a){function b(){this.padding=g(this.padding,this);this.radius=g(this.radius,this);return b.__super__.constructor.apply(this,arguments)}d(b,a);b.prototype.isEmpty=function(){return!1};b.prototype.radius=function(){var a,b,k,d,e;if("new"===this.mode){d=this.MIN_RADIUS;e=f[this.metric];a=0;for(b=e.length;a<b;a++)k=e[a],this.count>k&&d++}else if("new95"===this.mode){d=this.MAX_RADIUS;a=1*l[this.metric][9];k=l[this.metric].slice(0,9).reverse();b=0;for(k=k.length;b<k;b++)this.count<a&&d--,a/=2}else if("new99"===this.mode){d=this.MAX_RADIUS;a=1*l[this.metric][10];k=l[this.metric].slice(0,10).reverse();b=0;for(k=k.length;b<k;b++)this.count<a&&d--,a/=2}else d=r.log2(this.count)+this.MIN_RADIUS;d>this.MAX_RADIUS&&(d=this.MAX_RADIUS);d<this.MIN_RADIUS&&(d=this.MIN_RADIUS);return d};b.prototype.padding=function(){return 1.3*(this.radius()-this.MIN_PADDING)+this.MIN_PADDING};return b}(h.AtomBase);e=function(a){function b(a,d){this.generate=g(this.generate,this);this.controlPoints=g(this.controlPoints,this);this.mergePoints=g(this.mergePoints,this);this.serialize=g(this.serialize,this);this.serialize=g(this.serialize,this);b.__super__.constructor.call(this);this.atoms=a;this.center=d;this.generate()}d(b,a);b.prototype.ANGLE_MOD=122;b.prototype.DIST_FACT=0.2;b.prototype.serialize=function(){var a;a=[].concat(this.path);a.type="shape";return a};b.prototype.serialize=function(){var a;a=[].concat(this.path);a.type="shape";return a};b.prototype.mergePoints=function(a){return[a.angle-125,a.angle+125].map(function(b){var k;k=r.degToRad(b);b=Math.sin(k)*a.radius+a.x;k=Math.cos(k)*a.radius+a.y;return{x:b,y:k}})};b.prototype.controlPoints=function(a){var b;b=a.angle+180;return[b-this.ANGLE_MOD,b+this.ANGLE_MOD].map(function(a){return r.degToRad(a)}).map(function(b){return function(k){var d;d=Math.sin(k)*a.distance*b.DIST_FACT+b.center.x;k=Math.cos(k)*a.distance*b.DIST_FACT+b.center.y;return{x:d,y:k}}}(this))};b.prototype.generate=function(){var a,b,k,d,e,n,g,c,f,r;f=this.atoms.map(function(a){return function(b){return a.mergePoints(b)}}(this));a=this.atoms.map(function(a){return function(b){return a.controlPoints(b)}}(this));b=function(b){return a[b][0]};n=function(b){return a[b][1]};k=function(a){return f[a][0]};c=function(a){return f[a][1]};g=this.atoms;d=e=0;for(g=g.length;e<g;d=++e)r=d+1>=this.atoms.length?0:d+1,0===d?this.start(c(d).x,c(d).y):this.line(c(d).x,c(d).y),this.cubic(n(d).x,n(d).y,b(r).x,b(r).y,k(r).x,k(r).y);return this.end()};return b}(function(){function a(){this.serialize=g(this.serialize,this);this.cubic=g(this.cubic,this);this.line=g(this.line,this);this.end=g(this.end,this);this.start=g(this.start,this);this.path=[]}a.prototype.start=function(a,b){return this.path.push({type:"start",x:a,y:b})};a.prototype.end=function(){return this.path.push({type:"end"})};a.prototype.line=function(a,b){return this.path.push({type:"line",x:a,y:b})};a.prototype.cubic=function(a,b,d,e,g,n){return this.path.push({type:"cubic",cx1:a,cy1:b,cx2:d,cy2:e,x:g,y:n})};a.prototype.serialize=function(){var a;a=[];a.type="shape";a.concat(this.path);return a};return a}());b={create:function(a,b){return(new e(a,b)).serialize()}};c=function(){function a(b){this._createShape=g(this._createShape,this);this._createAtoms=g(this._createAtoms,this);var d;this.display_width=b.width||100;this.display_height=b.height||100;this.center={x:this.WIDTH/2,y:this.HEIGHT/2};this.order=this.METRICS.slice(0).reverse();this.step=360/this.METRICS.length;this.mode=null!=(d=b.radius_mode)?d:"old"}a.prototype.WIDTH=100;a.prototype.HEIGHT=100;a.prototype.METRICS=["usage","capture","mention","socialMedia","citation"];a.prototype["for"]=function(a){a=this._createAtoms(a);return[this._createShape(a)].concat(a)};a.prototype._createAtoms=function(a){var b,d,e,g,c,n,f;b=[];f=this.order;e=g=0;for(c=f.length;g<c;e=++g)n=f[e],d=a[n]||0,b.push(h.create({metric:n,count:d,center:this.center,angle:this.step*(e-1),mode:this.mode}));return b};a.prototype._createShape=function(a){return b.create(a,this.center)};return a}();a={atom:function(a,b){if(b.isEmpty)return a.circle({cx:b.x,cy:b.y,r:b.radius,fill:m.background,stroke:m.background});a.circle({cx:b.x,cy:b.y,r:b.radius,fill:m[b.metric],stroke:m.background});return a.circle({cx:b.x,cy:b.y,r:b.radius-1.5,fill:"none",stroke:m.ring,strokeWidth:1.5})},shape:function(a,b){var d,e,g,c,f;g=a.path({fill:m.background,stroke:m.background});c=[];d=0;for(e=b.length;d<e;d++)switch(f=b[d],f.type){case"start":c.push(g.start(f.x,f.y));break;case"end":c.push(g.close());break;case"line":c.push(g.line(f.x,f.y));break;case"cubic":c.push(g.cubic(f.cx1,f.cy1,f.cx2,f.cy2,f.x,f.y));break;default:c.push(void 0)}return c}};p=function(){function b(a){this.canvas=a;this.render=g(this.render,this)}b.prototype.render=function(b){var d,e,g,c,n;n=[];d=0;for(e=b.length;d<e;d++)g=b[d],c=a[g.type],n.push(c(this.canvas,g));return n};return b}();c.Renderer=p;q.exports=c},{}],13:[function(c,q,p){var h,m,l,f,a,b,e,r,g,d=function(a,b){return function(){return a.apply(b,arguments)}},s=[].indexOf||function(a){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===a)return b;return-1};l=c("./loader");h=c("./config");p=c("./util");r=c("./md5");e=l.whenReady(function(a){return e=a});m={cache:!0,ifModified:!0,dataType:"jsonp"};b=function(a){return setTimeout(a,10)};a=function(){function a(){this.put=d(this.put,this);this.has=d(this.has,this);this.get=d(this.get,this);this.items=[]}a.prototype.get=function(a){return this.items[a]};a.prototype.has=function(a){return 0<=s.call(this.items,a)};a.prototype.put=function(a,b){return this.items[a]=b};return a}();f=function(){function e(){this.emit=d(this.emit,this);this.unsubscribe=d(this.unsubscribe,this);this.subscribe=d(this.subscribe,this);this.publish=d(this.publish,this);this.subscribersForHash=d(this.subscribersForHash,this);this.addSubscriber=d(this.addSubscriber,this);this.hasSubscription=d(this.hasSubscription,this);this.store=new a;this.subscribers={}}e.prototype.hasSubscription=function(a,b){return-1!==this.subscribersForHash(a).indexOf(b)};e.prototype.addSubscriber=function(a,b){return this.subscribersForHash(a).push(b)};e.prototype.subscribersForHash=function(a){var b;(b=this.subscribers)[a]||(b[a]=[]);return this.subscribers[a]};e.prototype.publish=function(a,b){this.store.has(a)||this.store.put(a,b);return this.emit(a)};e.prototype.subscribe=function(a,d){var e;this.hasSubscription(a,d)||this.addSubscriber(a,d);e=function(b){return function(){return b.unsubscribe(a,d)}}(this);b(function(b){return function(){if(b.store.has(a))return b.emit(a)}}(this));return e};e.prototype.unsubscribe=function(a,b){var d,e;e=this.subscribersForHash(a);d=e.indexOf(b);if(-1===d)return!1;e.splice(d,1);return!0};e.prototype.emit=function(a){var b,d,e,g,c,f;g=this.subscribersForHash(a);c=[];for(d=g.length-1;0<=d;d+=-1)e=g[d],f=this.store.get(a),e&&f?(b=f.error_code)?c.push(e.reject(b)):c.push(e.resolve(f)):c.push(void 0);return c};return e}();g=function(a){return e.extend({},m,a)};c=function(a){return function(b){var d,c,f,l,m;c=r(a+"---"+b.id+"---"+(b.site||"")+"---"+(b.exclScCit||"")+"---"+(b.numArtifacts||"")+"---"+(b.noStats||"")+"---"+(b.theme||""));delete b.widget;delete b.orientation;delete b.size;delete b.popup;delete b.badge;delete b.hideWhenEmpty;delete b.hideSocialmedia;delete b.hideCitations;delete b.hideCaptures;delete b.hideMentions;delete b.hideUsage;f=e.param(e.map(b,function(a,b){return{name:b,value:decodeURIComponent(a)}}));d=g({url:h.dataServiceUrl+"/"+a+"?"+f,dataType:"json"});b.isElsWidget&&(d.url=h.dataServiceUrlEl+"/"+a+"?"+f);l=window.__plumX.widgets.responses.store;b=e.Deferred();b.id=Math.random();f=!0;0!==l.subscribersForHash(c).length&&(f=!1);m=l.subscribe(c,b);b.always(m);f&&e.ajax(d).done(function(a,b,d){return l.publish(c,a)});return b}};p.withGlobalNS("__plumX.widgets.responses",function(a){return a.store=new f});q.exports={artifact:c("artifact"),researcher:c("researcher"),group:c("group"),grant:c("grant")}},{"./config":3,"./loader":7,"./md5":8,"./util":17}],14:[function(c,q,p){var h,m,l,f,a,b=function(a,b){return function(){return a.apply(b,arguments)}},e=[].indexOf||function(a){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===a)return b;return-1};l=function(a,b){var d,e,c,f,h;d={};e=0;for(f=a.length;e<f;e++)if(c=a[e],!b||!(!0===b.exclScCit&&"Scopus"===c.source))d[h=c.label]||(d[h]=0),c.count>d[c.label]&&(d[c.label]=c.count);return d};m=function(a){var b,d,e,c,f;b={};d=0;for(c=a.length;d<c;d++)e=a[d],b[f=e.label]||(b[f]=0),b[e.label]+=e.count;return b};a=function(a){var b;b={};b.count=a.count;a.link&&(b.link=a.link);b.source=a.source;b.label=function(){switch(!1){case"Blog"!==a.source:return"Blogs";case"Economics Blog"!==a.source:return"Economics Blogs";case"News"!==a.source:return"News";default:return b.label=a.source+" - "+a.label}}();return b};f=function(b){return a(b)};h=function(){function a(e){this._isEmpty=b(this._isEmpty,this);this._total=b(this._total,this);this.details=b(this.details,this);this.summary=b(this.summary,this);this.aggrCountsNoScopus=b(this.aggrCountsNoScopus,this);this.aggrCounts=b(this.aggrCounts,this);this.data=e;this.isEmpty=this._isEmpty()}a.prototype.aggrCounts=function(){var a,b,e,c,f,h,l,m;e={};m=this.data;for(a in m){h=m[a];c=b=0;for(l=h.length;c<l;c++)f=h[c],b+=f.count;e[a]=b}return e};a.prototype.aggrCountsNoScopus=function(){var a,b,e,c,f,h,l,m;e={};m=this.data;for(a in m){h=m[a];c=b=0;for(l=h.length;c<l;c++)f=h[c],"Scopus"!==f.source&&(b+=f.count);e[a]=b}return e};a.prototype.summary=function(a){var b,e,c,f;if(this.isEmpty)return{};f={};c=this.data;for(b in c)e=c[b],f[b]="Citations"===b?l(e,a):m(e);return f};a.prototype.details=function(a){var b,c,h,k,l,m,r,p,q,w,x,u,y,v,z;if(this.isEmpty)return{};h={};z=["Wikipedia","Twitter","Blog","Economics Blog","News"];u=this.data;for(c in u){p=u[c];h[c]=[];l=0;for(w=p.length;l<w;l++)if(r=p[l],!a||!(!0===a.exclScCit&&"Scopus"===r.source))if("Economics Blog Mentions"===r.label&&(r.source="Economics Blog"),y=r.source,0<=e.call(z,y)){k=!1;v=h[c];m=q=0;for(x=v.length;q<x;m=++q)b=v[m],b.source===r.source&&(k=!0,h[c][m].count+=r.count);!1===k&&h[c].push(f(r))}else h[c].push(f(r))}return h};a.prototype._total=function(){var a,b,e,c,f,h,l;l=0;h=this.data;for(a in h){c=h[a];b=0;for(f=c.length;b<f;b++)e=c[b],l+=e.count}return l};a.prototype._isEmpty=function(){return 0===this._total()};return a}();q.exports=function(a){return new h(a)}},{}],15:[function(c,q,p){q.exports={es:{"Abstract Views":"Vistas de Resumen",Abstract:"Resumen","Affiliated Researchers":"Investigadores Afiliados",Article:"Art\u00edculo","Artifact Summary":"Resumen Productos de Investigaci\u00f3n",Audio:"Audio",Bibliography:"Bibliography","Blog Mentions":"Menciones Blog","Blog Post":"Comentarios de Blog",Blog:"Blog",Blogs:"Blogs","Book Chapter":"Cap\u00edtulo de Libro",Book:"Libro",Bookmarks:"Marcadores",Brief:"Compendio",Captures:"Capturas",Case:"Caso",Catalogue:"Cat\u00e1logo","Citation Indexes":"\u00cdndice de Citas",Citations:"Citas",Clicks:"Clics","Clinical Citations":"Citas Cl\u00ednicas","Clinical Trial":"Ensayo Cl\u00ednico",Code:"C\u00f3digo",Collaborators:"Colaboradores",Collection:"Coleci\u00f3n",Comments:"Comentarios","Conference Paper":"Memorias de Congresos",Correction:"Correcci\u00f3n","Data Set":"Conjunto de Datos","Data Views":"Vistas Apoyadas","Design/Architecture":"Dise\u00f1o / Arquitectura",Downloads:"Descargas","Economic Blog Mentions":"Menciones Blogs Econ\u00f3micos","Economics Blog Mentions":"Menciones Blogs Econ\u00f3micos","Economics Blogs":"Menciones Blogs Econ\u00f3micos","Exhibition/Event":"Exhibici\u00f3n/Evento","Exhibition / Event":"Exhibici\u00f3n/Evento","Expert Opinion":"Opini\u00f3n de Experto","Exports-Saves":"Exportados / Guardados",Favorites:"Favoritos",Figure:"Cifra","File Set":"Conjunto de Archivos",Followers:"Seguidores",Forks:"Conexiones","Forum Topic Count":"Conteo Temas Foro","Full Text Views":"Vistas Txt Completo",Gists:"Conteo Esencial","Government Document":"Documento de Gobierno",Grant:"Beca",Guideline:"Gu\u00eda","HTML Views":"Vistas HTML",Holdings:"Acervo",Image:"Imagen",Interview:"Entrevista",Issue:"N\u00famero",Journal:"Publicaci\u00f3n",Letter:"Ensayo",Likes:"Me Gusta","Link-outs":"V\u00ednculos",Links:"Enlaces","Live Performance":"Presentaci\u00f3n en Vivo",Manuscript:"Manuscrito",Map:"Mapa",Media:"Medios",Mentions:"Menciones","Music Score":"Partitura Musical","News Mentions":"Menciones Noticias",News:"Noticias",Newsletter:"Bolet\u00edn Informativo","No metrics available.":"No hay m\u00e9tricas disponibles.","Online Course":"Curso en l\u00ednea",Other:"Otro","PDF Views":"Vistas PDF",Paper:"Documento de Trabajo","Patent Citations":"Citas de Patentes",Patent:"Patentes",Plays:"Reproducciones",Policy:"Pol\u00edticas","Policy Citations":"Citas de Pol\u00edticas",Poster:"Afiche",Preprint:"Preimpresi\u00f3n",PrePrint:"Preimpresi\u00f3n",Presentation:"Presentaci\u00f3n","Press Release":"Comunicado de Prensa",Project:"Proyecto",Ratings:"Clasificaci\u00f3n",Readers:"Lectores","Recent Artifacts":"Piezas de Investigaci\u00f3n Recientes",Recommendations:"Recomendaciones","Recorded Work":"Grabaci\u00f3n","Reference Entry":"Referencia",References:"Referencias",Report:"Informe",Researchers:"Investigadores",Retraction:"Retracci\u00f3n",Reviews:"Cr\u00edticas",Review:"Cr\u00edticas","Sample Downloads":"Descarga del Ejemplo",Scores:"Calificaci\u00f3n",Score:"Calificaci\u00f3n",Shares:"Compartir","Shares, Likes & Comments":"Compartidos, Me Gusta y Comentarios","Social Media":"Redes Sociales",Speech:"Discurso",Standard:"Est\u00e1ndar",Subscribers:"Subscriptores","Supporting Data Views":"Observaciones de Datos",Syllabus:"Plan de Estudios","Textual Work":"Escrito","Thesis / Dissertation":"Tesis / Disertaci\u00f3n",Tweets:"Tuits",Unknown:"Desconocido",Usage:"Uso",Video:"Video",Views:"Vistas","Visual Arts":"Artes Visuales",Volume:"Volumen",Watchers:"Observadores","Web Page":"P\u00e1gina Web","Web Resource":"Recurso Web","see details":"Ver detalles","Brochure / Pamphlet":"Folleto / Panfleto",Commentary:"Comentario",Editorial:"Editorial","Research Proposal":"Propuesta de Investigaci\u00f3n","Technical Documentation":"Documento T\u00e9cnico","Code / Software":"C\u00f3digo / Software","Lecture / Presentation":"Presentaci\u00f3n","Learning Object":"objetos de aprendizaje","Research Artifact":"Pieza Investigativa","PlumX Metrics Detail Page":"P\u00e1gina de detalle de PlumX Metrics",Emails:"Correos electr\u00f3nicos","ePub Downloads":"Descargas en ePub","Exports/Saves":"Exportaciones/Guardados",Exports:"Exportaciones",Saves:"Guardados","Figure Views":"Visualizaciones de im\u00e1genes","Forum Topics":"Temas de foro",Groups:"Grupos","PDF Downloads":"Descargas en PDF","Print-outs":"Copias impresas",Reference:"Referencia","Unique IP Views":"Visualizaciones IP \u00fanicas","XML Views":"Visualizaciones XML","Artifact Type":"Tipo de artefacto"},ru:{Abstract:"\u0410\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u044f","Abstract Views":"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u044b \u0430\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u0438","Affiliated Researchers":"\u0410\u0444\u0444\u0438\u043b\u0438\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0438\u0441\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u0438",Article:"\u0421\u0442\u0430\u0442\u044c\u044f","Artifact Summary":"\u041a\u0440\u0430\u0442\u043a\u0430\u044f \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0430 \u0430\u0440\u0442\u0435\u0444\u0430\u043a\u0442\u0430",Audio:"\u0410\u0443\u0434\u0438\u043e-\u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b",Bibliography:"\u0411\u0438\u0431\u043b\u0438\u043e\u0433\u0440\u0430\u0444\u0438\u044f",Blog:"\u0411\u043b\u043e\u0433",Blogs:"\u0411\u043b\u043e\u0433","Blog Mentions":"\u0423\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u044f \u0432 \u0431\u043b\u043e\u0433\u0430\u0445","Blog Post":"\u041f\u043e\u0441\u0442 \u0432 \u0431\u043b\u043e\u0433\u0435",Book:"\u041a\u043d\u0438\u0433\u0430","Book Chapter":"\u0413\u043b\u0430\u0432\u0430 \u043a\u043d\u0438\u0433\u0438",Bookmarks:"\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438",Brief:"\u041a\u0440\u0430\u0442\u043a\u043e","Brochure / Pamphlet":"\u041f\u0440\u043e\u0441\u043f\u0435\u043a\u0442 / \u0431\u0440\u043e\u0448\u044e\u0440\u0430",Captures:"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f",Case:"\u041e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u0441\u043b\u0443\u0447\u0430\u0439",Catalogue:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433","Citation Indexes":"\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0438 \u0446\u0438\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0439",Citations:"\u0426\u0438\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f",Clicks:"\u041d\u0430\u0436\u0430\u0442\u0438\u044f","Clinical Citations":"\u0426\u0438\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0432 \u043a\u043b\u0438\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0445","Clinical Trial":"\u041a\u043b\u0438\u043d\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0438\u0441\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u0435",Code:"\u041a\u043e\u0434","Code / Software":"\u041f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043d\u044b\u0439 \u043a\u043e\u0434",Collaborators:"\u041a\u043e\u043b\u043b\u0435\u0433\u0438",Collection:"\u041f\u043e\u0434\u0431\u043e\u0440\u043a\u0430",Commentary:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",Comments:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438","Conference Paper":"\u041d\u0430\u0443\u0447\u043d\u044b\u0439 \u0434\u043e\u043a\u043b\u0430\u0434",Correction:"\u0418\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435","Data Set":"\u041d\u0430\u0431\u043e\u0440 \u0434\u0430\u043d\u043d\u044b\u0445","Data Views":"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u044b \u0434\u0430\u043d\u043d\u044b\u0445","Design/Architecture":"\u0414\u0438\u0437\u0430\u0439\u043d / \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430",Downloads:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0438","Economic Blog Mentions":"\u0423\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u044f \u0432 \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0431\u043b\u043e\u0433\u0430\u0445","Economics Blog Mentions":"\u0423\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u044f \u0432 \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0431\u043b\u043e\u0433\u0430\u0445","Economics Blogs":"\u0423\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u044f \u0432 \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0431\u043b\u043e\u0433\u0430\u0445",Editorial:"\u0420\u0435\u0434\u0430\u043a\u0442\u043e\u0440\u0441\u043a\u0430\u044f \u0441\u0442\u0430\u0442\u044c\u044f","Exhibition/Event":"\u0421\u043e\u0431\u044b\u0442\u0438\u0435 / \u0432\u044b\u0441\u0442\u0430\u0432\u043a\u0430","Exhibition / Event":"\u0421\u043e\u0431\u044b\u0442\u0438\u0435 / \u0432\u044b\u0441\u0442\u0430\u0432\u043a\u0430","Expert Opinion":"\u041c\u043d\u0435\u043d\u0438\u0435 \u044d\u043a\u0441\u043f\u0435\u0440\u0442\u043e\u0432","Exports-Saves":"\u042d\u043a\u0441\u043f\u043e\u0440\u0442\u044b / \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f",Favorites:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435",Figure:"\u0420\u0438\u0441\u0443\u043d\u043e\u043a","File Set":"\u041d\u0430\u0431\u043e\u0440 \u0444\u0430\u0439\u043b\u043e\u0432",Followers:"\u041f\u043e\u0434\u043f\u0438\u0441\u0447\u0438\u043a\u0438",Forks:"\u041a\u043e\u043f\u0438\u0438 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f","Forum Topic Count":"\u0421\u0447\u0435\u0442\u0447\u0438\u043a \u0442\u0435\u043c \u0444\u043e\u0440\u0443\u043c\u0430","Full Text Views":"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u044b \u043f\u043e\u043b\u043d\u043e\u0433\u043e \u0442\u0435\u043a\u0441\u0442\u0430",Gists:"Gists","Government Document":"\u041f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442",Grant:"\u0413\u0440\u0430\u043d\u0442",Guideline:"\u0420\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e",Holdings:"\u0412 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430\u0445","HTML Views":"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u044b HTML",Image:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",Interview:"\u0418\u043d\u0442\u0435\u0440\u0432\u044c\u044e",Issue:"\u041d\u043e\u043c\u0435\u0440",Journal:"\u0416\u0443\u0440\u043d\u0430\u043b","Learning Object":"\u041e\u0431\u044a\u0435\u043a\u0442 \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f","Lecture / Presentation":"\u041b\u0435\u043a\u0446\u0438\u044f / \u043f\u0440\u0435\u0437\u0435\u043d\u0442\u0430\u0446\u0438\u044f",Letter:"\u041f\u0438\u0441\u044c\u043c\u043e",Likes:"\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f","Link-outs":"\u0421\u0441\u044b\u043b\u043a\u0438 \u043d\u0430 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b",Links:"\u0421\u0441\u044b\u043b\u043a\u0438","Live Performance":"\u0416\u0438\u0432\u043e\u0435 \u0432\u044b\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u0435",Manuscript:"\u0420\u0443\u043a\u043e\u043f\u0438\u0441\u044c",Map:"\u041a\u0430\u0440\u0442\u0430",Media:"\u0412\u0438\u0434\u0435\u043e-, \u0430\u0443\u0434\u0438\u043e",Mentions:"\u0423\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u044f","Music Score":"\u041c\u0443\u0437\u044b\u043a\u0430\u043b\u044c\u043d\u043e\u0435 \u0441\u043e\u043f\u0440\u043e\u0432\u043e\u0436\u0434\u0435\u043d\u0438\u0435",News:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438","News Mentions":"\u0423\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u044f \u0432 \u043d\u043e\u0432\u043e\u0441\u0442\u044f\u0445",Newsletter:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0435 \u043f\u0438\u0441\u044c\u043c\u043e","No metrics available.":"\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0445 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0435\u0439.","Online Course":"\u041a\u0443\u0440\u0441 \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u043d\u043b\u0430\u0439\u043d",Other:"\u0414\u0440\u0443\u0433\u043e\u0435",Paper:"\u0421\u0442\u0430\u0442\u044c\u044f",Patent:"\u041f\u0430\u0442\u0435\u043d\u0442","Patent Citations":"\u0426\u0438\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0432 \u043f\u0430\u0442\u0435\u043d\u0442\u0430\u0445","PDF Views":"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u044b PDF",Plays:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u044b \u043c\u0435\u0434\u0438\u0430",Policy:"\u041f\u043e\u043b\u0438\u0441","Policy Citations":"\u0426\u0438\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0432 \u043f\u043e\u043b\u0438\u0441\u0430\u0445",Poster:"\u041f\u043e\u0441\u0442\u0435\u0440",Preprint:"\u041f\u0440\u0435\u043f\u0440\u0438\u043d\u0442",PrePrint:"\u041f\u0440\u0435\u043f\u0440\u0438\u043d\u0442",Presentation:"\u041f\u0440\u0435\u0437\u0435\u043d\u0442\u0430\u0446\u0438\u044f","Press Release":"\u041f\u0440\u0435\u0441\u0441-\u0440\u0435\u043b\u0438\u0437",Project:"\u041f\u0440\u043e\u0435\u043a\u0442",Ratings:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433",Readers:"\u0427\u0438\u0442\u0430\u0442\u0435\u043b\u0438","Recent Artifacts":"\u041d\u0435\u0434\u0430\u0432\u043d\u0438\u0435 \u0430\u0440\u0442\u0435\u0444\u0430\u043a\u0442\u044b",Recommendations:"\u00ab\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u044e\u00bb","Recorded Work":"\u0417\u0430\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0435 \u0440\u0430\u0431\u043e\u0442\u044b","Reference Entry":"\u0421\u0441\u044b\u043b\u043a\u0430",Report:"\u041e\u0442\u0447\u0435\u0442","Research Artifact":"\u0418\u0441\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u044c \u0430\u0440\u0442\u0435\u0444\u0430\u043a\u0442","Research Proposal":"\u041f\u043b\u0430\u043d \u0438\u0441\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u044f",Researchers:"\u0418\u0441\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u0438",Retraction:"\u041e\u043f\u0440\u043e\u0432\u0435\u0440\u0436\u0435\u043d\u0438\u0435",Reviews:"\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u0438",Review:"\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u0438","Sample Downloads":"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043e\u0431\u0440\u0430\u0437\u0446\u043e\u0432",Scores:"\u0411\u0430\u043b\u043b\u044b",Score:"\u0411\u0430\u043b\u043b\u044b","see details":"\u0441\u043c. \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435",Shares:"\u041f\u043e\u0434\u0435\u043b\u0438\u043b\u0438\u0441\u044c","Shares, Likes & Comments":"\u041f\u043e\u0434\u0435\u043b\u0438\u043b\u0438\u0441\u044c, \u00ab\u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f\u00bb \u0438\u00a0\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438","Social Media":"\u0421\u043e\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u0435\u0442\u0438",Speech:"\u0412\u044b\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u0435",Standard:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442",Subscribers:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438","Supporting Data Views":"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u044b \u043e\u0431\u043e\u0441\u043d\u043e\u0432\u044b\u0432\u0430\u044e\u0449\u0438\u0445 \u0434\u0430\u043d\u043d\u044b\u0445",Syllabus:"\u041f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430 \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f","Technical Documentation":"\u0422\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f","Textual Work":"\u0420\u0435\u0444\u0435\u0440\u0430\u0442","Thesis / Dissertation":"\u0422\u0435\u0437\u0438\u0441\u044b / \u0434\u0438\u0441\u0441\u0435\u0440\u0442\u0430\u0446\u0438\u043e\u043d\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430",Tweets:"\u0422\u0432\u0438\u0442\u044b",Unknown:"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e",Usage:"\u0421\u0442\u0435\u043f\u0435\u043d\u044c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f",Video:"\u0412\u0438\u0434\u0435\u043e-\u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b",Views:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u044b","Visual Arts":"\u0418\u0437\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0438\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u043e",Volume:"\u0422\u043e\u043c",Watchers:"\u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435\u043b\u0438","Web Page":"\u0412\u0435\u0431-\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430","Web Resource":"\u0412\u0435\u0431-\u0440\u0435\u0441\u0443\u0440\u0441","PlumX Metrics Detail Page":"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u044b\u0445 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0435\u0439 PlumX","Artifact Type":"\u0422\u0438\u043f \u0430\u0440\u0442\u0435\u0444\u0430\u043a\u0442\u0430",Emails:"\u042d\u043b. \u043f\u0438\u0441\u044c\u043c\u0430","ePub Downloads":"\u0421\u043a\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u044f ePub","Exports/Saves":"\u042d\u043a\u0441\u043f\u043e\u0440\u0442\u044b / \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f",Exports:"\u042d\u043a\u0441\u043f\u043e\u0440\u0442\u044b",Saves:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f","Figure Views":"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u044b \u0440\u0438\u0441\u0443\u043d\u043a\u043e\u0432","Forum Topics":"\u0422\u0435\u043c\u044b \u0444\u043e\u0440\u0443\u043c\u043e\u0432",Groups:"\u0413\u0440\u0443\u043f\u043f\u044b","PDF Downloads":"\u0421\u043a\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u044f PDF","Print-outs":"\u0420\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u044b\u0432\u0430\u043d\u0438\u044f",Reference:"\u0418\u0441\u0442\u043e\u0447\u043d\u0438\u043a",References:"\u041f\u0440\u0438\u0441\u0442\u0430\u0442\u0435\u0439\u043d\u044b\u0435 \u0441\u0441\u044b\u043b\u043a\u0438","Unique IP Views":"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u044b \u0441 \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u043e\u0433\u043e IP-\u0430\u0434\u0440\u0435\u0441\u0430","XML Views":"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u044b XML"},jp:{Abstract:"\u6284\u9332","Abstract Views":"\u6284\u9332\u8868\u793a","Affiliated Researchers":"\u6240\u5c5e\u7814\u7a76\u8005",Article:"\u539f\u8457\u8ad6\u6587","Artifact Summary":"\u30a2\u30fc\u30c6\u30a3\u30d5\u30a1\u30af\u30c8\u306e\u8981\u65e8",Audio:"\u30aa\u30fc\u30c7\u30a3\u30aa",Bibliography:"\u6587\u732e\u76ee\u9332",Blog:"\u30d6\u30ed\u30b0",Blogs:"\u30d6\u30ed\u30b0","Blog Mentions":"\u30d6\u30ed\u30b0\u306e\u8a00\u53ca","Blog Post":"\u30d6\u30ed\u30b0\u8a18\u4e8b",Book:"\u66f8\u7c4d","Book Chapter":"\u66f8\u7c4d\u306e\u7ae0",Bookmarks:"\u30d6\u30c3\u30af\u30de\u30fc\u30af",Brief:"\u8981\u7d04","Brochure / Pamphlet":"\u30d1\u30f3\u30d5\u30ec\u30c3\u30c8",Captures:"\u30ad\u30e3\u30d7\u30c1\u30e3",Case:"\u4e8b\u4f8b",Catalogue:"\u30ab\u30bf\u30ed\u30b0","Citation Indexes":"\u88ab\u5f15\u7528\u6570",Citations:"\u88ab\u5f15\u7528\u6570",Clicks:"\u30af\u30ea\u30c3\u30af","Clinical Citations":"\u81e8\u5e8a\u88ab\u5f15\u7528\u6570","Clinical Trial":"\u81e8\u5e8a\u8a66\u9a13",Code:"\u30b3\u30fc\u30c9","Code / Software":"\u30b3\u30fc\u30c9/\u30bd\u30d5\u30c8\u30a6\u30a8\u30a2",Collaborators:"\u5171\u540c\u7814\u7a76\u8005",Collection:"\u30b3\u30ec\u30af\u30b7\u30e7\u30f3",Commentary:"\u8ad6\u8a55\u89e3\u8aac",Comments:"\u30b3\u30e1\u30f3\u30c8","Conference Paper":"\u4f1a\u8b70\u8ad6\u6587",Correction:"\u8a02\u6b63","Data Set":"\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8","Data Views":"\u30c7\u30fc\u30bf\u8868\u793a","Design/Architecture":"\u30c7\u30b6\u30a4\u30f3/\u5efa\u7bc9",Downloads:"\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9","Economic Blog Mentions":"\u7d4c\u6e08\u95a2\u9023\u30d6\u30ed\u30b0\u306e\u8a00\u53ca","Economics Blog Mentions":"\u7d4c\u6e08\u95a2\u9023\u30d6\u30ed\u30b0\u306e\u8a00\u53ca","Economics Blogs":"\u7d4c\u6e08\u95a2\u9023\u30d6\u30ed\u30b0\u306e\u8a00\u53ca",Editorial:"\u8ad6\u8aac","Exhibition/Event":"\u5c55\u793a/\u30a4\u30d9\u30f3\u30c8","Exhibition / Event":"\u5c55\u793a/\u30a4\u30d9\u30f3\u30c8","Expert Opinion":"\u5c02\u9580\u5bb6\u306e\u610f\u898b","Exports-Saves":"\u30a8\u30af\u30b9\u30dd\u30fc\u30c8/\u4fdd\u5b58",Favorites:"\u304a\u6c17\u306b\u5165\u308a",Figure:"\u56f3","File Set":"\u30d5\u30a1\u30a4\u30eb\u30bb\u30c3\u30c8",Followers:"\u30d5\u30a9\u30ed\u30a2\u30fc",Forks:"\u30d5\u30a9\u30fc\u30af","Forum Topic Count":"\u30d5\u30a9\u30fc\u30e9\u30e0\u30c8\u30d4\u30c3\u30af\u6570","Full Text Views":"\u30d5\u30eb\u30c6\u30ad\u30b9\u30c8\u8868\u793a",Gists:"\u30ae\u30b9\u30c8","Government Document":"\u516c\u6587\u66f8",Grant:"\u52a9\u6210",Guideline:"\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3",Holdings:"\u6240\u8535","HTML Views":"HTML\u8868\u793a",Image:"\u753b\u50cf",Interview:"\u30a4\u30f3\u30bf\u30d3\u30e5\u30fc",Issue:"\u53f7",Journal:"\u30b8\u30e3\u30fc\u30ca\u30eb","Learning Object":"\u30e9\u30fc\u30cb\u30f3\u30b0\u30aa\u30d6\u30b8\u30a7\u30af\u30c8","Lecture / Presentation":"\u8b1b\u7fa9/\u30d7\u30ec\u30bc\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3",Letter:"\u7de8\u96c6\u8005\u3078\u306e\u624b\u7d19",Likes:"\u3044\u3044\u306d","Link-outs":"\u30ea\u30f3\u30af\u30a2\u30a6\u30c8",Links:"\u30ea\u30f3\u30af","Live Performance":"\u5b9f\u6f14",Manuscript:"\u539f\u7a3f",Map:"\u5730\u56f3",Media:"\u30e1\u30c7\u30a3\u30a2",Mentions:"\u8a00\u53ca","Music Score":"\u8b5c\u9762",News:"\u30cb\u30e5\u30fc\u30b9","News Mentions":"\u30cb\u30e5\u30fc\u30b9\u306e\u8a00\u53ca",Newsletter:"\u30cb\u30e5\u30fc\u30b9\u30ec\u30bf\u30fc","No metrics available.":"\u8a72\u5f53\u3059\u308b\u6307\u6a19\u304c\u3042\u308a\u307e\u305b\u3093\u3002","Online Course":"\u30aa\u30f3\u30e9\u30a4\u30f3\u8b1b\u5ea7",Other:"\u305d\u306e\u4ed6",Paper:"\u66f8\u985e",Patent:"\u7279\u8a31","Patent Citations":"\u7279\u8a31\u88ab\u5f15\u7528\u6570","PDF Views":"PDF\u8868\u793a",Plays:"\u518d\u751f",Policy:"\u30dd\u30ea\u30b7\u30fc","Policy Citations":"\u30dd\u30ea\u30b7\u30fc\u88ab\u5f15\u7528\u6570",Poster:"\u30dd\u30b9\u30bf\u30fc",Preprint:"\u30d7\u30ec\u30d7\u30ea\u30f3\u30c8",PrePrint:"\u30d7\u30ec\u30d7\u30ea\u30f3\u30c8",Presentation:"\u30d7\u30ec\u30bc\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3","Press Release":"\u30d7\u30ec\u30b9\u30ea\u30ea\u30fc\u30b9",Project:"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8",Ratings:"\u8a55\u4fa1",Readers:"\u8aad\u8005","Recent Artifacts":"\u8fd1\u4ee3\u306e\u30a2\u30fc\u30c6\u30a3\u30d5\u30a1\u30af\u30c8",Recommendations:"\u63a8\u85a6","Recorded Work":"\u7814\u7a76\u8a18\u9332","Reference Entry":"\u53c2\u8003\u4e8b\u9805",References:"\u53c2\u8003\u6587\u732e",Report:"\u30ec\u30dd\u30fc\u30c8","Research Artifact":"\u7814\u7a76\u5bfe\u8c61\u30a2\u30fc\u30c6\u30a3\u30d5\u30a1\u30af\u30c8","Research Proposal":"\u7814\u7a76\u4f01\u753b",Researchers:"\u7814\u7a76\u8005",Retraction:"\u53d6\u6d88\u3057",Reviews:"\u30ec\u30d3\u30e5\u30fc\u8ad6\u6587",Review:"\u30ec\u30d3\u30e5\u30fc\u8ad6\u6587","Sample Downloads":"\u30b5\u30f3\u30d7\u30eb\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9",Scores:"\u30b9\u30b3\u30a2",Score:"\u30b9\u30b3\u30a2","see details":"\u8a73\u7d30\u3092\u53c2\u7167",Shares:"\u5171\u6709","Shares, Likes & Comments":"\u30b7\u30a7\u30a2\u3001\u3044\u3044\u306d\u3001\u00a0\u30b3\u30e1\u30f3\u30c8","Social Media":"\u30bd\u30fc\u30b7\u30e3\u30eb\u30e1\u30c7\u30a3\u30a2",Speech:"\u30b9\u30d4\u30fc\u30c1",Standard:"\u57fa\u6e96",Subscribers:"\u8cfc\u8aad\u8005","Supporting Data Views":"\u6dfb\u4ed8\u8cc7\u6599\u8868\u793a",Syllabus:"\u30b7\u30e9\u30d0\u30b9","Technical Documentation":"\u6280\u8853\u6587\u66f8","Textual Work":"\u539f\u6587\u66f8\u985e","Thesis / Dissertation":"\u5b66\u4f4d\u8ad6\u6587",Tweets:"\u30c4\u30a4\u30fc\u30c8",Unknown:"\u4e0d\u660e",Usage:"\u5229\u7528",Video:"\u6620\u50cf",Views:"\u8868\u793a","Visual Arts":"\u8996\u899a\u82b8\u8853",Volume:"\u5dfb",Watchers:"\u30a6\u30a9\u30c3\u30c1\u30e3\u30fc","Web Page":"\u30a6\u30a7\u30d6\u30da\u30fc\u30b8","Web Resource":"\u30a6\u30a7\u30d6\u8cc7\u6e90","PlumX Metrics Detail Page":"PlumX\u6307\u6a19\u8a73\u7d30\u30da\u30fc\u30b8","Artifact Type":"\u30a2\u30fc\u30c6\u30a3\u30d5\u30a1\u30af\u30c8\u30bf\u30a4\u30d7",Emails:"E-mail","ePub Downloads":"ePub\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9","Exports/Saves":"\u30a8\u30ad\u30b9\u30dd\u30fc\u30c8/\u4fdd\u5b58",Exports:"\u30a8\u30ad\u30b9\u30dd\u30fc\u30c8",Saves:"\u4fdd\u5b58","Figure Views":"\u56f3\u8868\u793a","Forum Topics":"\u30d5\u30a9\u30fc\u30e9\u30e0\u30c8\u30d4\u30c3\u30af",Groups:"\u30b0\u30eb\u30fc\u30d7","PDF Downloads":"PDF\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9","Print-outs":"\u30d7\u30ea\u30f3\u30c8\u30a2\u30a6\u30c8",Reference:"\u53c2\u8003\u6587\u732e","Unique IP Views":"\u56fa\u6709IP\u8868\u793a","XML Views":"XML\u8868\u793a"},cn:{Abstract:"\u6458\u8981","Abstract Views":"\u6458\u8981\u6d4f\u89c8\u6b21\u6570","Affiliated Researchers":"\u9644\u5c5e\u7814\u7a76\u4eba\u5458",Article:"\u6587\u7ae0","Artifact Summary":"\u4eba\u5de5\u5236\u54c1\u6982\u8ff0",Audio:"\u97f3\u9891",Bibliography:"\u53c2\u8003\u4e66\u76ee",Blog:"\u535a\u5ba2",Blogs:"\u535a\u5ba2","Blog Mentions":"\u535a\u5ba2\u63d0\u8ff0","Blog Post":"\u535a\u5ba2\u6587\u7ae0",Book:"\u4e66\u7c4d","Book Chapter":"\u4e66\u7c4d\u7ae0\u8282",Bookmarks:"\u4e66\u7b7e",Brief:"\u6982\u8981","Brochure / Pamphlet":"\u5ba3\u4f20\u518c/\u5c0f\u518c\u5b50",Captures:"\u6355\u83b7",Case:"\u6848\u4f8b",Catalogue:"\u76ee\u5f55","Citation Indexes":"\u5f15\u7528\u7d22\u5f15",Citations:"\u5f15\u6587",Clicks:"\u70b9\u51fb\u91cf","Clinical Citations":"\u4e34\u5e8a\u5f15\u7528","Clinical Trial":"\u4e34\u5e8a\u8bd5\u9a8c",Code:"\u4ee3\u7801","Code / Software":"\u4ee3\u7801/\u8f6f\u4ef6",Collaborators:"\u5408\u4f5c\u8005",Collection:"\u96c6\u5408",Commentary:"\u6ce8\u91ca",Comments:"\u8bc4\u8bba","Conference Paper":"\u4f1a\u8bae\u6587\u4ef6",Correction:"\u4fee\u6b63","Data Set":"\u6570\u636e\u96c6","Data Views":"\u6570\u636e\u89c6\u56fe","Design/Architecture":"\u8bbe\u8ba1/\u67b6\u6784",Downloads:"\u4e0b\u8f7d\u91cf","Economic Blog Mentions":"\u7ecf\u6d4e\u535a\u5ba2\u63d0\u8ff0","Economics Blog Mentions":"\u7ecf\u6d4e\u535a\u5ba2\u63d0\u8ff0","Economics Blogs":"\u7ecf\u6d4e\u535a\u5ba2\u63d0\u8ff0",Editorial:"\u793e\u8bba","Exhibition/Event":"\u5c55\u89c8/\u4e8b\u4ef6","Exhibition / Event":"\u5c55\u89c8/\u4e8b\u4ef6","Expert Opinion":"\u4e13\u5bb6\u610f\u89c1","Exports-Saves":"\u5bfc\u51fa/\u4fdd\u5b58",Favorites:"\u6536\u85cf",Figure:"\u56fe\u5f62","File Set":"\u6587\u4ef6\u96c6",Followers:"\u7c89\u4e1d",Forks:"\u590d\u5236\u5e93","Forum Topic Count":"\u8bba\u575b\u8bdd\u9898\u8ba1\u6570","Full Text Views":"\u5168\u6587\u6d4f\u89c8\u6b21\u6570",Gists:"Gist","Government Document":"\u653f\u5e9c\u6587\u4ef6",Grant:"\u62e8\u6b3e",Guideline:"\u6307\u5357",Holdings:"\u4fdd\u5b58\u6570","HTML Views":"HTML \u6d4f\u89c8\u6b21\u6570",Image:"\u56fe\u50cf",Interview:"\u8bbf\u8c08",Issue:"\u671f",Journal:"\u671f\u520a","Learning Object":"\u5b66\u4e60\u5bf9\u8c61","Lecture / Presentation":"\u8bb2\u5ea7/\u5c55\u793a",Letter:"\u4fe1\u4ef6",Likes:"\u70b9\u8d5e","Link-outs":"\u5916\u90e8\u94fe\u63a5",Links:"\u94fe\u63a5","Live Performance":"\u5b9e\u51b5\u6f14\u51fa",Manuscript:"\u624b\u7a3f",Map:"\u5730\u56fe",Media:"\u5a92\u4f53",Mentions:"\u63d0\u8ff0","Music Score":"\u4e50\u8c31",News:"\u65b0\u95fb","News Mentions":"\u65b0\u95fb\u63d0\u8ff0",Newsletter:"\u7b80\u8baf","No metrics available.":"\u6ca1\u6709\u53ef\u7528\u7684\u6307\u6807\u3002","Online Course":"\u5728\u7ebf\u8bfe\u7a0b",Other:"\u5176\u4ed6",Paper:"\u8bba\u6587",Patent:"\u4e13\u5229","Patent Citations":"\u4e13\u5229\u5f15\u7528","PDF Views":"PDF \u6d4f\u89c8\u6b21\u6570",Plays:"\u64ad\u653e\u6b21\u6570",Policy:"\u653f\u7b56","Policy Citations":"\u653f\u7b56\u5f15\u7528",Poster:"\u6d77\u62a5",Preprint:"\u9884\u5370\u4ef6",PrePrint:"\u9884\u5370\u4ef6",Presentation:"\u5c55\u793a","Press Release":"\u65b0\u95fb\u7a3f",Project:"\u9879\u76ee",Ratings:"\u8bc4\u5206",Readers:"\u8bfb\u8005","Recent Artifacts":"\u6700\u8fd1\u7684\u4eba\u5de5\u5236\u54c1",Recommendations:"\u63a8\u8350","Recorded Work":"\u8bb0\u5f55\u7684\u5de5\u4f5c","Reference Entry":"\u53c2\u8003\u6761\u76ee",References:"\u53c2\u8003\u6587\u732e",Report:"\u62a5\u544a","Research Artifact":"\u7814\u7a76\u4eba\u5de5\u5236\u54c1","Research Proposal":"\u7814\u7a76\u8ba1\u5212",Researchers:"\u7814\u7a76\u4eba\u5458",Retraction:"\u64a4\u9500",Review:"\u8bc4\u8bba",Reviews:"\u8bc4\u8bba","Sample Downloads":"\u6837\u672c\u4e0b\u8f7d\u6b21\u6570",Scores:"\u5f97\u5206",Score:"\u5f97\u5206","see details":"\u67e5\u770b\u8be6\u60c5",Shares:"\u5206\u4eab","Shares, Likes & Comments":"\u5206\u4eab\u3001\u70b9\u8d5e\u53ca\u00a0\u8bc4\u8bba","Social Media":"\u793e\u4ea4\u5a92\u4f53",Speech:"\u6f14\u8bb2",Standard:"\u6807\u51c6",Subscribers:"\u6ce8\u518c\u7528\u6237","Supporting Data Views":"\u652f\u6301\u6570\u636e\u6d4f\u89c8\u6b21\u6570",Syllabus:"\u6559\u5b66\u5927\u7eb2","Technical Documentation":"\u6280\u672f\u6587\u6863","Textual Work":"\u6587\u5b57\u4f5c\u54c1","Thesis / Dissertation":"\u8bba\u6587/\u5b66\u4f4d\u8bba\u6587",Tweets:"\u63a8\u6587",Unknown:"\u672a\u77e5",Usage:"\u4f7f\u7528",Video:"\u89c6\u9891",Views:"\u6d4f\u89c8\u6b21\u6570","Visual Arts":"\u89c6\u89c9\u827a\u672f",Volume:"\u5377",Watchers:"\u89c2\u5bdf\u8005","Web Page":"\u7f51\u9875","Web Resource":"\u7f51\u7edc\u8d44\u6e90","PlumX Metrics Detail Page":"PlumX \u6307\u6807\u8be6\u7ec6\u4fe1\u606f\u9875\u9762","Artifact Type":"\u4eba\u5de5\u5236\u54c1\u7c7b\u578b",Emails:"\u7535\u5b50\u90ae\u4ef6","ePub Downloads":"ePub \u4e0b\u8f7d","Exports/Saves":"\u5bfc\u51fa/\u4fdd\u5b58",Exports:"\u5bfc\u51fa",Saves:"\u4fdd\u5b58","Figure Views":"\u56fe\u7247\u89c6\u56fe","Forum Topics":"\u8bba\u575b\u4e3b\u9898",Groups:"\u5206\u7ec4","PDF Downloads":"PDF \u4e0b\u8f7d","Print-outs":"\u6253\u5370\u8f93\u51fa",Reference:"\u53c2\u8003\u6587\u732e","Unique IP Views":"\u552f\u4e00 IP \u89c6\u56fe","XML Views":"XML \u89c6\u56fe"},tw:{Abstract:"\u6458\u8981","Abstract Views":"\u6458\u8981\u6aa2\u8996","Affiliated Researchers":"\u5de5\u85dd\u54c1\u7814\u7a76\u4eba\u54e1",Article:"\u6587\u7ae0","Artifact Summary":"\u5de5\u85dd\u54c1\u6458\u8981",Audio:"\u97f3\u8a0a",Bibliography:"\u53c3\u8003\u66f8\u76ee",Blog:"\u90e8\u843d\u683c",Blogs:"\u90e8\u843d\u683c","Blog Mentions":"\u90e8\u843d\u683c\u63d0\u53ca\u6b21\u6578","Blog Post":"\u90e8\u843d\u683c\u8cbc\u6587",Book:"\u66f8\u7c4d","Book Chapter":"\u66f8\u7c4d\u7ae0\u7bc0",Bookmarks:"\u66f8\u7c64",Brief:"\u7c21\u4ecb","Brochure / Pamphlet":"\u624b\u518a/\u5c0f\u624b\u518a",Captures:"\u64f7\u53d6\u6b21\u6578",Case:"\u6848\u4f8b",Catalogue:"\u76ee\u9304","Citation Indexes":"\u5f15\u7528\u7d22\u5f15",Citations:"\u5f15\u7528\u60c5\u6cc1",Clicks:"\u9ede\u64ca\u6b21\u6578","Clinical Citations":"\u81e8\u5e8a\u5f15\u7528\u6b21\u6578","Clinical Trial":"\u81e8\u5e8a\u8a66\u9a57",Code:"\u4ee3\u78bc","Code / Software":"\u7a0b\u5f0f\u78bc/\u8edf\u9ad4",Collaborators:"\u5408\u4f5c\u8005",Collection:"\u96c6\u5408",Commentary:"\u8a55\u8ad6",Comments:"\u8a55\u8ad6","Conference Paper":"\u7814\u8a0e\u6703\u8ad6\u6587",Correction:"\u4fee\u6b63","Data Set":"\u8cc7\u6599\u96c6","Data Views":"\u8cc7\u6599\u6aa2\u8996","Design/Architecture":"\u8a2d\u8a08/\u67b6\u69cb",Downloads:"\u4e0b\u8f09\u6b21\u6578","Economic Blog Mentions":"\u7d93\u6fdf\u90e8\u843d\u683c\u63d0\u53ca\u6b21\u6578","Economics Blog Mentions":"\u7d93\u6fdf\u90e8\u843d\u683c\u63d0\u53ca\u6b21\u6578","Economics Blogs":"\u7d93\u6fdf\u90e8\u843d\u683c\u63d0\u53ca\u6b21\u6578",Editorial:"\u7de8\u8f2f","Exhibition/Event":"\u5c55\u89bd/\u6d3b\u52d5","Exhibition / Event":"\u5c55\u89bd/\u6d3b\u52d5","Expert Opinion":"\u5c08\u5bb6\u610f\u898b","Exports-Saves":"\u532f\u51fa/\u5132\u5b58",Favorites:"\u6211\u7684\u6700\u611b",Figure:"\u6578\u5b57","File Set":"\u6a94\u6848\u96c6\u5408",Followers:"\u8ffd\u8e64\u8005",Forks:"Fork","Forum Topic Count":"\u8ad6\u58c7\u4e3b\u984c\u8a08\u6578","Full Text Views":"\u5168\u6587\u6aa2\u8996",Gists:"Gists","Government Document":"\u653f\u5e9c\u6587\u4ef6",Grant:"\u88dc\u52a9\u91d1",Guideline:"\u6307\u5357",Holdings:"\u5305\u542b\u5167\u5bb9","HTML Views":"HTML \u6aa2\u8996",Image:"\u5716\u50cf",Interview:"\u8a2a\u8ac7",Issue:"\u554f\u984c",Journal:"\u65e5\u8a8c","Learning Object":"\u5b78\u7fd2\u76ee\u6a19","Lecture / Presentation":"\u6f14\u8b1b/\u7c21\u5831",Letter:"\u4fe1\u51fd",Likes:"\u8b9a","Link-outs":"\u5c0d\u5916\u9023\u7d50",Links:"\u9023\u7d50","Live Performance":"\u73fe\u5834\u8868\u73fe",Manuscript:"\u624b\u7a3f",Map:"\u5730\u5716",Media:"\u5a92\u9ad4",Mentions:"\u63d0\u53ca\u6b21\u6578","Music Score":"\u6a02\u8b5c",News:"\u65b0\u805e","News Mentions":"\u65b0\u805e\u63d0\u53ca\u6b21\u6578",Newsletter:"\u65b0\u805e\u7c21\u8a0a","No metrics available.":"\u6c92\u6709\u53ef\u7528\u7684\u6e2c\u91cf\u6307\u6a19\u3002","Online Course":"\u7dda\u4e0a\u8ab2\u7a0b",Other:"\u5176\u4ed6",Paper:"\u66f8\u9762",Patent:"\u5c08\u5229","Patent Citations":"\u5c08\u5229\u5f15\u7528\u6b21\u6578","PDF Views":"PDF \u6aa2\u8996",Plays:"\u64ad\u653e\u6b21\u6578",Policy:"\u653f\u7b56","Policy Citations":"\u653f\u7b56\u5f15\u7528\u6b21\u6578",Poster:"\u6d77\u5831",Preprint:"\u9810\u5370\u672c",PrePrint:"\u9810\u5370\u672c",Presentation:"\u7c21\u5831","Press Release":"\u65b0\u805e\u7a3f",Project:"\u5c08\u6848",Ratings:"\u8a55\u7d1a",Readers:"\u8b80\u8005","Recent Artifacts":"\u6700\u8fd1\u7684\u5de5\u85dd\u54c1",Recommendations:"\u63a8\u85a6","Recorded Work":"\u8a18\u9304\u7684\u5de5\u4f5c","Reference Entry":"\u53c3\u8003\u9805\u76ee",References:"\u53c2\u8003\u6587\u732e",Report:"\u5831\u544a","Research Artifact":"\u7814\u7a76\u5de5\u85dd\u54c1","Research Proposal":"\u7814\u7a76\u63d0\u6848",Researchers:"\u7814\u7a76\u4eba\u54e1",Retraction:"\u64a4\u56de",Reviews:"\u8a55\u8ad6",Review:"\u8a55\u8ad6","Sample Downloads":"\u7bc4\u4f8b\u4e0b\u8f09",Scores:"\u5206\u6578",Score:"\u5206\u6578","see details":"\u8acb\u53c3\u95b1\u8a73\u7d30\u8cc7\u6599",Shares:"\u5206\u4eab","Shares, Likes & Comments":"\u5206\u4eab\u3001\u8b9a &\u00a0\u8a55\u8ad6","Social Media":"\u793e\u4ea4\u5a92\u9ad4",Speech:"\u6f14\u8b1b",Standard:"\u6a19\u6e96",Subscribers:"\u8a02\u95b1\u8005","Supporting Data Views":"\u4f50\u8b49\u8cc7\u6599\u6aa2\u8996",Syllabus:"\u5927\u7db1","Technical Documentation":"\u6280\u8853\u6587\u4ef6","Textual Work":"\u6587\u5b57\u5de5\u4f5c","Thesis / Dissertation":"\u547d\u984c/\u8ad6\u6587",Tweets:"\u63a8\u6587",Unknown:"\u672a\u77e5\u7684",Usage:"\u4f7f\u7528\u91cf",Video:"\u8996\u8a0a",Views:"\u6aa2\u8996","Visual Arts":"\u8996\u89ba\u85dd\u8853",Volume:"\u97f3\u91cf",Watchers:"\u89c0\u5bdf\u8005","Web Page":"\u7db2\u9801","Web Resource":"\u7db2\u9801\u8cc7\u6e90","PlumX Metrics Detail Page":"PlumX \u6e2c\u91cf\u6307\u6a19\u8a73\u7d30\u8cc7\u6599\u9801\u9762","Artifact Type":"\u624b\u5de5\u85dd\u54c1\u985e\u578b",Emails:"\u96fb\u5b50\u90f5\u7bb1","ePub Downloads":"ePub \u4e0b\u8f09","Exports/Saves":"\u532f\u51fa/\u5132\u5b58",Exports:"\u532f\u51fa",Saves:"\u5132\u5b58","Figure Views":"\u5716\u6848\u6aa2\u8996","Forum Topics":"\u8ad6\u58c7\u4e3b\u984c",Groups:"\u7fa4\u7d44","PDF Downloads":"PDF \u4e0b\u8f09","Print-outs":"\u5217\u5370",Reference:"\u53c3\u8003\u6587\u737b","Unique IP Views":"\u7279\u6709\u7684 IP \u6aa2\u8996","XML Views":"XML \u6aa2\u8996"}}},{}],16:[function(c,q,p){var h,m;m=c("./stringLibrary");h="en";c=function(){function c(f,a){this.language=null!=f?f:h;this.options=null!=a?a:{};this.stringLib=m;this.notDefaultLanguage=this.language!==h;this.stringLib.hasOwnProperty(h)||(this.stringLib[h]={});this}c.prototype.translate=function(c){return!this.notDefaultLanguage?c:this.dictionary().hasOwnProperty(c)&&this.dictionary()[c].length?this.dictionary()[c]:c};c.prototype.dictionary=function(){return this.stringLib.hasOwnProperty(this.language)?this.stringLib[this.language]:this.stringLib[h]};return c}();q.exports=c},{"./stringLibrary":15}],17:[function(c,q,p){var h,m,l,f;f=c("./loader").whenReady(function(a){return f=a});m=function(a){a=a.split("&");a=f.map(a,function(a){return[a.split("=",2)]});a=f.grep(a,function(a){return"ebsco-client"!==a[0]});a=a[0];return{type:a[0],id:a[1]}};l=function(a){a=a.split("/");return{type:"plumx_id",id:a[a.length-1]}};h={globalNS:function(a,b){var e,c,f,d,h;e=window;h=a.split(".");c=0;for(f=h.length;c<f;c++)d=h[c],e[d]||(e[d]={}),e=e[d];b&&b(e);return e},hasGlobalNS:function(a){var b,e,c,f;b=window;f=a.split(".");a=0;for(e=f.length;a<e;a++)if(c=f[a],c in b)b=b[c];else return!1;return!0},withGlobalNS:function(a,b){return h.hasGlobalNS(a)?!1:h.globalNS(a,b)},camelize:function(a){a=a.split(" ");a[0]=a[0].toLowerCase();return h.singularize(a.join(""))},singularize:function(a){return a.replace(/s$/,"")},camelizeKeys:function(a){var b,e,c,f;e={};for(b in a)f=a[b],c=h.singularize(h.camelize(b)),e[c]=f;return e},shortenKeys:function(a){var b,e,c;e={};for(b in a)c=a[b],e[b.substr(0,2)]=c;return e},chunk:function(a,b){var c,f,g,d;d=[];g=Math.ceil(a.length/b);for(c=f=0;0<=g?f<g:f>g;c=0<=g?++f:--f)d.push(a.slice(c*b,(c+1)*b));return d},categoryClass:function(a){return"plx-"+h.singularize(h.camelize(a))},artifactIdFromUrl:function(a){a=a.split("?",2);return 1<a.length?m(a[1]):l(a[0])},isSitePrefixed:function(a){a=a.split("/");return-1!==["u","a","g","grant"].indexOf(a[4])},resourceIdFromUrl:function(a){var b;b=a.split("?");if(1<b.length)return b=b[1].split("="),a=b[0],b=b[1],{type:a,id:b};b=h.isSitePrefixed(a)?5:4;b=a.split("/").slice(b).join(".");return{type:"plumx_id",id:b}},grantIdFromUrl:function(a){a=a.split("/");return{type:"plumx_id",id:a[a.length-1]}},guid:function(){var a,b;a=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};b=function(){return a()+a()};return[b(),a(),a(),a(),a(),b()+a()].join("-")},splitLabels:function(a){return function(a,c){null==c&&(c=function(a){return a});a=a.split(" - ");return 1===a.length?c(a[0]):2===a.length?[c(a[0]),c(a[1])].join(" - "):c(a.join(" - "))}}(this),handleThemeClass:function(a){var b;b=null;a=a.attr("class").match(/plum\-[^\s]*\-theme/);null!==a&&(b=a[0]);return b},sortObject:function(a){return Object.keys(a).sort().reduce(function(b,c){b[c]=a[c];return b},{})}};q.exports=h},{"./loader":7}],18:[function(c,q,p){var h,m,l=function(c,a){return function(){return c.apply(a,arguments)}};h=c("./util");p=function(c){return h.resourceIdFromUrl(c.href)};c=function(c){return h.grantIdFromUrl(c.href)};c=function(c){return{type:"plumx_id",id:c.href.split("/").pop()}};m={artifact:function(c){return h.artifactIdFromUrl(c.href)},group:function(c){return c.gp?{type:"plumx_id",id:c.gp}:h.resourceIdFromUrl(c.href)},grant:c,researcher:p,person:p};c=function(){function c(a,b){this.placeholder=a;this.resourceType=b;this.getOptions=l(this.getOptions,this);this.getParams=l(this.getParams,this);this.widget=this.getOptions();this.request=this.getParams()}c.prototype.getParams=function(){var a,b,c,f;b=m[this.resourceType](this.widget);c=this.widget;for(a in c)f=c[a],b[a]=f;b.ref=document.referrer;delete b.gp;return b};c.prototype.getOptions=function(){var a;a=h.sortObject(this.placeholder.data());a.href=this.placeholder.attr("href");return a};return c}();q.exports=c},{"./util":17}],19:[function(c,q,p){var h,m,l,f,a,b,e,r,g,d,s=function(a,b){return function(){return a.apply(b,arguments)}},n=function(a,b){function c(){this.constructor=a}for(var d in b)k.call(b,d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a},k={}.hasOwnProperty;m=c("./lib/loader");h=c("./lib/artifact");a=c("./lib/plumprint");b=c("./lib/popup");q=c("./lib/handler");r=c("./lib/util");l=c("./lib/widget_options");c("./lib/events");f=c("./lib/page_token");g=m.whenReady(function(a){return g=a});e=function(c){function d(){this.fail=s(this.fail,this);this.empty=s(this.empty,this);this.stats=s(this.stats,this);return d.__super__.constructor.apply(this,arguments)}n(d,c);d.prototype.renderer=b;d.prototype.stats=function(b){b={summary:b.summary(this.options),print:a["for"](b.aggrCounts(),this.options)};return this.render(g.extend({},this.options,b))};d.prototype.empty=function(){var b;if(this.options.hideWhenEmpty)return this.remove();b={summary:{},print:a.empty()};return this.render(g.extend({},this.options,b))};d.prototype.fail=function(){return this.remove()};return d}(q);d=function(){return g(".plumx-plum-print-popup").each(function(){var a,b,c;a=g(this);b=new l(a,"artifact");b.request.widget="popup";b.request.pageToken=f;b.request.isElsWidget=!1;c=r.handleThemeClass(a);null!==c&&(b.request.isElsWidget=!0,b.widget.themeClass=c,b.request.theme=c);a=new e(a,b.widget);return(new h(a,b.widget)).fetch(b.request)})};r.withGlobalNS("__plumX.widgets.popup",function(a){a.wireUp=d;return m.whenReady(d)})},{"./lib/artifact":1,"./lib/events":5,"./lib/handler":6,"./lib/loader":7,"./lib/page_token":9,"./lib/plumprint":10,"./lib/popup":11,"./lib/util":17,"./lib/widget_options":18}]},{},[19]);(function(){var c=document.getElementById("plx-css-summary");if(!c){var q=document.head||document.getElementsByTagName("head")[0]||document.documentElement,c=document.createElement("link");c.setAttribute("id","plx-css-summary");c.setAttribute("type","text/css");c.setAttribute("rel","stylesheet");c.setAttribute("href","//d39af2mgp1pqhg.cloudfront.net/summary.css");q.appendChild(c)}})();(function(){window.__plumX=window.__plumX||{};window.__plumX.widgets=window.__plumX.widgets||{};var c=__plumX.widgets;c.imageServiceUrl="https://print.plu.mx/widget/other/pc/png?size=256";c.dataServiceUrl="https://api.plu.mx/widget/other";c.dataServiceUrlEl="https://api.plu.mx/widget/elsevier";c.staticImagesUrl="//d39af2mgp1pqhg.cloudfront.net/2e9971b1fdcd89dc49349f95aa214ae5/";c.extjsBaseUrl="//d39af2mgp1pqhg.cloudfront.net";c.isElsevier=!1;c.init=function(){for(var q in c)try{c[q].wireUp()}catch(p){}}})();(function e$$0(q,p,g){function l(a,b){if(!p[a]){if(!q[a]){var d="function"==typeof require&&require;if(!b&&d)return d(a,!0);if(m)return m(a,!0);d=Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d;}d=p[a]={exports:{}};q[a][0].call(d.exports,function(b){var h=q[a][1][b];return l(h?h:b)},d,d.exports,e$$0,q,p,g)}return p[a].exports}for(var m="function"==typeof require&&require,f=0;f<g.length;f++)l(g[f]);return l})({1:[function(c,q,p){var g,l,m,f=function(a,b){return function(){return a.apply(b,arguments)}};p=c("./loader");l=c("./resource");m=c("./statistics");p.whenReady(function(a){return a});g=["Usage","Captures","Mentions","Social Media","Citations"];c=function(){function a(a,d){this.handler=a;this.widgetOptions=d;this._whenFail=f(this._whenFail,this);this._whenDone=f(this._whenDone,this);this.handleFail=f(this.handleFail,this);this.handleEmpty=f(this.handleEmpty,this);this.handleData=f(this.handleData,this);this.fetch=f(this.fetch,this);this.stats=null}a.prototype.fetch=function(a){this.params=a;return l.artifact(a).fail(this._whenFail).done(this._whenDone)};a.prototype.handleData=function(){this.handler.stats(this.stats);this.handler.callback.success();return this.handler.placeholder.trigger("plum:widget-load",[this.widgetOptions])};a.prototype.handleEmpty=function(){this.handler.empty();this.handler.callback.empty();return this.handler.placeholder.trigger("plum:widget-empty",[this.widgetOptions])};a.prototype.handleFail=function(){this.handler.fail();this.handler.callback.fail();return this.handler.placeholder.trigger("plum:widget-error",[this.widgetOptions])};a.prototype._whenDone=function(a){var d,k,h,e;this.stats=m(a.statistics);e=!1;k=0;for(h=g.length;k<h;k++)a=g[k],d="hide"+a.charAt(0)+a.substr(1).toLowerCase().replace(" ",""),this.stats.data&&(this.stats.data.hasOwnProperty(a)&&!0!==this.widgetOptions[d])&&(e=!0);return this.stats.isEmpty||!1===e?this.handleEmpty():this.handleData()};a.prototype._whenFail=function(a){return"NotFound"===a?this.handleEmpty():this.handleFail()};return a}();q.exports=c},{"./loader":7,"./resource":12,"./statistics":13}],2:[function(c,q,p){var g,l,m,f,a,b=function(a,e){return function(){return a.apply(e,arguments)}},d=function(a,e){function b(){this.constructor=a}for(var r in e)k.call(e,r)&&(a[r]=e[r]);b.prototype=e.prototype;a.prototype=new b;a.__super__=e.prototype;return a},k={}.hasOwnProperty;m={"stroke-width":1,stroke:"black",fill:"black"};f="http://www.w3.org/2000/svg";p=function(){function a(e){this.strokeWidth=b(this.strokeWidth,this);this.stroke=b(this.stroke,this);this.fill=b(this.fill,this);this.setAttr=b(this.setAttr,this);this.node=document.createElementNS(f,e)}a.prototype.setAttr=function(a,b){return this.node.setAttribute(a,null!=b?b:m[a])};a.prototype.fill=function(a){return this.setAttr("fill",a)};a.prototype.stroke=function(a){return this.setAttr("stroke",a)};a.prototype.strokeWidth=function(a){return this.setAttr("stroke-width",a)};return a}();c=function(a){function e(a){e.__super__.constructor.call(this,a)}d(e,a);return e}(p);p=function(a){function e(a,r,n){e.__super__.constructor.call(this,r);a.appendChild(this.node);this.fill(n.fill);this.stroke(n.stroke);this.strokeWidth(n.strokeWidth)}d(e,a);return e}(p);l=function(a){function e(a,r){this.line=b(this.line,this);this.cubic=b(this.cubic,this);this.close=b(this.close,this);this.start=b(this.start,this);e.__super__.constructor.call(this,a,"path",r);this.path=[];this.started=!1}d(e,a);e.prototype.start=function(a,r){this.path.push("M "+a+","+r);return this.started=!0};e.prototype.close=function(){this.path.push("Z");return this.setAttr("d",this.path.join(" "))};e.prototype.cubic=function(a,r,n,e,b,h){return this.path.push("C "+a+","+r+" "+n+","+e+" "+b+","+h)};e.prototype.line=function(a,r){return this.path.push("L "+a+","+r)};return e}(p);g=function(a){function e(a,r){this.position=b(this.position,this);this.radius=b(this.radius,this);e.__super__.constructor.call(this,a,"circle",r);this.radius(r.r);this.position(r.cx,r.cy)}d(e,a);e.prototype.radius=function(a){return this.setAttr("r",a)};e.prototype.position=function(a,r){this.setAttr("cx",a);return this.setAttr("cy",r)};return e}(p);a=function(a){function e(a){this.circle=b(this.circle,this);this.path=b(this.path,this);e.__super__.constructor.call(this,"svg",a);this.setAttr("viewBox","0 0 100 100");this.setAttr("width",a.width);this.setAttr("height",a.height)}d(e,a);e.prototype.path=function(a){return new l(this.node,a)};e.prototype.circle=function(a){return new g(this.node,a)};return e}(c);c={create:function(b){return new a(b)},supported:!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect};q.exports=c},{}],3:[function(c,q,p){q.exports=window.__plumX.widgets},{}],4:[function(c,q,p){var g,l,m,f,a,b;f=c("./loader").whenReady(function(a){return f=a});p=["div","ul","li","span","img"];c={};g=function(a,b){var h,e,c;e=f("<"+a+">");for(h in b)c=b[h],"text"===h?e.text(c):"html"===h?e.html(c):e.attr(h,c);return e};l=function(a){return function(b){return g(a,b)}};m=0;for(a=p.length;m<a;m++)b=p[m],c[b]=l(b);c.a=function(a){return g("a",f.extend({target:"_blank"},a))};q.exports=c},{"./loader":7}],5:[function(c,q,p){var g,l,m,f,a,b,d=function(a,b){return function(){return a.apply(b,arguments)}},k=function(a,b){function r(){this.constructor=a}for(var n in b)h.call(b,n)&&(a[n]=b[n]);r.prototype=b.prototype;a.prototype=new r;a.__super__=b.prototype;return a},h={}.hasOwnProperty;m=c("./loader");p=c("./config");f=c("./dom");g=m.whenReady(function(a){return g=a});l=p.dataServiceUrl+"/event";a=function(){var a;a=g("#plx-evt-trspt");return a.length?a:f.img({id:"plx-evt-trspt"}).css({display:"none"}).appendTo("body")};b=function(b){return a().attr({src:l+"?"+g.param(b)})};c=function(a){function b(){this._endHover=d(this._endHover,this);this._startHover=d(this._startHover,this);this._clearTimer=d(this._clearTimer,this);this.logEvent=d(this.logEvent,this);this.bindTo=d(this.bindTo,this);return b.__super__.constructor.apply(this,arguments)}k(b,a);b.prototype.timeout=1E3;b.prototype.eventName="hover";b.prototype.bindTo=function(a){return a.on("mouseenter",this._startHover).on("mouseleave",this._endHover)};b.prototype.logEvent=function(){return this.log()};b.prototype._clearTimer=function(){if(this.timer)return clearTimeout(this.timer),this.timer=null};b.prototype._startHover=function(){this._clearTimer();return this.timer=setTimeout(this.logEvent,this.timeout)};b.prototype._endHover=function(){return this._clearTimer()};return b}(function(){function a(b){this.options=b;this.log=d(this.log,this)}a.prototype.log=function(a){null==a&&(a={});return b(g.extend({event:this.eventName},this.options,a))};a.prototype.logEvent=function(){};return a}());q.exports={Hover:c}},{"./config":3,"./dom":4,"./loader":7}],6:[function(c,q,p){var g,l,m,f=function(a,b){return function(){return a.apply(b,arguments)}};m=function(a){var b,d;if(a){d=a.split(".").reverse();for(a=window[d.pop()];a&&(b=a[d.pop()]);)a=b;return a}};l=function(a,b){return function(a,b){return a?function(){var h;if(h=m(a))return h(b.elem())}:function(){}}(a,b)};g=function(){return function(a){var b,d;this.handler=a;d=this.handler.callbacks;for(b in d)a=d[b],this[b]=l(a,this.handler)}}();c=function(){function a(a,d){this.placeholder=a;this.options=d;this.fail=f(this.fail,this);this.elem=f(this.elem,this);this.remove=f(this.remove,this);this.render=f(this.render,this);this.callbacks={success:this.options.onSuccess,empty:this.options.onEmpty,fail:this.options.onFail};this.callback=new g(this)}a.prototype.render=function(a){a=this.renderer(a);this.placeholder.replaceWith(a);return this.placeholder=a};a.prototype.remove=function(){return this.placeholder.hide().removeClass()};a.prototype.elem=function(){return this.placeholder.get(0)};a.prototype.fail=function(){return this.remove()};return a}();q.exports=c},{}],7:[function(c,q,p){var g,l,m,f,a,b,d;g=c("./config");l=null;f=[];d=function(){return l(document).ready(function(a){var b,e,d,r;r=[];e=0;for(d=f.length;e<d;e++)b=f[e],r.push(b(a));return r})};m=function(a){return(document.head||document.getElementsByTagName("head")[0]||document.documentElement).appendChild(a)};b=function(a){var b;b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("src",a);return b};p=function(){var d;d=b("//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js");d.readyState?d.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState)return a()}:d.onload=a;return m(d)};c=function(a){a=a.split(".");return"1"!==a[0]?!1:8<=parseInt(a[1],10)?!0:!1};a=function(){l=window.jQuery.noConflict(!0);return d()};null!=window.jQuery&&c(window.jQuery.fn.jquery)?(l=window.jQuery,d()):p();(function(){var a;a=b(g.extjsBaseUrl+"/extjs/xss.js");return m(a)})();q.exports={whenReady:function(a){return"undefined"!==typeof isReady&&null!==isReady?a(l):f.push(a)}}},{"./config":3}],8:[function(c,q,p){c=function(){for(var c=[],l=0;64>l;)c[l]=0|4294967296*Math.abs(Math.sin(++l));return function(m){var f,a,b,d,k=[];m=unescape(encodeURI(m));for(var h=m.length,e=[f=1732584193,a=-271733879,~f,~a],s=0;s<=h;)k[s>>2]|=(m.charCodeAt(s)||128)<<8*(s++%4);k[m=16*(h+8>>6)+14]=8*h;for(s=0;s<m;s+=16){h=e;for(d=0;64>d;)h=[b=h[3],(f=h[1]|0)+((b=h[0]+[f&(a=h[2])|~f&b,b&f|~b&a,f^a^b,a^(f|~b)][h=d>>4]+(c[d]+(k[[d,5*d+1,3*d+5,7*d][h]%16+s]|0)))<<(h=[7,12,17,22,5,9,14,20,4,11,16,23,6,10,15,21][4*h+d++%4])|b>>>32-h),f,a];for(d=4;d;)e[--d]=e[d]+h[d]}for(m="";32>d;)m+=(e[d>>3]>>4*(1^d++&7)&15).toString(16);return m}}();q.exports=c},{}],9:[function(c,q,p){p=c("./config");c=c("./util");p.pageToken||(p.pageToken=c.guid());q.exports=p.pageToken},{"./config":3,"./util":17}],10:[function(c,q,p){var g,l,m,f,a,b,d,k,h,e;m=c("./print");g=c("./canvas");p=c("./loader");f=c("./util");l=c("./config");a=c("./dom");b=p.whenReady(function(a){return b=a});e=f.shortenKeys;h=function(a){var b,n;b={width:"100%",height:"100%"};n=new m(b);b=g.create(b);a=n["for"](a);(new m.Renderer(b)).render(a);return b.node};k=function(d,r){var n,w;w=b.param(e(d));n=l.imageServiceUrl;r.isElsevier&&(n=l.imageServiceUrlEl);return a.img({src:n+"&"+w})};d=function(a,b){var n;n=f.camelizeKeys(a);return g.supported?h(n):k(n,b)};d.empty=function(){return d({})};d["for"]=function(a,b){return d(a,b)};q.exports=d},{"./canvas":2,"./config":3,"./dom":4,"./loader":7,"./print":11,"./util":17}],11:[function(c,q,p){var g,l,m,f,a,b,d,k,h=function(a,n){return function(){return a.apply(n,arguments)}},e=function(a,n){function b(){this.constructor=a}for(var e in n)s.call(n,e)&&(a[e]=n[e]);b.prototype=n.prototype;a.prototype=new b;a.__super__=n.prototype;return a},s={}.hasOwnProperty;l={socialMedia:"#13b7ea",citation:"#fd5704",usage:"#6dd54d",mention:"#f3c316",capture:"#c43bf3",background:"#6e1a62",ring:"#ffffff"};f={socialMedia:[1,1,1,2,2,3,4,7,18],citation:[1,2,3,4,6,10,15,24,44],usage:[1,3,6,11,19,36,73,161,485],mention:[1,1,1,1,1,2,2,3,6],capture:[1,1,2,3,5,7,11,19,39]};m={socialMedia:[1,1,1,2,2,3,4,7,18,44,316,16895933],citation:[1,2,3,4,6,10,15,24,44,74,199,241364],usage:[1,3,6,11,19,36,73,161,485,1181,4558,2133206101],mention:[1,1,1,1,1,2,2,3,6,12,70,1059833],capture:[1,1,2,3,5,7,11,19,39,71,228,3639665]};k={degToRad:function(a){return a*Math.PI/180},log2:function(a){return Math.log(a)/Math.LN2}};g={create:function(a){return(0<a.count?new g.NonEmptyAtom(a):new g.EmptyAtom(a)).serialize()}};g.AtomBase=function(){function a(n){this.serialize=h(this.serialize,this);this.position=h(this.position,this);this.distance=h(this.distance,this);this.metric=n.metric;this.angle=n.angle;this.count=n.count;this.center=n.center;this.mode=n.mode}a.prototype.MIN_RADIUS=5;a.prototype.MAX_RADIUS=14;a.prototype.MIN_PADDING=5;a.prototype.MAX_PADDING=14;a.prototype.DISTANCE=14;a.prototype.isEmpty=function(){return null};a.prototype.radius=function(){return null};a.prototype.padding=function(){return null};a.prototype.distance=function(){return this.DISTANCE+this.padding()};a.prototype.position=function(){var a,b,e;a=k.degToRad(this.angle);b=this.distance();e=Math.sin(a)*b+this.center.x;a=Math.cos(a)*b+this.center.y;return{x:e,y:a}};a.prototype.serialize=function(){var a;a=this.position();return{type:"atom",x:a.x,y:a.y,metric:this.metric,count:this.count,angle:this.angle,radius:this.radius(),distance:this.distance(),isEmpty:this.isEmpty()}};return a}();g.EmptyAtom=function(a){function b(){this.padding=h(this.padding,this);this.radius=h(this.radius,this);return b.__super__.constructor.apply(this,arguments)}e(b,a);b.prototype.isEmpty=function(){return!0};b.prototype.radius=function(){return this.MIN_RADIUS-1};b.prototype.padding=function(){return this.MIN_PADDING-1};return b}(g.AtomBase);g.NonEmptyAtom=function(a){function b(){this.padding=h(this.padding,this);this.radius=h(this.radius,this);return b.__super__.constructor.apply(this,arguments)}e(b,a);b.prototype.isEmpty=function(){return!1};b.prototype.radius=function(){var a,b,n,e,d;if("new"===this.mode){e=this.MIN_RADIUS;d=f[this.metric];a=0;for(b=d.length;a<b;a++)n=d[a],this.count>n&&e++}else if("new95"===this.mode){e=this.MAX_RADIUS;a=1*m[this.metric][9];n=m[this.metric].slice(0,9).reverse();b=0;for(n=n.length;b<n;b++)this.count<a&&e--,a/=2}else if("new99"===this.mode){e=this.MAX_RADIUS;a=1*m[this.metric][10];n=m[this.metric].slice(0,10).reverse();b=0;for(n=n.length;b<n;b++)this.count<a&&e--,a/=2}else e=k.log2(this.count)+this.MIN_RADIUS;e>this.MAX_RADIUS&&(e=this.MAX_RADIUS);e<this.MIN_RADIUS&&(e=this.MIN_RADIUS);return e};b.prototype.padding=function(){return 1.3*(this.radius()-this.MIN_PADDING)+this.MIN_PADDING};return b}(g.AtomBase);d=function(a){function b(a,e){this.generate=h(this.generate,this);this.controlPoints=h(this.controlPoints,this);this.mergePoints=h(this.mergePoints,this);this.serialize=h(this.serialize,this);this.serialize=h(this.serialize,this);b.__super__.constructor.call(this);this.atoms=a;this.center=e;this.generate()}e(b,a);b.prototype.ANGLE_MOD=122;b.prototype.DIST_FACT=0.2;b.prototype.serialize=function(){var a;a=[].concat(this.path);a.type="shape";return a};b.prototype.serialize=function(){var a;a=[].concat(this.path);a.type="shape";return a};b.prototype.mergePoints=function(a){return[a.angle-125,a.angle+125].map(function(b){var n;n=k.degToRad(b);b=Math.sin(n)*a.radius+a.x;n=Math.cos(n)*a.radius+a.y;return{x:b,y:n}})};b.prototype.controlPoints=function(a){var b;b=a.angle+180;return[b-this.ANGLE_MOD,b+this.ANGLE_MOD].map(function(a){return k.degToRad(a)}).map(function(b){return function(n){var e;e=Math.sin(n)*a.distance*b.DIST_FACT+b.center.x;n=Math.cos(n)*a.distance*b.DIST_FACT+b.center.y;return{x:e,y:n}}}(this))};b.prototype.generate=function(){var a,b,n,e,d,h,r,c,f,k;f=this.atoms.map(function(a){return function(b){return a.mergePoints(b)}}(this));a=this.atoms.map(function(a){return function(b){return a.controlPoints(b)}}(this));b=function(b){return a[b][0]};h=function(b){return a[b][1]};n=function(a){return f[a][0]};c=function(a){return f[a][1]};r=this.atoms;e=d=0;for(r=r.length;d<r;e=++d)k=e+1>=this.atoms.length?0:e+1,0===e?this.start(c(e).x,c(e).y):this.line(c(e).x,c(e).y),this.cubic(h(e).x,h(e).y,b(k).x,b(k).y,n(k).x,n(k).y);return this.end()};return b}(function(){function a(){this.serialize=h(this.serialize,this);this.cubic=h(this.cubic,this);this.line=h(this.line,this);this.end=h(this.end,this);this.start=h(this.start,this);this.path=[]}a.prototype.start=function(a,b){return this.path.push({type:"start",x:a,y:b})};a.prototype.end=function(){return this.path.push({type:"end"})};a.prototype.line=function(a,b){return this.path.push({type:"line",x:a,y:b})};a.prototype.cubic=function(a,b,e,d,h,r){return this.path.push({type:"cubic",cx1:a,cy1:b,cx2:e,cy2:d,x:h,y:r})};a.prototype.serialize=function(){var a;a=[];a.type="shape";a.concat(this.path);return a};return a}());b={create:function(a,b){return(new d(a,b)).serialize()}};c=function(){function a(b){this._createShape=h(this._createShape,this);this._createAtoms=h(this._createAtoms,this);var e;this.display_width=b.width||100;this.display_height=b.height||100;this.center={x:this.WIDTH/2,y:this.HEIGHT/2};this.order=this.METRICS.slice(0).reverse();this.step=360/this.METRICS.length;this.mode=null!=(e=b.radius_mode)?e:"old"}a.prototype.WIDTH=100;a.prototype.HEIGHT=100;a.prototype.METRICS=["usage","capture","mention","socialMedia","citation"];a.prototype["for"]=function(a){a=this._createAtoms(a);return[this._createShape(a)].concat(a)};a.prototype._createAtoms=function(a){var b,e,d,h,c,r,k;b=[];k=this.order;d=h=0;for(c=k.length;h<c;d=++h)r=k[d],e=a[r]||0,b.push(g.create({metric:r,count:e,center:this.center,angle:this.step*(d-1),mode:this.mode}));return b};a.prototype._createShape=function(a){return b.create(a,this.center)};return a}();a={atom:function(a,b){if(b.isEmpty)return a.circle({cx:b.x,cy:b.y,r:b.radius,fill:l.background,stroke:l.background});a.circle({cx:b.x,cy:b.y,r:b.radius,fill:l[b.metric],stroke:l.background});return a.circle({cx:b.x,cy:b.y,r:b.radius-1.5,fill:"none",stroke:l.ring,strokeWidth:1.5})},shape:function(a,b){var e,d,h,c,k;h=a.path({fill:l.background,stroke:l.background});c=[];e=0;for(d=b.length;e<d;e++)switch(k=b[e],k.type){case"start":c.push(h.start(k.x,k.y));break;case"end":c.push(h.close());break;case"line":c.push(h.line(k.x,k.y));break;case"cubic":c.push(h.cubic(k.cx1,k.cy1,k.cx2,k.cy2,k.x,k.y));break;default:c.push(void 0)}return c}};p=function(){function b(a){this.canvas=a;this.render=h(this.render,this)}
b.prototype.render=function(b){var e,d,h,c,k;k=[];e=0;for(d=b.length;e<d;e++)h=b[e],c=a[h.type],k.push(c(this.canvas,h));return k};return b}();c.Renderer=p;q.exports=c},{}],12:[function(c,q,p){var g,l,m,f,a,b,d,k,h,e=function(a,b){return function(){return a.apply(b,arguments)}},s=[].indexOf||function(a){for(var b=0,e=this.length;b<e;b++)if(b in this&&this[b]===a)return b;return-1};m=c("./loader");g=c("./config");p=c("./util");k=c("./md5");d=m.whenReady(function(a){return d=a});l={cache:!0,ifModified:!0,dataType:"jsonp"};b=function(a){return setTimeout(a,10)};a=function(){function a(){this.put=e(this.put,this);this.has=e(this.has,this);this.get=e(this.get,this);this.items=[]}a.prototype.get=function(a){return this.items[a]};a.prototype.has=function(a){return 0<=s.call(this.items,a)};a.prototype.put=function(a,b){return this.items[a]=b};return a}();f=function(){function d(){this.emit=e(this.emit,this);this.unsubscribe=e(this.unsubscribe,this);this.subscribe=e(this.subscribe,this);this.publish=e(this.publish,this);this.subscribersForHash=e(this.subscribersForHash,this);this.addSubscriber=e(this.addSubscriber,this);this.hasSubscription=e(this.hasSubscription,this);this.store=new a;this.subscribers={}}d.prototype.hasSubscription=function(a,b){return-1!==this.subscribersForHash(a).indexOf(b)};d.prototype.addSubscriber=function(a,b){return this.subscribersForHash(a).push(b)};d.prototype.subscribersForHash=function(a){var b;(b=this.subscribers)[a]||(b[a]=[]);return this.subscribers[a]};d.prototype.publish=function(a,b){this.store.has(a)||this.store.put(a,b);return this.emit(a)};d.prototype.subscribe=function(a,e){var d;this.hasSubscription(a,e)||this.addSubscriber(a,e);d=function(b){return function(){return b.unsubscribe(a,e)}}(this);b(function(b){return function(){if(b.store.has(a))return b.emit(a)}}(this));return d};d.prototype.unsubscribe=function(a,b){var e,d;d=this.subscribersForHash(a);e=d.indexOf(b);if(-1===e)return!1;d.splice(e,1);return!0};d.prototype.emit=function(a){var b,e,d,h,c,k;h=this.subscribersForHash(a);c=[];for(e=h.length-1;0<=e;e+=-1)d=h[e],k=this.store.get(a),d&&k?(b=k.error_code)?c.push(d.reject(b)):c.push(d.resolve(k)):c.push(void 0);return c};return d}();h=function(a){return d.extend({},l,a)};c=function(a){return function(b){var e,c,f,m,l;c=k(a+"---"+b.id+"---"+(b.site||"")+"---"+(b.exclScCit||"")+"---"+(b.numArtifacts||"")+"---"+(b.noStats||"")+"---"+(b.theme||""));delete b.widget;delete b.orientation;delete b.size;delete b.popup;delete b.badge;delete b.hideWhenEmpty;delete b.hideSocialmedia;delete b.hideCitations;delete b.hideCaptures;delete b.hideMentions;delete b.hideUsage;f=d.param(d.map(b,function(a,b){return{name:b,value:decodeURIComponent(a)}}));e=h({url:g.dataServiceUrl+"/"+a+"?"+f,dataType:"json"});b.isElsWidget&&(e.url=g.dataServiceUrlEl+"/"+a+"?"+f);m=window.__plumX.widgets.responses.store;b=d.Deferred();b.id=Math.random();f=!0;0!==m.subscribersForHash(c).length&&(f=!1);l=m.subscribe(c,b);b.always(l);f&&d.ajax(e).done(function(a,b,e){return m.publish(c,a)});return b}};p.withGlobalNS("__plumX.widgets.responses",function(a){return a.store=new f});q.exports={artifact:c("artifact"),researcher:c("researcher"),group:c("group"),grant:c("grant")}},{"./config":3,"./loader":7,"./md5":8,"./util":17}],13:[function(c,q,p){var g,l,m,f,a,b=function(a,b){return function(){return a.apply(b,arguments)}},d=[].indexOf||function(a){for(var b=0,e=this.length;b<e;b++)if(b in this&&this[b]===a)return b;return-1};m=function(a,b){var e,d,c,f,g;e={};d=0;for(f=a.length;d<f;d++)if(c=a[d],!b||!(!0===b.exclScCit&&"Scopus"===c.source))e[g=c.label]||(e[g]=0),c.count>e[c.label]&&(e[c.label]=c.count);return e};l=function(a){var b,e,d,c,f;b={};e=0;for(c=a.length;e<c;e++)d=a[e],b[f=d.label]||(b[f]=0),b[d.label]+=d.count;return b};a=function(a){var b;b={};b.count=a.count;a.link&&(b.link=a.link);b.source=a.source;b.label=function(){switch(!1){case"Blog"!==a.source:return"Blogs";case"Economics Blog"!==a.source:return"Economics Blogs";case"News"!==a.source:return"News";default:return b.label=a.source+" - "+a.label}}();return b};f=function(b){return a(b)};g=function(){function a(d){this._isEmpty=b(this._isEmpty,this);this._total=b(this._total,this);this.details=b(this.details,this);this.summary=b(this.summary,this);this.aggrCountsNoScopus=b(this.aggrCountsNoScopus,this);this.aggrCounts=b(this.aggrCounts,this);this.data=d;this.isEmpty=this._isEmpty()}a.prototype.aggrCounts=function(){var a,b,d,c,f,k,t,g;d={};g=this.data;for(a in g){k=g[a];c=b=0;for(t=k.length;c<t;c++)f=k[c],b+=f.count;d[a]=b}return d};a.prototype.aggrCountsNoScopus=function(){var a,b,d,c,f,k,t,g;d={};g=this.data;for(a in g){k=g[a];c=b=0;for(t=k.length;c<t;c++)f=k[c],"Scopus"!==f.source&&(b+=f.count);d[a]=b}return d};a.prototype.summary=function(a){var b,d,c,f;if(this.isEmpty)return{};f={};c=this.data;for(b in c)d=c[b],f[b]="Citations"===b?m(d,a):l(d);return f};a.prototype.details=function(a){var b,c,k,g,m,t,l,p,q,x,y,u,z,v,A;if(this.isEmpty)return{};k={};A=["Wikipedia","Twitter","Blog","Economics Blog","News"];u=this.data;for(c in u){p=u[c];k[c]=[];m=0;for(x=p.length;m<x;m++)if(l=p[m],!a||!(!0===a.exclScCit&&"Scopus"===l.source))if("Economics Blog Mentions"===l.label&&(l.source="Economics Blog"),z=l.source,0<=d.call(A,z)){g=!1;v=k[c];t=q=0;for(y=v.length;q<y;t=++q)b=v[t],b.source===l.source&&(g=!0,k[c][t].count+=l.count);!1===g&&k[c].push(f(l))}else k[c].push(f(l))}return k};a.prototype._total=function(){var a,b,d,c,f,k,g;g=0;k=this.data;for(a in k){c=k[a];b=0;for(f=c.length;b<f;b++)d=c[b],g+=d.count}return g};a.prototype._isEmpty=function(){return 0===this._total()};return a}();q.exports=function(a){return new g(a)}},{}],14:[function(c,q,p){q.exports={es:{"Abstract Views":"Vistas de Resumen",Abstract:"Resumen","Affiliated Researchers":"Investigadores Afiliados",Article:"Art\u00edculo","Artifact Summary":"Resumen Productos de Investigaci\u00f3n",Audio:"Audio",Bibliography:"Bibliography","Blog Mentions":"Menciones Blog","Blog Post":"Comentarios de Blog",Blog:"Blog",Blogs:"Blogs","Book Chapter":"Cap\u00edtulo de Libro",Book:"Libro",Bookmarks:"Marcadores",Brief:"Compendio",Captures:"Capturas",Case:"Caso",Catalogue:"Cat\u00e1logo","Citation Indexes":"\u00cdndice de Citas",Citations:"Citas",Clicks:"Clics","Clinical Citations":"Citas Cl\u00ednicas","Clinical Trial":"Ensayo Cl\u00ednico",Code:"C\u00f3digo",Collaborators:"Colaboradores",Collection:"Coleci\u00f3n",Comments:"Comentarios","Conference Paper":"Memorias de Congresos",Correction:"Correcci\u00f3n","Data Set":"Conjunto de Datos","Data Views":"Vistas Apoyadas","Design/Architecture":"Dise\u00f1o / Arquitectura",Downloads:"Descargas","Economic Blog Mentions":"Menciones Blogs Econ\u00f3micos","Economics Blog Mentions":"Menciones Blogs Econ\u00f3micos","Economics Blogs":"Menciones Blogs Econ\u00f3micos","Exhibition/Event":"Exhibici\u00f3n/Evento","Exhibition / Event":"Exhibici\u00f3n/Evento","Expert Opinion":"Opini\u00f3n de Experto","Exports-Saves":"Exportados / Guardados",Favorites:"Favoritos",Figure:"Cifra","File Set":"Conjunto de Archivos",Followers:"Seguidores",Forks:"Conexiones","Forum Topic Count":"Conteo Temas Foro","Full Text Views":"Vistas Txt Completo",Gists:"Conteo Esencial","Government Document":"Documento de Gobierno",Grant:"Beca",Guideline:"Gu\u00eda","HTML Views":"Vistas HTML",Holdings:"Acervo",Image:"Imagen",Interview:"Entrevista",Issue:"N\u00famero",Journal:"Publicaci\u00f3n",Letter:"Ensayo",Likes:"Me Gusta","Link-outs":"V\u00ednculos",Links:"Enlaces","Live Performance":"Presentaci\u00f3n en Vivo",Manuscript:"Manuscrito",Map:"Mapa",Media:"Medios",Mentions:"Menciones","Music Score":"Partitura Musical","News Mentions":"Menciones Noticias",News:"Noticias",Newsletter:"Bolet\u00edn Informativo","No metrics available.":"No hay m\u00e9tricas disponibles.","Online Course":"Curso en l\u00ednea",Other:"Otro","PDF Views":"Vistas PDF",Paper:"Documento de Trabajo","Patent Citations":"Citas de Patentes",Patent:"Patentes",Plays:"Reproducciones",Policy:"Pol\u00edticas","Policy Citations":"Citas de Pol\u00edticas",Poster:"Afiche",Preprint:"Preimpresi\u00f3n",PrePrint:"Preimpresi\u00f3n",Presentation:"Presentaci\u00f3n","Press Release":"Comunicado de Prensa",Project:"Proyecto",Ratings:"Clasificaci\u00f3n",Readers:"Lectores","Recent Artifacts":"Piezas de Investigaci\u00f3n Recientes",Recommendations:"Recomendaciones","Recorded Work":"Grabaci\u00f3n","Reference Entry":"Referencia",References:"Referencias",Report:"Informe",Researchers:"Investigadores",Retraction:"Retracci\u00f3n",Reviews:"Cr\u00edticas",Review:"Cr\u00edticas","Sample Downloads":"Descarga del Ejemplo",Scores:"Calificaci\u00f3n",Score:"Calificaci\u00f3n",Shares:"Compartir","Shares, Likes & Comments":"Compartidos, Me Gusta y Comentarios","Social Media":"Redes Sociales",Speech:"Discurso",Standard:"Est\u00e1ndar",Subscribers:"Subscriptores","Supporting Data Views":"Observaciones de Datos",Syllabus:"Plan de Estudios","Textual Work":"Escrito","Thesis / Dissertation":"Tesis / Disertaci\u00f3n",Tweets:"Tuits",Unknown:"Desconocido",Usage:"Uso",Video:"Video",Views:"Vistas","Visual Arts":"Artes Visuales",Volume:"Volumen",Watchers:"Observadores","Web Page":"P\u00e1gina Web","Web Resource":"Recurso Web","see details":"Ver detalles","Brochure / Pamphlet":"Folleto / Panfleto",Commentary:"Comentario",Editorial:"Editorial","Research Proposal":"Propuesta de Investigaci\u00f3n","Technical Documentation":"Documento T\u00e9cnico","Code / Software":"C\u00f3digo / Software","Lecture / Presentation":"Presentaci\u00f3n","Learning Object":"objetos de aprendizaje","Research Artifact":"Pieza Investigativa","PlumX Metrics Detail Page":"P\u00e1gina de detalle de PlumX Metrics",Emails:"Correos electr\u00f3nicos","ePub Downloads":"Descargas en ePub","Exports/Saves":"Exportaciones/Guardados",Exports:"Exportaciones",Saves:"Guardados","Figure Views":"Visualizaciones de im\u00e1genes","Forum Topics":"Temas de foro",Groups:"Grupos","PDF Downloads":"Descargas en PDF","Print-outs":"Copias impresas",Reference:"Referencia","Unique IP Views":"Visualizaciones IP \u00fanicas","XML Views":"Visualizaciones XML","Artifact Type":"Tipo de artefacto"},ru:{Abstract:"\u0410\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u044f","Abstract Views":"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u044b \u0430\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u0438","Affiliated Researchers":"\u0410\u0444\u0444\u0438\u043b\u0438\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0438\u0441\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u0438",Article:"\u0421\u0442\u0430\u0442\u044c\u044f","Artifact Summary":"\u041a\u0440\u0430\u0442\u043a\u0430\u044f \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0430 \u0430\u0440\u0442\u0435\u0444\u0430\u043a\u0442\u0430",Audio:"\u0410\u0443\u0434\u0438\u043e-\u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b",Bibliography:"\u0411\u0438\u0431\u043b\u0438\u043e\u0433\u0440\u0430\u0444\u0438\u044f",Blog:"\u0411\u043b\u043e\u0433",Blogs:"\u0411\u043b\u043e\u0433","Blog Mentions":"\u0423\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u044f \u0432 \u0431\u043b\u043e\u0433\u0430\u0445","Blog Post":"\u041f\u043e\u0441\u0442 \u0432 \u0431\u043b\u043e\u0433\u0435",Book:"\u041a\u043d\u0438\u0433\u0430","Book Chapter":"\u0413\u043b\u0430\u0432\u0430 \u043a\u043d\u0438\u0433\u0438",Bookmarks:"\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0438",Brief:"\u041a\u0440\u0430\u0442\u043a\u043e","Brochure / Pamphlet":"\u041f\u0440\u043e\u0441\u043f\u0435\u043a\u0442 / \u0431\u0440\u043e\u0448\u044e\u0440\u0430",Captures:"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f",Case:"\u041e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u0441\u043b\u0443\u0447\u0430\u0439",Catalogue:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433","Citation Indexes":"\u0423\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0438 \u0446\u0438\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0439",Citations:"\u0426\u0438\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f",Clicks:"\u041d\u0430\u0436\u0430\u0442\u0438\u044f","Clinical Citations":"\u0426\u0438\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0432 \u043a\u043b\u0438\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0445","Clinical Trial":"\u041a\u043b\u0438\u043d\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0438\u0441\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u0435",Code:"\u041a\u043e\u0434","Code / Software":"\u041f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u043d\u044b\u0439 \u043a\u043e\u0434",Collaborators:"\u041a\u043e\u043b\u043b\u0435\u0433\u0438",Collection:"\u041f\u043e\u0434\u0431\u043e\u0440\u043a\u0430",Commentary:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",Comments:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438","Conference Paper":"\u041d\u0430\u0443\u0447\u043d\u044b\u0439 \u0434\u043e\u043a\u043b\u0430\u0434",Correction:"\u0418\u0441\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435","Data Set":"\u041d\u0430\u0431\u043e\u0440 \u0434\u0430\u043d\u043d\u044b\u0445","Data Views":"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u044b \u0434\u0430\u043d\u043d\u044b\u0445","Design/Architecture":"\u0414\u0438\u0437\u0430\u0439\u043d / \u0430\u0440\u0445\u0438\u0442\u0435\u043a\u0442\u0443\u0440\u0430",Downloads:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0438","Economic Blog Mentions":"\u0423\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u044f \u0432 \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0431\u043b\u043e\u0433\u0430\u0445","Economics Blog Mentions":"\u0423\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u044f \u0432 \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0431\u043b\u043e\u0433\u0430\u0445","Economics Blogs":"\u0423\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u044f \u0432 \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0431\u043b\u043e\u0433\u0430\u0445",Editorial:"\u0420\u0435\u0434\u0430\u043a\u0442\u043e\u0440\u0441\u043a\u0430\u044f \u0441\u0442\u0430\u0442\u044c\u044f","Exhibition/Event":"\u0421\u043e\u0431\u044b\u0442\u0438\u0435 / \u0432\u044b\u0441\u0442\u0430\u0432\u043a\u0430","Exhibition / Event":"\u0421\u043e\u0431\u044b\u0442\u0438\u0435 / \u0432\u044b\u0441\u0442\u0430\u0432\u043a\u0430","Expert Opinion":"\u041c\u043d\u0435\u043d\u0438\u0435 \u044d\u043a\u0441\u043f\u0435\u0440\u0442\u043e\u0432","Exports-Saves":"\u042d\u043a\u0441\u043f\u043e\u0440\u0442\u044b / \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f",Favorites:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435",Figure:"\u0420\u0438\u0441\u0443\u043d\u043e\u043a","File Set":"\u041d\u0430\u0431\u043e\u0440 \u0444\u0430\u0439\u043b\u043e\u0432",Followers:"\u041f\u043e\u0434\u043f\u0438\u0441\u0447\u0438\u043a\u0438",Forks:"\u041a\u043e\u043f\u0438\u0438 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f","Forum Topic Count":"\u0421\u0447\u0435\u0442\u0447\u0438\u043a \u0442\u0435\u043c \u0444\u043e\u0440\u0443\u043c\u0430","Full Text Views":"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u044b \u043f\u043e\u043b\u043d\u043e\u0433\u043e \u0442\u0435\u043a\u0441\u0442\u0430",Gists:"Gists","Government Document":"\u041f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442",Grant:"\u0413\u0440\u0430\u043d\u0442",Guideline:"\u0420\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e",Holdings:"\u0412 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430\u0445","HTML Views":"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u044b HTML",Image:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",Interview:"\u0418\u043d\u0442\u0435\u0440\u0432\u044c\u044e",Issue:"\u041d\u043e\u043c\u0435\u0440",Journal:"\u0416\u0443\u0440\u043d\u0430\u043b","Learning Object":"\u041e\u0431\u044a\u0435\u043a\u0442 \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f","Lecture / Presentation":"\u041b\u0435\u043a\u0446\u0438\u044f / \u043f\u0440\u0435\u0437\u0435\u043d\u0442\u0430\u0446\u0438\u044f",Letter:"\u041f\u0438\u0441\u044c\u043c\u043e",Likes:"\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f","Link-outs":"\u0421\u0441\u044b\u043b\u043a\u0438 \u043d\u0430 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b",Links:"\u0421\u0441\u044b\u043b\u043a\u0438","Live Performance":"\u0416\u0438\u0432\u043e\u0435 \u0432\u044b\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u0435",Manuscript:"\u0420\u0443\u043a\u043e\u043f\u0438\u0441\u044c",Map:"\u041a\u0430\u0440\u0442\u0430",Media:"\u0412\u0438\u0434\u0435\u043e-, \u0430\u0443\u0434\u0438\u043e",Mentions:"\u0423\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u044f","Music Score":"\u041c\u0443\u0437\u044b\u043a\u0430\u043b\u044c\u043d\u043e\u0435 \u0441\u043e\u043f\u0440\u043e\u0432\u043e\u0436\u0434\u0435\u043d\u0438\u0435",News:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438","News Mentions":"\u0423\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u044f \u0432 \u043d\u043e\u0432\u043e\u0441\u0442\u044f\u0445",Newsletter:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0435 \u043f\u0438\u0441\u044c\u043c\u043e","No metrics available.":"\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0445 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0435\u0439.","Online Course":"\u041a\u0443\u0440\u0441 \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u043d\u043b\u0430\u0439\u043d",Other:"\u0414\u0440\u0443\u0433\u043e\u0435",Paper:"\u0421\u0442\u0430\u0442\u044c\u044f",Patent:"\u041f\u0430\u0442\u0435\u043d\u0442","Patent Citations":"\u0426\u0438\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0432 \u043f\u0430\u0442\u0435\u043d\u0442\u0430\u0445","PDF Views":"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u044b PDF",Plays:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u044b \u043c\u0435\u0434\u0438\u0430",Policy:"\u041f\u043e\u043b\u0438\u0441","Policy Citations":"\u0426\u0438\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0432 \u043f\u043e\u043b\u0438\u0441\u0430\u0445",Poster:"\u041f\u043e\u0441\u0442\u0435\u0440",Preprint:"\u041f\u0440\u0435\u043f\u0440\u0438\u043d\u0442",PrePrint:"\u041f\u0440\u0435\u043f\u0440\u0438\u043d\u0442",Presentation:"\u041f\u0440\u0435\u0437\u0435\u043d\u0442\u0430\u0446\u0438\u044f","Press Release":"\u041f\u0440\u0435\u0441\u0441-\u0440\u0435\u043b\u0438\u0437",Project:"\u041f\u0440\u043e\u0435\u043a\u0442",Ratings:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433",Readers:"\u0427\u0438\u0442\u0430\u0442\u0435\u043b\u0438","Recent Artifacts":"\u041d\u0435\u0434\u0430\u0432\u043d\u0438\u0435 \u0430\u0440\u0442\u0435\u0444\u0430\u043a\u0442\u044b",Recommendations:"\u00ab\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u044e\u00bb","Recorded Work":"\u0417\u0430\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0435 \u0440\u0430\u0431\u043e\u0442\u044b","Reference Entry":"\u0421\u0441\u044b\u043b\u043a\u0430",Report:"\u041e\u0442\u0447\u0435\u0442","Research Artifact":"\u0418\u0441\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u044c \u0430\u0440\u0442\u0435\u0444\u0430\u043a\u0442","Research Proposal":"\u041f\u043b\u0430\u043d \u0438\u0441\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u043d\u0438\u044f",Researchers:"\u0418\u0441\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u0438",Retraction:"\u041e\u043f\u0440\u043e\u0432\u0435\u0440\u0436\u0435\u043d\u0438\u0435",Reviews:"\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u0438",Review:"\u0420\u0435\u0434\u0430\u043a\u0446\u0438\u0438","Sample Downloads":"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043e\u0431\u0440\u0430\u0437\u0446\u043e\u0432",Scores:"\u0411\u0430\u043b\u043b\u044b",Score:"\u0411\u0430\u043b\u043b\u044b","see details":"\u0441\u043c. \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435",Shares:"\u041f\u043e\u0434\u0435\u043b\u0438\u043b\u0438\u0441\u044c","Shares, Likes & Comments":"\u041f\u043e\u0434\u0435\u043b\u0438\u043b\u0438\u0441\u044c, \u00ab\u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f\u00bb \u0438\u00a0\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438","Social Media":"\u0421\u043e\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u0435\u0442\u0438",Speech:"\u0412\u044b\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u0435",Standard:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442",Subscribers:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438","Supporting Data Views":"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u044b \u043e\u0431\u043e\u0441\u043d\u043e\u0432\u044b\u0432\u0430\u044e\u0449\u0438\u0445 \u0434\u0430\u043d\u043d\u044b\u0445",Syllabus:"\u041f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0430 \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f","Technical Documentation":"\u0422\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f","Textual Work":"\u0420\u0435\u0444\u0435\u0440\u0430\u0442","Thesis / Dissertation":"\u0422\u0435\u0437\u0438\u0441\u044b / \u0434\u0438\u0441\u0441\u0435\u0440\u0442\u0430\u0446\u0438\u043e\u043d\u043d\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430",Tweets:"\u0422\u0432\u0438\u0442\u044b",Unknown:"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u043e",Usage:"\u0421\u0442\u0435\u043f\u0435\u043d\u044c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f",Video:"\u0412\u0438\u0434\u0435\u043e-\u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b",Views:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u044b","Visual Arts":"\u0418\u0437\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0438\u0441\u043a\u0443\u0441\u0441\u0442\u0432\u043e",Volume:"\u0422\u043e\u043c",Watchers:"\u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435\u043b\u0438","Web Page":"\u0412\u0435\u0431-\u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430","Web Resource":"\u0412\u0435\u0431-\u0440\u0435\u0441\u0443\u0440\u0441","PlumX Metrics Detail Page":"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u044b\u0445 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u0435\u0439 PlumX","Artifact Type":"\u0422\u0438\u043f \u0430\u0440\u0442\u0435\u0444\u0430\u043a\u0442\u0430",Emails:"\u042d\u043b. \u043f\u0438\u0441\u044c\u043c\u0430","ePub Downloads":"\u0421\u043a\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u044f ePub","Exports/Saves":"\u042d\u043a\u0441\u043f\u043e\u0440\u0442\u044b / \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f",Exports:"\u042d\u043a\u0441\u043f\u043e\u0440\u0442\u044b",Saves:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f","Figure Views":"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u044b \u0440\u0438\u0441\u0443\u043d\u043a\u043e\u0432","Forum Topics":"\u0422\u0435\u043c\u044b \u0444\u043e\u0440\u0443\u043c\u043e\u0432",Groups:"\u0413\u0440\u0443\u043f\u043f\u044b","PDF Downloads":"\u0421\u043a\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u044f PDF","Print-outs":"\u0420\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u044b\u0432\u0430\u043d\u0438\u044f",Reference:"\u0418\u0441\u0442\u043e\u0447\u043d\u0438\u043a",References:"\u041f\u0440\u0438\u0441\u0442\u0430\u0442\u0435\u0439\u043d\u044b\u0435 \u0441\u0441\u044b\u043b\u043a\u0438","Unique IP Views":"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u044b \u0441 \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u043e\u0433\u043e IP-\u0430\u0434\u0440\u0435\u0441\u0430","XML Views":"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u044b XML"},jp:{Abstract:"\u6284\u9332","Abstract Views":"\u6284\u9332\u8868\u793a","Affiliated Researchers":"\u6240\u5c5e\u7814\u7a76\u8005",Article:"\u539f\u8457\u8ad6\u6587","Artifact Summary":"\u30a2\u30fc\u30c6\u30a3\u30d5\u30a1\u30af\u30c8\u306e\u8981\u65e8",Audio:"\u30aa\u30fc\u30c7\u30a3\u30aa",Bibliography:"\u6587\u732e\u76ee\u9332",Blog:"\u30d6\u30ed\u30b0",Blogs:"\u30d6\u30ed\u30b0","Blog Mentions":"\u30d6\u30ed\u30b0\u306e\u8a00\u53ca","Blog Post":"\u30d6\u30ed\u30b0\u8a18\u4e8b",Book:"\u66f8\u7c4d","Book Chapter":"\u66f8\u7c4d\u306e\u7ae0",Bookmarks:"\u30d6\u30c3\u30af\u30de\u30fc\u30af",Brief:"\u8981\u7d04","Brochure / Pamphlet":"\u30d1\u30f3\u30d5\u30ec\u30c3\u30c8",Captures:"\u30ad\u30e3\u30d7\u30c1\u30e3",Case:"\u4e8b\u4f8b",Catalogue:"\u30ab\u30bf\u30ed\u30b0","Citation Indexes":"\u88ab\u5f15\u7528\u6570",Citations:"\u88ab\u5f15\u7528\u6570",Clicks:"\u30af\u30ea\u30c3\u30af","Clinical Citations":"\u81e8\u5e8a\u88ab\u5f15\u7528\u6570","Clinical Trial":"\u81e8\u5e8a\u8a66\u9a13",Code:"\u30b3\u30fc\u30c9","Code / Software":"\u30b3\u30fc\u30c9/\u30bd\u30d5\u30c8\u30a6\u30a8\u30a2",Collaborators:"\u5171\u540c\u7814\u7a76\u8005",Collection:"\u30b3\u30ec\u30af\u30b7\u30e7\u30f3",Commentary:"\u8ad6\u8a55\u89e3\u8aac",Comments:"\u30b3\u30e1\u30f3\u30c8","Conference Paper":"\u4f1a\u8b70\u8ad6\u6587",Correction:"\u8a02\u6b63","Data Set":"\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8","Data Views":"\u30c7\u30fc\u30bf\u8868\u793a","Design/Architecture":"\u30c7\u30b6\u30a4\u30f3/\u5efa\u7bc9",Downloads:"\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9","Economic Blog Mentions":"\u7d4c\u6e08\u95a2\u9023\u30d6\u30ed\u30b0\u306e\u8a00\u53ca","Economics Blog Mentions":"\u7d4c\u6e08\u95a2\u9023\u30d6\u30ed\u30b0\u306e\u8a00\u53ca","Economics Blogs":"\u7d4c\u6e08\u95a2\u9023\u30d6\u30ed\u30b0\u306e\u8a00\u53ca",Editorial:"\u8ad6\u8aac","Exhibition/Event":"\u5c55\u793a/\u30a4\u30d9\u30f3\u30c8","Exhibition / Event":"\u5c55\u793a/\u30a4\u30d9\u30f3\u30c8","Expert Opinion":"\u5c02\u9580\u5bb6\u306e\u610f\u898b","Exports-Saves":"\u30a8\u30af\u30b9\u30dd\u30fc\u30c8/\u4fdd\u5b58",Favorites:"\u304a\u6c17\u306b\u5165\u308a",Figure:"\u56f3","File Set":"\u30d5\u30a1\u30a4\u30eb\u30bb\u30c3\u30c8",Followers:"\u30d5\u30a9\u30ed\u30a2\u30fc",Forks:"\u30d5\u30a9\u30fc\u30af","Forum Topic Count":"\u30d5\u30a9\u30fc\u30e9\u30e0\u30c8\u30d4\u30c3\u30af\u6570","Full Text Views":"\u30d5\u30eb\u30c6\u30ad\u30b9\u30c8\u8868\u793a",Gists:"\u30ae\u30b9\u30c8","Government Document":"\u516c\u6587\u66f8",Grant:"\u52a9\u6210",Guideline:"\u30ac\u30a4\u30c9\u30e9\u30a4\u30f3",Holdings:"\u6240\u8535","HTML Views":"HTML\u8868\u793a",Image:"\u753b\u50cf",Interview:"\u30a4\u30f3\u30bf\u30d3\u30e5\u30fc",Issue:"\u53f7",Journal:"\u30b8\u30e3\u30fc\u30ca\u30eb","Learning Object":"\u30e9\u30fc\u30cb\u30f3\u30b0\u30aa\u30d6\u30b8\u30a7\u30af\u30c8","Lecture / Presentation":"\u8b1b\u7fa9/\u30d7\u30ec\u30bc\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3",Letter:"\u7de8\u96c6\u8005\u3078\u306e\u624b\u7d19",Likes:"\u3044\u3044\u306d","Link-outs":"\u30ea\u30f3\u30af\u30a2\u30a6\u30c8",Links:"\u30ea\u30f3\u30af","Live Performance":"\u5b9f\u6f14",Manuscript:"\u539f\u7a3f",Map:"\u5730\u56f3",Media:"\u30e1\u30c7\u30a3\u30a2",Mentions:"\u8a00\u53ca","Music Score":"\u8b5c\u9762",News:"\u30cb\u30e5\u30fc\u30b9","News Mentions":"\u30cb\u30e5\u30fc\u30b9\u306e\u8a00\u53ca",Newsletter:"\u30cb\u30e5\u30fc\u30b9\u30ec\u30bf\u30fc","No metrics available.":"\u8a72\u5f53\u3059\u308b\u6307\u6a19\u304c\u3042\u308a\u307e\u305b\u3093\u3002","Online Course":"\u30aa\u30f3\u30e9\u30a4\u30f3\u8b1b\u5ea7",Other:"\u305d\u306e\u4ed6",Paper:"\u66f8\u985e",Patent:"\u7279\u8a31","Patent Citations":"\u7279\u8a31\u88ab\u5f15\u7528\u6570","PDF Views":"PDF\u8868\u793a",Plays:"\u518d\u751f",Policy:"\u30dd\u30ea\u30b7\u30fc","Policy Citations":"\u30dd\u30ea\u30b7\u30fc\u88ab\u5f15\u7528\u6570",Poster:"\u30dd\u30b9\u30bf\u30fc",Preprint:"\u30d7\u30ec\u30d7\u30ea\u30f3\u30c8",PrePrint:"\u30d7\u30ec\u30d7\u30ea\u30f3\u30c8",Presentation:"\u30d7\u30ec\u30bc\u30f3\u30c6\u30fc\u30b7\u30e7\u30f3","Press Release":"\u30d7\u30ec\u30b9\u30ea\u30ea\u30fc\u30b9",Project:"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8",Ratings:"\u8a55\u4fa1",Readers:"\u8aad\u8005","Recent Artifacts":"\u8fd1\u4ee3\u306e\u30a2\u30fc\u30c6\u30a3\u30d5\u30a1\u30af\u30c8",Recommendations:"\u63a8\u85a6","Recorded Work":"\u7814\u7a76\u8a18\u9332","Reference Entry":"\u53c2\u8003\u4e8b\u9805",References:"\u53c2\u8003\u6587\u732e",Report:"\u30ec\u30dd\u30fc\u30c8","Research Artifact":"\u7814\u7a76\u5bfe\u8c61\u30a2\u30fc\u30c6\u30a3\u30d5\u30a1\u30af\u30c8","Research Proposal":"\u7814\u7a76\u4f01\u753b",Researchers:"\u7814\u7a76\u8005",Retraction:"\u53d6\u6d88\u3057",Reviews:"\u30ec\u30d3\u30e5\u30fc\u8ad6\u6587",Review:"\u30ec\u30d3\u30e5\u30fc\u8ad6\u6587","Sample Downloads":"\u30b5\u30f3\u30d7\u30eb\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9",Scores:"\u30b9\u30b3\u30a2",Score:"\u30b9\u30b3\u30a2","see details":"\u8a73\u7d30\u3092\u53c2\u7167",Shares:"\u5171\u6709","Shares, Likes & Comments":"\u30b7\u30a7\u30a2\u3001\u3044\u3044\u306d\u3001\u00a0\u30b3\u30e1\u30f3\u30c8","Social Media":"\u30bd\u30fc\u30b7\u30e3\u30eb\u30e1\u30c7\u30a3\u30a2",Speech:"\u30b9\u30d4\u30fc\u30c1",Standard:"\u57fa\u6e96",Subscribers:"\u8cfc\u8aad\u8005","Supporting Data Views":"\u6dfb\u4ed8\u8cc7\u6599\u8868\u793a",Syllabus:"\u30b7\u30e9\u30d0\u30b9","Technical Documentation":"\u6280\u8853\u6587\u66f8","Textual Work":"\u539f\u6587\u66f8\u985e","Thesis / Dissertation":"\u5b66\u4f4d\u8ad6\u6587",Tweets:"\u30c4\u30a4\u30fc\u30c8",Unknown:"\u4e0d\u660e",Usage:"\u5229\u7528",Video:"\u6620\u50cf",Views:"\u8868\u793a","Visual Arts":"\u8996\u899a\u82b8\u8853",Volume:"\u5dfb",Watchers:"\u30a6\u30a9\u30c3\u30c1\u30e3\u30fc","Web Page":"\u30a6\u30a7\u30d6\u30da\u30fc\u30b8","Web Resource":"\u30a6\u30a7\u30d6\u8cc7\u6e90","PlumX Metrics Detail Page":"PlumX\u6307\u6a19\u8a73\u7d30\u30da\u30fc\u30b8","Artifact Type":"\u30a2\u30fc\u30c6\u30a3\u30d5\u30a1\u30af\u30c8\u30bf\u30a4\u30d7",Emails:"E-mail","ePub Downloads":"ePub\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9","Exports/Saves":"\u30a8\u30ad\u30b9\u30dd\u30fc\u30c8/\u4fdd\u5b58",Exports:"\u30a8\u30ad\u30b9\u30dd\u30fc\u30c8",Saves:"\u4fdd\u5b58","Figure Views":"\u56f3\u8868\u793a","Forum Topics":"\u30d5\u30a9\u30fc\u30e9\u30e0\u30c8\u30d4\u30c3\u30af",Groups:"\u30b0\u30eb\u30fc\u30d7","PDF Downloads":"PDF\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9","Print-outs":"\u30d7\u30ea\u30f3\u30c8\u30a2\u30a6\u30c8",Reference:"\u53c2\u8003\u6587\u732e","Unique IP Views":"\u56fa\u6709IP\u8868\u793a","XML Views":"XML\u8868\u793a"},cn:{Abstract:"\u6458\u8981","Abstract Views":"\u6458\u8981\u6d4f\u89c8\u6b21\u6570","Affiliated Researchers":"\u9644\u5c5e\u7814\u7a76\u4eba\u5458",Article:"\u6587\u7ae0","Artifact Summary":"\u4eba\u5de5\u5236\u54c1\u6982\u8ff0",Audio:"\u97f3\u9891",Bibliography:"\u53c2\u8003\u4e66\u76ee",Blog:"\u535a\u5ba2",Blogs:"\u535a\u5ba2","Blog Mentions":"\u535a\u5ba2\u63d0\u8ff0","Blog Post":"\u535a\u5ba2\u6587\u7ae0",Book:"\u4e66\u7c4d","Book Chapter":"\u4e66\u7c4d\u7ae0\u8282",Bookmarks:"\u4e66\u7b7e",Brief:"\u6982\u8981","Brochure / Pamphlet":"\u5ba3\u4f20\u518c/\u5c0f\u518c\u5b50",Captures:"\u6355\u83b7",Case:"\u6848\u4f8b",Catalogue:"\u76ee\u5f55","Citation Indexes":"\u5f15\u7528\u7d22\u5f15",Citations:"\u5f15\u6587",Clicks:"\u70b9\u51fb\u91cf","Clinical Citations":"\u4e34\u5e8a\u5f15\u7528","Clinical Trial":"\u4e34\u5e8a\u8bd5\u9a8c",Code:"\u4ee3\u7801","Code / Software":"\u4ee3\u7801/\u8f6f\u4ef6",Collaborators:"\u5408\u4f5c\u8005",Collection:"\u96c6\u5408",Commentary:"\u6ce8\u91ca",Comments:"\u8bc4\u8bba","Conference Paper":"\u4f1a\u8bae\u6587\u4ef6",Correction:"\u4fee\u6b63","Data Set":"\u6570\u636e\u96c6","Data Views":"\u6570\u636e\u89c6\u56fe","Design/Architecture":"\u8bbe\u8ba1/\u67b6\u6784",Downloads:"\u4e0b\u8f7d\u91cf","Economic Blog Mentions":"\u7ecf\u6d4e\u535a\u5ba2\u63d0\u8ff0","Economics Blog Mentions":"\u7ecf\u6d4e\u535a\u5ba2\u63d0\u8ff0","Economics Blogs":"\u7ecf\u6d4e\u535a\u5ba2\u63d0\u8ff0",Editorial:"\u793e\u8bba","Exhibition/Event":"\u5c55\u89c8/\u4e8b\u4ef6","Exhibition / Event":"\u5c55\u89c8/\u4e8b\u4ef6","Expert Opinion":"\u4e13\u5bb6\u610f\u89c1","Exports-Saves":"\u5bfc\u51fa/\u4fdd\u5b58",Favorites:"\u6536\u85cf",Figure:"\u56fe\u5f62","File Set":"\u6587\u4ef6\u96c6",Followers:"\u7c89\u4e1d",Forks:"\u590d\u5236\u5e93","Forum Topic Count":"\u8bba\u575b\u8bdd\u9898\u8ba1\u6570","Full Text Views":"\u5168\u6587\u6d4f\u89c8\u6b21\u6570",Gists:"Gist","Government Document":"\u653f\u5e9c\u6587\u4ef6",Grant:"\u62e8\u6b3e",Guideline:"\u6307\u5357",Holdings:"\u4fdd\u5b58\u6570","HTML Views":"HTML \u6d4f\u89c8\u6b21\u6570",Image:"\u56fe\u50cf",Interview:"\u8bbf\u8c08",Issue:"\u671f",Journal:"\u671f\u520a","Learning Object":"\u5b66\u4e60\u5bf9\u8c61","Lecture / Presentation":"\u8bb2\u5ea7/\u5c55\u793a",Letter:"\u4fe1\u4ef6",Likes:"\u70b9\u8d5e","Link-outs":"\u5916\u90e8\u94fe\u63a5",Links:"\u94fe\u63a5","Live Performance":"\u5b9e\u51b5\u6f14\u51fa",Manuscript:"\u624b\u7a3f",Map:"\u5730\u56fe",Media:"\u5a92\u4f53",Mentions:"\u63d0\u8ff0","Music Score":"\u4e50\u8c31",News:"\u65b0\u95fb","News Mentions":"\u65b0\u95fb\u63d0\u8ff0",Newsletter:"\u7b80\u8baf","No metrics available.":"\u6ca1\u6709\u53ef\u7528\u7684\u6307\u6807\u3002","Online Course":"\u5728\u7ebf\u8bfe\u7a0b",Other:"\u5176\u4ed6",Paper:"\u8bba\u6587",Patent:"\u4e13\u5229","Patent Citations":"\u4e13\u5229\u5f15\u7528","PDF Views":"PDF \u6d4f\u89c8\u6b21\u6570",Plays:"\u64ad\u653e\u6b21\u6570",Policy:"\u653f\u7b56","Policy Citations":"\u653f\u7b56\u5f15\u7528",Poster:"\u6d77\u62a5",Preprint:"\u9884\u5370\u4ef6",PrePrint:"\u9884\u5370\u4ef6",Presentation:"\u5c55\u793a","Press Release":"\u65b0\u95fb\u7a3f",Project:"\u9879\u76ee",Ratings:"\u8bc4\u5206",Readers:"\u8bfb\u8005","Recent Artifacts":"\u6700\u8fd1\u7684\u4eba\u5de5\u5236\u54c1",Recommendations:"\u63a8\u8350","Recorded Work":"\u8bb0\u5f55\u7684\u5de5\u4f5c","Reference Entry":"\u53c2\u8003\u6761\u76ee",References:"\u53c2\u8003\u6587\u732e",Report:"\u62a5\u544a","Research Artifact":"\u7814\u7a76\u4eba\u5de5\u5236\u54c1","Research Proposal":"\u7814\u7a76\u8ba1\u5212",Researchers:"\u7814\u7a76\u4eba\u5458",Retraction:"\u64a4\u9500",Review:"\u8bc4\u8bba",Reviews:"\u8bc4\u8bba","Sample Downloads":"\u6837\u672c\u4e0b\u8f7d\u6b21\u6570",Scores:"\u5f97\u5206",Score:"\u5f97\u5206","see details":"\u67e5\u770b\u8be6\u60c5",Shares:"\u5206\u4eab","Shares, Likes & Comments":"\u5206\u4eab\u3001\u70b9\u8d5e\u53ca\u00a0\u8bc4\u8bba","Social Media":"\u793e\u4ea4\u5a92\u4f53",Speech:"\u6f14\u8bb2",Standard:"\u6807\u51c6",Subscribers:"\u6ce8\u518c\u7528\u6237","Supporting Data Views":"\u652f\u6301\u6570\u636e\u6d4f\u89c8\u6b21\u6570",Syllabus:"\u6559\u5b66\u5927\u7eb2","Technical Documentation":"\u6280\u672f\u6587\u6863","Textual Work":"\u6587\u5b57\u4f5c\u54c1","Thesis / Dissertation":"\u8bba\u6587/\u5b66\u4f4d\u8bba\u6587",Tweets:"\u63a8\u6587",Unknown:"\u672a\u77e5",Usage:"\u4f7f\u7528",Video:"\u89c6\u9891",Views:"\u6d4f\u89c8\u6b21\u6570","Visual Arts":"\u89c6\u89c9\u827a\u672f",Volume:"\u5377",Watchers:"\u89c2\u5bdf\u8005","Web Page":"\u7f51\u9875","Web Resource":"\u7f51\u7edc\u8d44\u6e90","PlumX Metrics Detail Page":"PlumX \u6307\u6807\u8be6\u7ec6\u4fe1\u606f\u9875\u9762","Artifact Type":"\u4eba\u5de5\u5236\u54c1\u7c7b\u578b",Emails:"\u7535\u5b50\u90ae\u4ef6","ePub Downloads":"ePub \u4e0b\u8f7d","Exports/Saves":"\u5bfc\u51fa/\u4fdd\u5b58",Exports:"\u5bfc\u51fa",Saves:"\u4fdd\u5b58","Figure Views":"\u56fe\u7247\u89c6\u56fe","Forum Topics":"\u8bba\u575b\u4e3b\u9898",Groups:"\u5206\u7ec4","PDF Downloads":"PDF \u4e0b\u8f7d","Print-outs":"\u6253\u5370\u8f93\u51fa",Reference:"\u53c2\u8003\u6587\u732e","Unique IP Views":"\u552f\u4e00 IP \u89c6\u56fe","XML Views":"XML \u89c6\u56fe"},tw:{Abstract:"\u6458\u8981","Abstract Views":"\u6458\u8981\u6aa2\u8996","Affiliated Researchers":"\u5de5\u85dd\u54c1\u7814\u7a76\u4eba\u54e1",Article:"\u6587\u7ae0","Artifact Summary":"\u5de5\u85dd\u54c1\u6458\u8981",Audio:"\u97f3\u8a0a",Bibliography:"\u53c3\u8003\u66f8\u76ee",Blog:"\u90e8\u843d\u683c",Blogs:"\u90e8\u843d\u683c","Blog Mentions":"\u90e8\u843d\u683c\u63d0\u53ca\u6b21\u6578","Blog Post":"\u90e8\u843d\u683c\u8cbc\u6587",Book:"\u66f8\u7c4d","Book Chapter":"\u66f8\u7c4d\u7ae0\u7bc0",Bookmarks:"\u66f8\u7c64",Brief:"\u7c21\u4ecb","Brochure / Pamphlet":"\u624b\u518a/\u5c0f\u624b\u518a",Captures:"\u64f7\u53d6\u6b21\u6578",Case:"\u6848\u4f8b",Catalogue:"\u76ee\u9304","Citation Indexes":"\u5f15\u7528\u7d22\u5f15",Citations:"\u5f15\u7528\u60c5\u6cc1",Clicks:"\u9ede\u64ca\u6b21\u6578","Clinical Citations":"\u81e8\u5e8a\u5f15\u7528\u6b21\u6578","Clinical Trial":"\u81e8\u5e8a\u8a66\u9a57",Code:"\u4ee3\u78bc","Code / Software":"\u7a0b\u5f0f\u78bc/\u8edf\u9ad4",Collaborators:"\u5408\u4f5c\u8005",Collection:"\u96c6\u5408",Commentary:"\u8a55\u8ad6",Comments:"\u8a55\u8ad6","Conference Paper":"\u7814\u8a0e\u6703\u8ad6\u6587",Correction:"\u4fee\u6b63","Data Set":"\u8cc7\u6599\u96c6","Data Views":"\u8cc7\u6599\u6aa2\u8996","Design/Architecture":"\u8a2d\u8a08/\u67b6\u69cb",Downloads:"\u4e0b\u8f09\u6b21\u6578","Economic Blog Mentions":"\u7d93\u6fdf\u90e8\u843d\u683c\u63d0\u53ca\u6b21\u6578","Economics Blog Mentions":"\u7d93\u6fdf\u90e8\u843d\u683c\u63d0\u53ca\u6b21\u6578","Economics Blogs":"\u7d93\u6fdf\u90e8\u843d\u683c\u63d0\u53ca\u6b21\u6578",Editorial:"\u7de8\u8f2f","Exhibition/Event":"\u5c55\u89bd/\u6d3b\u52d5","Exhibition / Event":"\u5c55\u89bd/\u6d3b\u52d5","Expert Opinion":"\u5c08\u5bb6\u610f\u898b","Exports-Saves":"\u532f\u51fa/\u5132\u5b58",Favorites:"\u6211\u7684\u6700\u611b",Figure:"\u6578\u5b57","File Set":"\u6a94\u6848\u96c6\u5408",Followers:"\u8ffd\u8e64\u8005",Forks:"Fork","Forum Topic Count":"\u8ad6\u58c7\u4e3b\u984c\u8a08\u6578","Full Text Views":"\u5168\u6587\u6aa2\u8996",Gists:"Gists","Government Document":"\u653f\u5e9c\u6587\u4ef6",Grant:"\u88dc\u52a9\u91d1",Guideline:"\u6307\u5357",Holdings:"\u5305\u542b\u5167\u5bb9","HTML Views":"HTML \u6aa2\u8996",Image:"\u5716\u50cf",Interview:"\u8a2a\u8ac7",Issue:"\u554f\u984c",Journal:"\u65e5\u8a8c","Learning Object":"\u5b78\u7fd2\u76ee\u6a19","Lecture / Presentation":"\u6f14\u8b1b/\u7c21\u5831",Letter:"\u4fe1\u51fd",Likes:"\u8b9a","Link-outs":"\u5c0d\u5916\u9023\u7d50",Links:"\u9023\u7d50","Live Performance":"\u73fe\u5834\u8868\u73fe",Manuscript:"\u624b\u7a3f",Map:"\u5730\u5716",Media:"\u5a92\u9ad4",Mentions:"\u63d0\u53ca\u6b21\u6578","Music Score":"\u6a02\u8b5c",News:"\u65b0\u805e","News Mentions":"\u65b0\u805e\u63d0\u53ca\u6b21\u6578",Newsletter:"\u65b0\u805e\u7c21\u8a0a","No metrics available.":"\u6c92\u6709\u53ef\u7528\u7684\u6e2c\u91cf\u6307\u6a19\u3002","Online Course":"\u7dda\u4e0a\u8ab2\u7a0b",Other:"\u5176\u4ed6",Paper:"\u66f8\u9762",Patent:"\u5c08\u5229","Patent Citations":"\u5c08\u5229\u5f15\u7528\u6b21\u6578","PDF Views":"PDF \u6aa2\u8996",Plays:"\u64ad\u653e\u6b21\u6578",Policy:"\u653f\u7b56","Policy Citations":"\u653f\u7b56\u5f15\u7528\u6b21\u6578",Poster:"\u6d77\u5831",Preprint:"\u9810\u5370\u672c",PrePrint:"\u9810\u5370\u672c",Presentation:"\u7c21\u5831","Press Release":"\u65b0\u805e\u7a3f",Project:"\u5c08\u6848",Ratings:"\u8a55\u7d1a",Readers:"\u8b80\u8005","Recent Artifacts":"\u6700\u8fd1\u7684\u5de5\u85dd\u54c1",Recommendations:"\u63a8\u85a6","Recorded Work":"\u8a18\u9304\u7684\u5de5\u4f5c","Reference Entry":"\u53c3\u8003\u9805\u76ee",References:"\u53c2\u8003\u6587\u732e",Report:"\u5831\u544a","Research Artifact":"\u7814\u7a76\u5de5\u85dd\u54c1","Research Proposal":"\u7814\u7a76\u63d0\u6848",Researchers:"\u7814\u7a76\u4eba\u54e1",Retraction:"\u64a4\u56de",Reviews:"\u8a55\u8ad6",Review:"\u8a55\u8ad6","Sample Downloads":"\u7bc4\u4f8b\u4e0b\u8f09",Scores:"\u5206\u6578",Score:"\u5206\u6578","see details":"\u8acb\u53c3\u95b1\u8a73\u7d30\u8cc7\u6599",Shares:"\u5206\u4eab","Shares, Likes & Comments":"\u5206\u4eab\u3001\u8b9a &\u00a0\u8a55\u8ad6","Social Media":"\u793e\u4ea4\u5a92\u9ad4",Speech:"\u6f14\u8b1b",Standard:"\u6a19\u6e96",Subscribers:"\u8a02\u95b1\u8005","Supporting Data Views":"\u4f50\u8b49\u8cc7\u6599\u6aa2\u8996",Syllabus:"\u5927\u7db1","Technical Documentation":"\u6280\u8853\u6587\u4ef6","Textual Work":"\u6587\u5b57\u5de5\u4f5c","Thesis / Dissertation":"\u547d\u984c/\u8ad6\u6587",Tweets:"\u63a8\u6587",Unknown:"\u672a\u77e5\u7684",Usage:"\u4f7f\u7528\u91cf",Video:"\u8996\u8a0a",Views:"\u6aa2\u8996","Visual Arts":"\u8996\u89ba\u85dd\u8853",Volume:"\u97f3\u91cf",Watchers:"\u89c0\u5bdf\u8005","Web Page":"\u7db2\u9801","Web Resource":"\u7db2\u9801\u8cc7\u6e90","PlumX Metrics Detail Page":"PlumX \u6e2c\u91cf\u6307\u6a19\u8a73\u7d30\u8cc7\u6599\u9801\u9762","Artifact Type":"\u624b\u5de5\u85dd\u54c1\u985e\u578b",Emails:"\u96fb\u5b50\u90f5\u7bb1","ePub Downloads":"ePub \u4e0b\u8f09","Exports/Saves":"\u532f\u51fa/\u5132\u5b58",Exports:"\u532f\u51fa",Saves:"\u5132\u5b58","Figure Views":"\u5716\u6848\u6aa2\u8996","Forum Topics":"\u8ad6\u58c7\u4e3b\u984c",Groups:"\u7fa4\u7d44","PDF Downloads":"PDF \u4e0b\u8f09","Print-outs":"\u5217\u5370",Reference:"\u53c3\u8003\u6587\u737b","Unique IP Views":"\u7279\u6709\u7684 IP \u6aa2\u8996","XML Views":"XML \u6aa2\u8996"}}},{}],15:[function(c,q,p){var g,l,m,f,a,b,d,k,h,e,s,r=[].indexOf||function(a){for(var b=0,d=this.length;b<d;b++)if(b in this&&this[b]===a)return b;return-1},n=function(a,b){return function(){return a.apply(b,arguments)}};p=c("./loader");b=c("./util");g=c("./config");e=c("./dom");a=c("./translation");s=p.whenReady(function(a){return s=a});m=["plum-sciencedirect-theme","plum-bigben-theme"];l=["Usage","Captures","Mentions","Social Media","Citations"];k=b.categoryClass;h=function(a,b,d){var c,f,h,g;null==d&&(d=function(a){return a});c=k(a);g=e.div({"class":"pps-title",text:d(a)});h=e.ul();for(f in b)a=b[f],h.append(e.li({"class":c}).append(e.span({"class":"pps-label",text:d(f)+": "})).append(e.span({"class":"pps-count",text:a})));return e.div({"class":c}).append(g).append(h)};d=function(a,b,d){var c;null==a&&(a="vertical");c=g.staticImagesUrl;c=0<=r.call(m,d)?c+"plumx-logo.png":"vertical"===a?c+"plumx-inverse-logo.png":c+"plumx-logo.png";d=e.div({"class":"pps-branding"}).append(e.img({src:c,"class":"plx-logo"}));"horizontal"===a&&!b&&d.append(e.span({text:" - "}));return d};f=function(){function b(d){this.horizontalFooter=n(this.horizontalFooter,this);this.seeMoreFooter=n(this.seeMoreFooter,this);this.seeMore=n(this.seeMore,this);this.containerClass=n(this.containerClass,this);this.scaffold=n(this.scaffold,this);this.printColumn=n(this.printColumn,this);var e,c,f,h;this.href=d.href;this.orientation=d.orientation||"vertical";this.summary=d.summary;this.print=d.print;this.isEmpty=s.isEmptyObject(this.summary);this.hasPrint=null!=this.print;this.noLink=d.noLink;this.themeClass=null;"themeClass"in d&&(this.themeClass=d.themeClass,this.href+="&theme="+d.themeClass);if("passHiddenCategories"in d){c="hideCitations hideSocialmedia hideUsage hideMentions hideCaptures hideRatings".split(" ");f=0;for(h=c.length;f<h;f++)e=c[f],e in d&&(this.href=this.href+"&"+e+"=true")}this.isEmpty&&!this.hasPrint&&(this.orientation="vertical");this.translation=new a(d.lang);this.trans=function(a){return function(b){return a.translation.translate(b)}}(this);this.scaffold(d)}b.prototype.printColumn=function(){var a;a=this.noLink?e.a({"class":"plx-wrapping-print-link",href:"javascript:void(0)",title:this.trans("PlumX Metrics Detail Page")}):e.a({"class":"plx-wrapping-print-link",href:this.href,title:this.trans("PlumX Metrics Detail Page")});return e.div({"class":"pps-col plx-plum"}).append(a.append(e.div({"class":"plx-print"}).append(this.print)))};b.prototype.categoryColumn=function(a,b){var d;d=k(a);return e.div({"class":"pps-col "+d}).append(h(a,b,this.trans))};b.prototype.emptyColumn=function(){return e.div({"class":"pps-col pps-col-empty",text:this.trans("No metrics available.")})};b.prototype.scaffold=function(a){var b,c,f,h,k,g,m,n;n=e.div({"class":"PlumX-Summary"});f=e.div({"class":this.containerClass()});c=e.div({"class":"pps-cols"});f.append(d().addClass("pps-branding-top"));this.hasPrint&&c.append(this.printColumn());k=0;for(g=l.length;k<g;k++)b=l[k],m=this.summary[b],h="hide"+b.charAt(0)+b.substr(1).toLowerCase().replace(" ",""),s.isEmptyObject(m)||!0!==a[h]&&c.append(this.categoryColumn(b,m));this.isEmpty&&c.append(this.emptyColumn());f.append(c);"horizontal"===this.orientation?f.append(this.horizontalFooter()):f.append(this.seeMoreFooter());this.element=n.append(f);this.themeClass&&(this.element=e.div({"class":this.themeClass}).append(n));return this.container=f};b.prototype.containerClass=function(){var a;a=[];a.push("pps-container");a.push("pps-container-"+this.orientation);this.isEmpty&&a.push("plx-is-empty");this.hasPrint||a.push("plx-no-print");return a.join(" ")};b.prototype.seeMore=function(){var a;(a=this.themeClass,0<=r.call(m,a))?(a=this.trans("View details"),a+='<svg fill="currentColor" tabindex="-1" focusable="false" width="16" height="16" viewBox="0 0 16 16" class="svg-arrow"><path d="M16 4.452l-1.26-1.26L8 9.932l-6.74-6.74L0 4.452l8 8 8-8z"></path></svg>'):a=this.trans("see details");return e.a({href:this.href,"class":"pps-seemore"}).attr("title",this.trans("PlumX Metrics Detail Page")).append(a)};b.prototype.seeMoreFooter=function(){return this.noLink?e.div().append(d("vertical",this.noLink,this.themeClass).addClass("pps-branding-bottom")):e.div().append(d("vertical",this.noLink,this.themeClass).addClass("pps-branding-bottom")).append(this.seeMore())};b.prototype.horizontalFooter=function(){return this.noLink?e.div().append(d("horizontal",this.noLink,this.themeClass)):e.div().append(d("horizontal",this.noLink,this.themeClass)).append(this.seeMore())};return b}();q.exports=function(a){return(new f(a)).element}},{"./config":3,"./dom":4,"./loader":7,"./translation":16,"./util":17}],16:[function(c,q,p){var g,l;l=c("./stringLibrary");g="en";c=function(){function c(f,a){this.language=null!=f?f:g;this.options=null!=a?a:{};this.stringLib=l;this.notDefaultLanguage=this.language!==g;this.stringLib.hasOwnProperty(g)||(this.stringLib[g]={});this}c.prototype.translate=function(c){return!this.notDefaultLanguage?c:this.dictionary().hasOwnProperty(c)&&this.dictionary()[c].length?this.dictionary()[c]:c};c.prototype.dictionary=function(){return this.stringLib.hasOwnProperty(this.language)?this.stringLib[this.language]:this.stringLib[g]};return c}();q.exports=c},{"./stringLibrary":14}],17:[function(c,q,p){var g,l,m,f;f=c("./loader").whenReady(function(a){return f=a});l=function(a){a=a.split("&");a=f.map(a,function(a){return[a.split("=",2)]});a=f.grep(a,function(a){return"ebsco-client"!==a[0]});a=a[0];return{type:a[0],id:a[1]}};m=function(a){a=a.split("/");return{type:"plumx_id",id:a[a.length-1]}};g={globalNS:function(a,b){var d,c,f,e,g;d=window;g=a.split(".");c=0;for(f=g.length;c<f;c++)e=g[c],d[e]||(d[e]={}),d=d[e];b&&b(d);return d},hasGlobalNS:function(a){var b,d,c,f;b=window;f=a.split(".");a=0;for(d=f.length;a<d;a++)if(c=f[a],c in b)b=b[c];else return!1;return!0},withGlobalNS:function(a,b){return g.hasGlobalNS(a)?!1:g.globalNS(a,b)},camelize:function(a){a=a.split(" ");a[0]=a[0].toLowerCase();return g.singularize(a.join(""))},singularize:function(a){return a.replace(/s$/,"")},camelizeKeys:function(a){var b,d,c,f;d={};for(b in a)f=a[b],c=g.singularize(g.camelize(b)),d[c]=f;return d},shortenKeys:function(a){var b,d,c;d={};for(b in a)c=a[b],d[b.substr(0,2)]=c;return d},chunk:function(a,b){var d,c,f,e;e=[];f=Math.ceil(a.length/b);for(d=c=0;0<=f?c<f:c>f;d=0<=f?++c:--c)e.push(a.slice(d*b,(d+1)*b));return e},categoryClass:function(a){return"plx-"+g.singularize(g.camelize(a))},artifactIdFromUrl:function(a){a=a.split("?",2);return 1<a.length?l(a[1]):m(a[0])},isSitePrefixed:function(a){a=a.split("/");return-1!==["u","a","g","grant"].indexOf(a[4])},resourceIdFromUrl:function(a){var b;b=a.split("?");if(1<b.length)return b=b[1].split("="),a=b[0],b=b[1],{type:a,id:b};b=g.isSitePrefixed(a)?5:4;b=a.split("/").slice(b).join(".");return{type:"plumx_id",id:b}},grantIdFromUrl:function(a){a=a.split("/");return{type:"plumx_id",id:a[a.length-1]}},guid:function(){var a,b;a=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};b=function(){return a()+a()};return[b(),a(),a(),a(),a(),b()+a()].join("-")},splitLabels:function(a){return function(a,c){null==c&&(c=function(a){return a});a=a.split(" - ");return 1===a.length?c(a[0]):2===a.length?[c(a[0]),c(a[1])].join(" - "):c(a.join(" - "))}}(this),handleThemeClass:function(a){var b;b=null;a=a.attr("class").match(/plum\-[^\s]*\-theme/);null!==a&&(b=a[0]);return b},sortObject:function(a){return Object.keys(a).sort().reduce(function(b,c){b[c]=a[c];return b},{})}};q.exports=g},{"./loader":7}],18:[function(c,q,p){var g,l,m=function(c,a){return function(){return c.apply(a,arguments)}};g=c("./util");p=function(c){return g.resourceIdFromUrl(c.href)};c=function(c){return g.grantIdFromUrl(c.href)};c=function(c){return{type:"plumx_id",id:c.href.split("/").pop()}};l={artifact:function(c){return g.artifactIdFromUrl(c.href)},group:function(c){return c.gp?{type:"plumx_id",id:c.gp}:g.resourceIdFromUrl(c.href)},grant:c,researcher:p,person:p};c=function(){function c(a,b){this.placeholder=a;this.resourceType=b;this.getOptions=m(this.getOptions,this);this.getParams=m(this.getParams,this);this.widget=this.getOptions();this.request=this.getParams()}c.prototype.getParams=function(){var a,b,c,f;b=l[this.resourceType](this.widget);c=this.widget;for(a in c)f=c[a],b[a]=f;b.ref=document.referrer;delete b.gp;return b};c.prototype.getOptions=function(){var a;a=g.sortObject(this.placeholder.data());a.href=this.placeholder.attr("href");return a};return c}();q.exports=c},{"./util":17}],19:[function(c,q,p){var g,l,m,f,a,b,d,k,h,e,s=function(a,b){return function(){return a.apply(b,arguments)}},r=function(a,b){function c(){this.constructor=a}for(var d in b)n.call(b,d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a},n={}.hasOwnProperty;l=c("./lib/loader");g=c("./lib/artifact");a=c("./lib/plumprint");d=c("./lib/summary");q=c("./lib/handler");k=c("./lib/util");m=c("./lib/widget_options");c("./lib/events");f=c("./lib/page_token");h=l.whenReady(function(a){return h=a});b=function(b){function c(){this.fail=s(this.fail,this);this.empty=s(this.empty,this);this.stats=s(this.stats,this);return c.__super__.constructor.apply(this,arguments)}r(c,b);c.prototype.renderer=d;c.prototype.stats=function(b){var c;c={summary:b.summary(this.options)};this.options.hidePrint||(c.print=a["for"](b.aggrCounts(),this.options));return this.render(h.extend({},this.options,c))};c.prototype.empty=function(){var b;if(this.options.hideWhenEmpty)return this.remove();b={summary:{}};this.options.hidePrint||(b.print=a.empty());return this.render(h.extend({},this.options,b))};c.prototype.fail=function(){return this.remove()};return c}(q);e=function(){return h(".plumx-summary").each(function(){var a,c,d;a=h(this);c=new m(a,"artifact");c.request.widget="summary";c.request.pageToken=f;c.request.isElsWidget=!1;d=k.handleThemeClass(a);null!==d&&(c.request.isElsWidget=!0,c.widget.themeClass=d,c.request.theme=d);a=new b(a,c.widget);return(new g(a,c.widget)).fetch(c.request)})};k.withGlobalNS("__plumX.widgets.summary",function(a){a.wireUp=e;return l.whenReady(e)})},{"./lib/artifact":1,"./lib/events":5,"./lib/handler":6,"./lib/loader":7,"./lib/page_token":9,"./lib/plumprint":10,"./lib/summary":15,"./lib/util":17,"./lib/widget_options":18}]},{},[19]);var app=app||{};var DeanDashboardModel=Backbone.Model.extend({url:"/search/deandashboard/fetchdata.url",displayurl:"/search/deandashboard/display.url",defaults:{"request":{},"affiliation":{},"response":{"docCount":0,}}});var DeanDashboardView=BaseFeatureView.extend({template:_.template($('#ev-DeanDashboard-template').html()),el:'#ev-deandashboard-content',$orgTitle:$('#ev-deandashboard-title > h1'),affilId:"",startYear:"",endYear:"",subArea:"",orgName:"Organization Name",initialize:function(){Highcharts.convertChart=function(dd){dd.drawDDChart();};},events:{"click #ev-ddFilterBtn":"applyFilter"},render:function(){var self=this;window.document.title="Engineering Village - Dean Dashboard";$(self.el).html(this.template());$('#ev-deandashboard-container').show();self.affilId=self.getURLParamByName("affilId",window.location.href);self.startYear=self.getURLParamByName("startYear",window.location.href);self.endYear=self.getURLParamByName("endYear",window.location.href);self.subArea=self.getURLParamByName("subArea",window.location.href);self.submitSearch();$(self.el).find("#ev-dd-preset-year-filter select").select2({minimumResultsForSearch:Infinity,width:'91%'});$(self.el).find("#ev-dd-year-filter select").select2({minimumResultsForSearch:Infinity,width:'42%'});$(self.el).find("#ev-dd-subject-area-filter select").select2({minimumResultsForSearch:Infinity,width:'90%'});$("#ev-afId").autocomplete({source:function(request,response){$.ajax({url:'/autocomplete/affil.url?affilText='+request.term,data:{term:request.term},success:function(data){response($.map(data,function(item){return{label:item.affilName,affilId:item.affilId}}))}});},minLength:3,select:function(event,ui){window.console.info("Selected affilId: "+ui.item.affilId);self.affilId=ui.item.affilId;self.startYear="2008";self.endYear="2018";self.subArea="";self.submitSearch();}});return this;},applyFilter:function(e){e.preventDefault();var self=this,startYr=$("#dd-start-year").val(),endYr=$("#dd-end-year").val(),subAreaCode=$("#dd-subject-area").val();if(parseInt(startYr)>parseInt(endYr)){app.model.trigger("ev:alert","error","Start year should be less than or equal to End year.",false,true);return false;}
self.startYear=startYr;self.endYear=endYr;self.subArea=subAreaCode;self.submitSearch();return false;},submitSearch:function(){var self=this,afId=self.affilId,sYear=self.startYear||"",eYear=self.endYear||"",subArea=self.subArea||"",$ddloader=self.$el.find('#ev-dd-loader'),$dashboard=self.$el.find('#ev-dd-chart-container'),$noresults=self.$el.find('#ev-dd-no-results'),fetchUrl=self.model.url+"?affilId="+afId,displayUrl=self.model.displayurl+"?affilId="+afId;app.model.trigger('ev:clearAlert');if(afId){displayUrl=sYear?displayUrl+"&startYear="+sYear+"&endYear="+eYear:displayUrl;displayUrl=subArea?displayUrl+"&subArea="+subArea:displayUrl;app.router.navigate(displayUrl,false);$noresults.hide();BaseFeatureView.prototype.showhideLoading(true,$ddloader);self.fetchSubAreaFilter(fetchUrl,subArea);this.model.fetch({url:fetchUrl,data:{startYear:sYear,endYear:eYear,subArea:subArea},contentType:"application/json",accept:"application/json",success:function(model,data){BaseFeatureView.prototype.showhideLoading(false,$ddloader);self.orgName=data.affiliation.affilName;if(data.response.docCount&&data.response.docCount>0){$dashboard.show();self.drawTotalDocPanel();self.drawColumnChart();self.drawCLPieChart();self.drawYRPieChart();self.drawAUColumnChart();self.drawGAGColumnChart();self.drawSTPieChart();}else{app.model.trigger("ev:alert","error","Please enter a valid AFID for search.",false,true);}},error:function(){BaseFeatureView.prototype.showhideLoading(false,$ddloader);var myJSON=JSON.parse(status.responseText);app.model.trigger("ev:alert","error",myJSON.errorText,false);}});}else{BaseFeatureView.prototype.showhideLoading(false,$ddloader);self.orgName="Organization Name";self.drawTotalDocPanel();}
return false;},fetchSubAreaFilter:function(fUrl,sArea){var self=this;this.model.fetch({url:fUrl,data:{startYear:"2008",endYear:"2018",navs:"clnav"},contentType:"application/json",accept:"application/json",success:function(model,data){if(data.response.docCount&&data.response.docCount>0){self.populateSubArea(sArea);}else{window.console.info("No doc count");}}});},populateSubArea:function(sArea){var navField="cl",self=this,navs=_.findWhere(this.model.attributes.response.navList,{field:navField});if(!navs){return false;}
var modifiers=navs.modifiers.splice(navs.modifiers,10);subAreaDD=$("#dd-subject-area").empty(),subAreaOpt='<option value="" selected>Select subject Area</option>';_.each(modifiers,function(item,index){if(index==0)
subAreaDD.append(subAreaOpt);if(item.value===sArea){subAreaDD.append($("<option></option>").attr({value:item.value,selected:"selected"}).text(item.label));}else{subAreaDD.append($("<option></option>").attr("value",item.value).text(item.label));}});$("#dd-subject-area").select2({minimumResultsForSearch:Infinity,width:'90%'});},addCommas:function(nStr){nStr+='';var x=nStr.split('.'),x1=x[0],x2=x.length>1?'.'+x[1]:'',rgx=/(\d+)(\d{3})/;while(rgx.test(x1)){x1=x1.replace(rgx,'$1'+','+'$2');}
return x1+x2;},setSubAreaFilter:function(){var navField="cl",canvas=document.getElementById("ev-ddchart-canvas-cl"),title="Subject area",self=this;if(!_.isUndefined(canvas)){canvas.innerHTML="";var navs=_.findWhere(this.model.attributes.navList,{field:navField});if(!navs){return false;}
var modifiers=navs.modifiers.splice(navs.modifiers,10);this.drawDDChart(navField,title,self,canvas,modifiers,'pie');}},drawDDChart:function(navField,title,dd,canvas,modifiers,chartType){var labels=_.map(modifiers,function(nav){return nav.label}),jsonData={},data=[],year=new Date(),toogleChart=chartType=="pie"?"column":"pie",toogleChartBtnText=chartType=="pie"?"Bar":"Pie";jsonData.data=data;_.map(modifiers,function(nav){var jsonObj={"name":nav.label,"y":nav.count,"value":nav.value,};return jsonData.data.push(jsonObj);});data=jsonData.data;Highcharts.chart(canvas,{chart:{type:chartType},title:{text:title},plotOptions:{column:{cursor:'pointer',dataLabels:{enabled:true},point:{events:{click:function(){console.log("Name: "+this.category+"\n Records: "+this.y);dd.runSearch(dd,this);}}},colors:['#007398']},pie:{allowPointSelect:true,cursor:'pointer',dataLabels:{enabled:false},colorByPoint:true,showInLegend:true,point:{events:{click:function(){console.log("Name: "+this.name+"\n Records: "+this.y);dd.runSearch(dd,this);}}}}},credits:{enabled:false,text:'provided by Engineering Village \u00A9'+year.getFullYear()+' Reed Elsevier '},legend:{verticalAlign:'bottom',itemWidth:225},exporting:{buttons:{contextButton:{enabled:true},chartType:{text:toogleChartBtnText,onclick:function(){dd.drawDDChart(navField,title,dd,canvas,modifiers,toogleChart);}},}},xAxis:{title:{text:''},categories:labels},yAxis:{title:{text:'Total documents'}},series:[{name:'Records',data:data,field:navField,}]});},drawColumnChart:function(){var navField="cv",canvas=document.getElementById("ev-ddchart-canvas-cv"),title="Research focus",self=this;if(!_.isUndefined(canvas)){canvas.innerHTML="";var navs=_.findWhere(this.model.attributes.response.navList,{field:navField});if(!navs){return false;}
var modifiers=navs.modifiers.splice(navs.modifiers,10);this.drawDDChart(navField,title,self,canvas,modifiers,'column');}
return false;},drawAUColumnChart:function(){var navField="au",canvas=document.getElementById("ev-ddchart-canvas-au"),title="Top 10 authors",typeDescription="",self=this;if(!_.isUndefined(canvas)){canvas.innerHTML="";var navs=_.findWhere(self.model.attributes.response.navList,{field:navField});if(!navs){return false;}
var modifiers=navs.modifiers.splice(navs.modifiers,10);this.drawDDChart(navField,title,self,canvas,modifiers,'column');}},drawGAGColumnChart:function(){var navField="gag",canvas=document.getElementById("ev-ddchart-canvas-gag"),title="Funding sponsorship",self=this;if(!_.isUndefined(canvas)){canvas.innerHTML="";var navs=_.findWhere(this.model.attributes.response.navList,{field:navField});if(!navs){return false;}
var modifiers=navs.modifiers.splice(navs.modifiers,10);this.drawDDChart(navField,title,self,canvas,modifiers,'column');}},drawSTPieChart:function(){var navField="st",canvas=document.getElementById("ev-ddchart-canvas-st"),title="Source titles",self=this;if(!_.isUndefined(canvas)){canvas.innerHTML="";var navs=_.findWhere(this.model.attributes.response.navList,{field:navField});if(!navs){return false;}
var modifiers=navs.modifiers.splice(navs.modifiers,10);this.drawDDChart(navField,title,self,canvas,modifiers,'pie');}},drawCLPieChart:function(){var navField="cl",canvas=document.getElementById("ev-ddchart-canvas-cl"),title="Subject area",self=this;if(!_.isUndefined(canvas)){canvas.innerHTML="";var navs=_.findWhere(this.model.attributes.response.navList,{field:navField});if(!navs){return false;}
var modifiers=navs.modifiers.splice(navs.modifiers,10);this.drawDDChart(navField,title,self,canvas,modifiers,'pie');}},drawAuhtorPanel:function(){var navField="au",canvas=document.getElementById("ev-ddchart-canvas-au");if(!_.isUndefined(canvas)){canvas.innerHTML="";var navs=_.findWhere(this.model.attributes.response.navList,{field:navField});if(!navs){return false;}
var modifiers=navs.modifiers.splice(navs.modifiers,10),template='';_.each(modifiers,function(modifier,index){template=template+'<div class="row"><div class="col-md-10 col-lg-10 no-padding">'+modifier.label+'</div><div class="col-md-2 col-lg-2 ev-count no-padding">'+modifier.count+'</div></div>';});$('#ev-ddchart-canvas-au').html(template);}},drawSourcePanel:function(){var navField="st",canvas=document.getElementById("ev-ddchart-canvas-st");if(!_.isUndefined(canvas)){canvas.innerHTML="";var navs=_.findWhere(this.model.attributes.response.navList,{field:navField});if(!navs){return false;}
var modifiers=navs.modifiers.splice(navs.modifiers,10),template='';_.each(modifiers,function(modifier,index){template=template+'<div class="row"><div class="col-md-10 col-lg-10 no-padding">'+modifier.label+'</div><div class="col-md-2 col-lg-2 ev-count no-padding">'+modifier.count+'</div></div>';});$('#ev-ddchart-canvas-st').html(template);}},drawTotalDocPanel:function(){var canvas=document.getElementById("ev-dd-total-count"),self=this;if(!_.isUndefined(canvas)){var docCount=self.model.attributes.response.docCount;self.$orgTitle.text(self.orgName);canvas.innerHTML=self.addCommas(docCount);}},drawYRPieChart:function(){var navField="yr",canvas=document.getElementById("ev-ddchart-canvas-yr"),title="Publishing trends",self=this;if(!_.isUndefined(canvas)){canvas.innerHTML="";var navs=_.findWhere(this.model.attributes.response.navList,{field:navField});if(!navs){return false;}
var modifiers=navs.modifiers.splice(navs.modifiers,10);this.drawDDChart(navField,title,self,canvas,modifiers,'pie');}},runSearch:function(ddObj,chartObj){var ddafid=ddObj.affilId,searchQuery=ddObj.model.attributes.response.query+' AND ('+chartObj.options.value+' WN '+
chartObj.series.userOptions.field+')',url="/search/submit.url?implicit=true&usageOrigin=ddboard&searchtype=Expert&searchWord1="+
searchQuery+"&database=1&yearselect=yearrange&sort=yr";if(_.isUndefined(app.getRegion().currentView.searchView)){Backbone.Radio.channel("searchFormChannel").request("resetForms",'expert','searchLink');}
app.model.trigger("searchSubmitLink",url);return false;}});