var app=app||{};var PendoHelper=Mn.Object.extend({options:{apiKey:'d88f5387-b626-4f6a-62e6-e82534a961cf',visitor:{id:'',logged_in:false,email:'ANON',databases:'',addDate:000000,browserWidth:0,browserHeight:0},account:{id:'',name:'',orgtype:'Other'}},radioEvents:{'ev:application:start':'start'},initialize:function(options){(function(p,e,n,d,o){var v,w,x,y,z;o=p[d]=p[d]||{};o._q=[];v=['initialize','identify','updateOptions','pageLoad'];for(w=0,x=v.length;w<x;++w)(function(m){o[m]=o[m]||function(){o._q[m===v[0]?'unshift':'push']([m].concat([].slice.call(arguments,0)));};})(v[w]);y=e.createElement(n);y.async=!0;y.src='https://cdn.pendo.engineeringvillage.com/agent/static/d88f5387-b626-4f6a-62e6-e82534a961cf/pendo.js';z=e.getElementsByTagName(n)[0];z.parentNode.insertBefore(y,z);})(window,document,'script','pendo');$(document.body).append("<div id='ev-pendo-session-time-wrapper'></div>");},start:function(usersession){var self=this;if(usersession&&typeof usersession!='undefined'&&usersession.attributes.user&&typeof usersession.attributes.user!='undefined'){if(typeof pendo!='undefined'){self.options.visitor.logged_in=usersession.isIndividuallyAuthenticated();self.options.visitor.email=self.options.visitor.logged_in?usersession.attributes.user.email:'ANON';self.options.visitor.databases=usersession.attributes.userEntitlements.filter(function(entitlement){if(entitlement.entitlementType=="DATABASE")return true;}).map(function(db){return db.name;}).toString();self.options.visitor.browserWidth=$(window).width();self.options.visitor.browserHeight=$(window).height();self.options.account.id=usersession.attributes.user.account.accountId;self.options.account.name=usersession.attributes.user.account.accountName;self.options.account.orgtype=usersession.attributes.user.account.orgType;if(self.options.visitor.logged_in){self.options.visitor.id=usersession.attributes.user.webUserId;if(typeof app.userSession.attributes.userProfile.addDate!='undefined'){self.options.visitor.addDate=parseInt(app.userSession.attributes.userProfile.addDate);}
pendo.initialize(self.options);app.appChannel.trigger('ev:pendo:start',this);}else if(typeof Fingerprint2!='undefined'){new Fingerprint2({detectScreenOrientation:false,excludeScreenResolution:true,excludeAvailableScreenResolution:true}).get(function(result){self.options.visitor.id=result+'_'+usersession.attributes.user.account.accountNumber;pendo.initialize(self.options);app.appChannel.trigger('ev:pendo:start',this);});}}else{console.error("pendo object not found!");}}else{console.error("usersession and user objects required!");}},timings:function(interval,wrapper){if(!app.userSession||!wrapper||_.isUndefined(wrapper))return;wrapper.empty();var diffMins=Math.round((((new Date()-new Date(app.userSession.attributes.sessionCreatedTime))%86400000)%3600000)/60000);if(diffMins>=5&&diffMins<=30&&diffMins%5==0)wrapper.addClass('ev-pendo-session-time-'+diffMins+'-min');if(app.pendohelper&&!_.isUndefined(app.pendohelper))setTimeout(app.pendohelper.timings,interval,interval,wrapper);}});var app=app||{};var siteCatalyst=BaseFeatureView.extend({el:'body',options:{page:{businessUnit:"ELS:RP:ST",environment:"",language:"en",loadTime:"",loadTimestamp:"",name:"",sectionName:"",noTracking:"false",productName:"EV",type:""},visitor:{accessType:"ae:",accountId:"",accountName:"",consortiumId:"",industry:"",ipAddress:"",loginStatus:"",loginSuccess:"",sisId:"",userId:"ae:"},link:{},search:{},form:{}},firstTimeLoad:false,exportOpt:{url:"/delivery/download/getDocIdsFromBasket.url",id:"download"},searchFacets:[],radioEvents:{'ev:application:start':'start'},start:function(){},recordCount:20,events:{"mousedown #downloadlink":"contentExportStart","mousedown .auto-suggest-toggle":"autoSuggest","click #ev-header li a#login_loginlink":"login","click #login_submit_button_element":"login","click #login-open-athens":"login","click #login_other_inst":"login","click #loginfull_submit_button_element":"login","click #loginfull-open-athens":"login","click #institutionForm":"login","mousedown a.ev-create-account-link":"register","mousedown #ev-header li a#login_not_register":"loginRegister","click #ev-header li a#logout_logoutform":"logout","mousedown #ev-tablist li a":"searchPage","show.bs.collapse .show-preview-content":"showPreview","mousedown .fulltextabs, .full-text-link":"fulltext","mousedown .refine-submit":"refineSubmit","click .lh-link":"localFulltext","mousedown .cdm-link":"localFulltext","mousedown .ev-mlt-title a":"clickRelDocTitle","mousedown .ev-mlt-author a":"clickRelDocAuthor","mousedown .mlt-viewAll":"clickRelDocViewAll","mousedown .plum-detail-link":"clickPlumDetails","mousedown .plx-wrapping-print-link":"clickPlumIcon","click #ev-support-help-link":"trackHeaderHelpLink"},initialize:function(opt){var self=this;this.listenTo(app.appChannel,"ev:sitecatalyst",this.track);pageData=$.extend(true,self.options,pageData);this.pageEvents.trackEvents();self.firstTimeLoad=true;if(pageData.visitor.loginSuccess=="false"||(pageData.visitor.loginSuccess=="")){delete pageData.visitor.loginSuccess;}},login:function(event){if($(event.target.parentElement).hasClass('collapsed')){this.pageEvents.conversionDriverClick({name:'ev:login-button:click'});this.pageEvents.loginStart();}},fulltext:function(event){var self=this;var ftUrl=$(event.target).attr("href");if(_.isUndefined(ftUrl)||_.isNull(ftUrl)||_.isEmpty(ftUrl)){ftUrl=$(event.target.parentElement).attr("href");if(_.isUndefined(ftUrl)||_.isNull(ftUrl)||_.isEmpty(ftUrl)){return;}}
$.post(ftUrl+"&json=true",function(data){if(data!=null){if(data.domain!=null){self.pageEvents.linkOut({docId:"docid:"+ftUrl.match(/docID=([^&]*)/)[1],linkout:"External|"+data.domain,name:"full-text",linktype:"full-text at publisher site"});}}},"json");},localFulltext:function(event){var self=this;var ftUrl=$(event.target).attr("href");if(ftUrl==null){ftUrl=$(event.target.parentElement).attr("href");}
$.post(ftUrl+"&json=true",function(data){if(data!=null){if(data.domain!=null){self.pageEvents.linkOut({docId:"docid:"+ftUrl.match(/docId=([^&]*)/)[1],linkout:"External|"+data.domain,name:"full-text",linktype:"local full text"});}}},"json");},clickRelDocTitle:function(event){var self=this;var numData;if(app.mlt.numericDataAvailable){if(app.mlt.numericDataUsed){numData="used";}else{numData="available";}}else{numData="not available";}
self.pageEvents.newPage("Related Docs:title:Version="+app.mltVersion+" (numeric data "+numData+")");},clickRelDocAuthor:function(event){var self=this;var numData;if(app.mlt.numericDataAvailable){if(app.mlt.numericDataUsed){numData="used";}else{numData="available";}}else{numData="not available";}
self.pageEvents.newPage("Related Docs:author:Version="+app.mltVersion+" (numeric data "+numData+")");},clickPlumDetails:function(event){var self=this;var ftUrl=$(event.target).attr("href");self.pageEvents.linkOut({linkout:"External|plum",name:"plum details",linktype:"plum details"});},clickPlumIcon:function(event){var self=this;var ftUrl=$(event.target).attr("href");self.pageEvents.linkOut({linkout:"External|plum",name:"plum icon",linktype:"plum icon"});},register:function(){this.pageEvents.conversionDriverClick({name:'ev:register-button:click'});this.pageEvents.registraionStart();},loginRegister:function(){this.pageEvents.conversionDriverClick({name:'ev:not-register-link:click'});this.pageEvents.registraionStart();},logout:function(){this.pageEvents.logoutClick();},searchPage:function(event){this.pageUtil($(event.currentTarget).attr('href'));},contentExportStart:function(){this.pageEvents.contentExportStart();},autoSuggest:function(event){this.pageEvents.autoSuggestClick($(event.currentTarget).attr('status'));},showPreview:function(event){if(typeof pageDataTracker!=="undefined"){var url=$(event.target).data('info');if(url!=""){this.pageEvents.contentWindowLoad(url.match(/docId=([^&]*)/)[1],"Record Preview");}}},clickRelDocViewAll:function(event){var self=this;var numData;if(app.mlt.numericDataAvailable){if(app.mlt.numericDataUsed){numData="used";}else{numData="available";}}else{numData="not available";}
self.pageEvents.newPage("Related Docs:view all:Version="+app.mltVersion+" (numeric data "+numData+")");},refineSubmit:function(event){var arrObj=$('#navigators :input[type="checkbox"]:checked').map(function(){return{value:this.value,name:this.name,title:$(".facet-header[data-target='#nav_"+(this.name).replace("nav","")+"_panel']").text().trim()}}).get(),self=this;if(arrObj.length==0){arrObj=$('#author-navigators :input[type="checkbox"]:checked').map(function(){return{value:this.value,name:this.name,title:$(".facet-header[data-target='#author_nav_"+(this.name)+"_panel']").text().trim()}}).get(),self=this;}
try{var facet=[],allFacetObjs={};if(arrObj!==null&&arrObj!==undefined&&arrObj.length>0){for(var i=0,len=arrObj.length;i<len;i++){if(allFacetObjs[arrObj[i].name]==undefined){var facetObj={name:arrObj[i].title,values:[]};facetObj['values'].push(arrObj[i].value);allFacetObjs[arrObj[i].name]=facetObj;facet.push(facetObj);}else{allFacetObjs[arrObj[i].name]['values'].push(arrObj[i].value)}}}else{console.log("Empty object for Facet genaration");};if(!($.isEmptyObject(facet))){self.searchFacets=facet;}}catch(e){console.log("exception occured while genarating facet list");}},track:function(action,obj){if(this.firstTimeLoad){this.firstTimeLoad=false;}
switch(action){case"searchResultsUpdated":if('searchMetaData'in obj&&'oAdobeAnalytics'in obj.searchMetaData){this.pageEvents.searchResultsUpdated(obj.searchMetaData.oAdobeAnalytics,($.isEmptyObject(this.searchFacets))?"":this.searchFacets);this.searchFacets=[];}
break;case"registerSuccess":this.pageEvents.registraionSuccess();break;case"conversionDriverClick":this.pageEvents.conversionDriverClick({name:obj});break;case"registraionStart":this.pageEvents.registraionStart();break;case"newPage":this.pageUtil(obj);break;case"loginStart":this.pageEvents.loginStart();break;case"autoSuggestClick":this.pageEvents.autoSuggestClick(obj);break;case"linkOut":this.pageEvents.linkOut(obj);break;case"emailPrintEvents":if(obj.list!="undefined"&&obj.list!=""){var docID="";if(obj.name=='email'){list=JSON.parse(obj.list);if('docids'in list){docID=list.docids;}}else{docID=obj.list;docID=docID.replace("[","").replace("]","").split(',').map(function(docId){return docId.trim()});}
this.pageUtil(obj.name+"Success");this.pageEvents.emailPrintEvents(docID,obj.name);}
break;case"contentDownload":case"contentExport":this.pageEvents.contentDownload(obj.docList,obj.dlopt);break;case"getExportDociIds":this.getExportDociIds(obj);break;case"saveToList":this.pageEvents.saveToList(obj);break;case"pendoToAdobe":this.pageEvents.pendoToAdobe(obj);break;default:break;}},getExportDociIds:function(dlOpt){var self=this;$.ajax({type:"POST",url:this.exportOpt.url,dataType:'json',success:function(data){if(data.docids!=undefined&&data.docids!='undefined'){self.pageEvents.contentDownload(data.docids,dlOpt);}}});},getUrlParams:function(param){var vars={};window.location.href.replace(location.hash,'').replace(/[?&]+([^=&]+)=?([^&]*)?/gi,function(m,key,value){vars[key]=value!==undefined?value:'';});if(param){return vars[param]?vars[param]:null;}
return vars;},pageUtil:function(pageName){var self=this,completeURL=Backbone.history.location.href,tracking=true;if(pageName==""){pageName=Backbone.history.location.pathname;}
switch(true){case pageName.indexOf("/home.url")!=-1:case pageName.indexOf("/customer/authenticate.url")!=-1:pageData.page.name="login:login";pageData.page.type="AP-LP";pageData.page.sectionName="login";break;case pageName.indexOf("/search/results/tags.url")!=-1:pageData.page.name="tags and groups:result";pageData.page.type="CP-CT";pageData.page.sectionName="search";break;case pageName.indexOf("/selected/detailedfolder.url")!=-1:case pageName.indexOf("/selected/content/citationfolder.url")!=-1:case pageName.indexOf("/selected/abstractfolder.url")!=-1:case pageName.indexOf("/selected/citationfolder.url")!=-1:pageData.page.name="personal:folder:result";pageData.page.type="CP-CT";pageData.page.sectionName="personal";break;case pageName.indexOf("/delivery/email/display.url")!=-1:pageData.page.type="MP-ER";pageData.page.sectionName="delivery";pageData.page.name="email:delivery";break;case pageName.indexOf("/delivery/email/submit.url")!=-1:case pageName.indexOf("emailSuccess")!=-1:pageData.page.type="MP-ER";pageData.page.sectionName="delivery";pageData.page.name="email:delivery:success";break;case pageName.indexOf("/delivery/print/display.url")!=-1:pageData.page.type="MP-ER";pageData.page.sectionName="delivery";pageData.page.name="print:delivery";break;case pageName.indexOf("printSuccess")!=-1:pageData.page.type="MP-ER";pageData.page.sectionName="delivery";pageData.page.name="print:delivery:success";break;case pageName.indexOf("/customer/authenticate/loginfull.url")!=-1:case pageName.indexOf("loginAlert")!=-1:pageData.page.name="personal:my alert";pageData.page.type="AP-AL";pageData.page.sectionName="personal";break;case pageName.indexOf("/customer/institutionchoice.url")!=-1:pageData.page.name="login:customer";pageData.page.type="AP-LP";pageData.page.sectionName="login";break;case pageName.indexOf("/customer/authenticate/manra.url")!=-1:pageData.page.name="login:remote:apply";pageData.page.type="AP-LP";pageData.page.sectionName="login";break;case pageName.indexOf("/customer/authenticate")!=-1:pageData.page.name="login:remote:activate";pageData.page.type="AP-LP";pageData.page.sectionName="login";break;case pageName.indexOf("/search/quick.url")!=-1:case pageName.indexOf("/search/quickform.url")!=-1:case pageName=="quick":pageData.page.name="search:quick";pageData.page.type="SP-SR";pageData.page.sectionName="search";break;case pageName.indexOf("/search/searchHistory.url")!=-1:case pageName.indexOf("/search/searchhistoryform.url")!=-1:case pageName=="searchHistory":pageData.page.name="search:history";pageData.page.type="SP-SR";pageData.page.sectionName="search";break;case pageName.indexOf("/search/expert.url")!=-1:case pageName.indexOf("/search/expertform.url")!=-1:case pageName=="expert":pageData.page.name="search:expert";pageData.page.type="SP-SR";pageData.page.sectionName="search";break;case pageName=="thesaurus":pageData.page.name="search:thesaurus";pageData.page.type="SP-SR";pageData.page.sectionName="search";break;case pageName.indexOf("/search/thesHome.url")!=-1:case pageName.indexOf("/search/thes.url")!=-1:case pageName.indexOf("/search/thesaurus.url")!=-1:case pageName=="thes":pageData.page.name="search:thesaurus";pageData.page.type="SP-SR";pageData.page.sectionName="search";break;case pageName.indexOf("/search/author.url")!=-1:case pageName.indexOf("/search/author/author.url")!=-1:case pageName=="author":pageData.page.name="search:author";pageData.page.type="SP-SR";pageData.page.sectionName="search";break;case pageName.indexOf("/search/affil.url")!=-1:case pageName.indexOf("/search/affil/affil.url")!=-1:case pageName=="affil":pageData.page.name="search:affiliation";pageData.page.type="SP-SR";pageData.page.sectionName="search";break;case(pageName=="/search/browseindex.url"&&completeURL.match(/lookup=([^&]*)/)=="AUS"&&completeURL.match(/browseindexlookuptype=([^&]*)/)=="AUTHOR"):case(completeURL.match(/browseindexlookuptype=([^&]*)/)=="AUTHORINVENTOR"):pageData.page.name="search:browse:author";pageData.page.type="SP-SR";pageData.page.sectionName="search";break;case(pageName=="/search/browseindex.url"&&completeURL.match(/lookup=([^&]*)/)=="AF"&&completeURL.match(/browseindexlookuptype=([^&]*)/)=="AFFILIATION"):case(completeURL.match(/browseindexlookuptype=([^&]*)/)=="AFFILIATIONASSIGNEE"):pageData.page.name="search:browse:author affiliation";pageData.page.type="SP-SR";pageData.page.sectionName="search";break;case(pageName=="/search/browseindex.url"&&completeURL.match(/lookup=([^&]*)/)=="CVS"):pageData.page.name="search:browse:control term";pageData.page.type="SP-SR";pageData.page.sectionName="search";break;case(pageName=="/search/browseindex.url"&&completeURL.match(/lookup=([^&]*)/)=="DT"):pageData.page.name="search:browse:document type";pageData.page.type="SP-SR";pageData.page.sectionName="search";break;case(pageName=="/search/browseindex.url"&&completeURL.match(/lookup=([^&]*)/)=="ST"):pageData.page.name="search:browse:source title";pageData.page.type="SP-SR";pageData.page.sectionName="search";break;case(pageName=="/search/browseindex.url"&&completeURL.match(/lookup=([^&]*)/)=="PN"):pageData.page.name="search:browse:publisher";pageData.page.type="SP-SR";pageData.page.sectionName="search";break;case(pageName=="/search/browseindex.url"&&completeURL.match(/lookup=([^&]*)/)=="PC"):pageData.page.name="search:browse:country";pageData.page.type="SP-SR";pageData.page.sectionName="search";break;case(pageName=="/search/browseindex.url"&&completeURL.match(/lookup=([^&]*)/)=="PID"):pageData.page.name="search:browse:IPC code";pageData.page.type="SP-SR";pageData.page.sectionName="search";break;case(pageName=="/search/browseindex.url"&&completeURL.match(/lookup=([^&]*)/)=="AUS"&&completeURL.match(/browseindexlookuptype=([^&]*)/)=="INVENTOR"):pageData.page.name="search:browse:inventor";pageData.page.type="SP-SR";pageData.page.sectionName="search";break;case(pageName=="/search/browseindex.url"&&completeURL.match(/lookup=([^&]*)/)=="AF"&&completeURL.match(/browseindexlookuptype=([^&]*)/)=="ASSIGNEE"):pageData.page.name="search:browse:assignee";pageData.page.type="SP-SR";pageData.page.sectionName="search";break;case pageName.indexOf("/search/results/quick.url")!=-1:case pageName.indexOf("/search/results/expert.url")!=-1:case pageName.indexOf("/search/results/thes.url")!=-1:pageData.page.name="results:results";pageData.page.type="SP-ST";pageData.page.sectionName="results";break;case pageName.indexOf("/selected/citation.url")!=-1:pageData.page.name="results:selected records";pageData.page.type="SP-ST";pageData.page.sectionName="results";break;case pageName.indexOf("/search/results/dedupForm.url")!=-1:case pageName.indexOf("/search/results/dedup.url")!=-1:pageData.page.name="results:dedup";pageData.page.type="SP-ST";pageData.page.sectionName="results";break;case pageName.indexOf("/search/doc/abstract.url")!=-1:case pageName=="abstract":pageData.content=app.getRegion().currentView.abstractView.model.attributes.oAdobeAnalytics.content;pageData.page.name="record:abstract";pageData.page.type="CP-CA";pageData.page.sectionName="record";break;case pageName.indexOf("/search/doc/detailed.url")!=-1:case pageName=="detailed":pageData.content=app.getRegion().currentView.abstractView.model.attributes.oAdobeAnalytics.content;pageData.page.name="record:detail";pageData.page.type="CP-CA";pageData.page.sectionName="record";break;case(pageName=="/search/doc/refs.url"&&completeURL.match(/refType=([^&]*)/)=="compendex"):case(pageName=="/search/doc/refs.url"&&completeURL.match(/refType=([^&]*)/)=="patent"):case(pageName=="/search/doc/refs.url"&&completeURL.match(/refType=([^&]*)/)=="nonpatent"):case pageName=="compendexref":case pageName=="patentref":case pageName=="nonpatentref":pageData.page.type="CP-CI";pageData.page.sectionName="record";if((pageName=="/search/doc/refs.url"&&completeURL.match(/refType=([^&]*)/)=="compendex")||pageName=="compendexref")
pageData.page.name="record:references CPX";if((pageName=="/search/doc/refs.url"&&completeURL.match(/refType=([^&]*)/)=="patent")||pageName=="patentref")
pageData.page.name="record:patent references";if((pageName=="/search/doc/refs.url"&&completeURL.match(/refType=([^&]*)/)=="nonpatent")||pageName=="nonpatentref")
pageData.page.name="record:other references";break;case(pageName.indexOf("/personal/savesearch/display.url")!=-1):case(pageName.indexOf("/personal/folders/display.url")!=-1):case(pageName.indexOf("/personal/folders/save/view.url")!=-1):case(pageName.indexOf("/personal/folders.url")!=-1):pageData.page.type="SP-SS";pageData.page.sectionName="personal";if(pageName.indexOf("/personal/savesearch/display.url")!=-1)
pageData.page.name="personal:alerts and searches";if(pageName.indexOf("/personal/folders/display.url")!=-1||pageName.indexOf("personal/folders.url")!=-1)
pageData.page.name="personal:folders";if(pageName.indexOf("/personal/folders/save/view.url")!=-1)
pageData.page.name="personal:folder:save";break;case"/customer/profile/display.url":case(carsResponse!=null&&carsResponse.pageName=="CARS_REGISTER"):case(pageName=="/customer/profile.url"&&carsResponse.pageName=="CARS_REGISTER_SUCCESSFUL"):pageData.page.name="personal:register";pageData.page.type="AP-UR";pageData.page.sectionName="personal";pageData.form.type="registration";case pageName.indexOf("/customer/profile/display.url")!=-1:case(carsResponse!=null&&carsResponse.pageName=="CARS_REGISTER"):pageData.form.step="start";break;case(pageName=="/customer/profile.url"&&carsResponse.pageName=="CARS_REGISTER_SUCCESSFUL"):pageData.form.step="complete";break;case pageName.indexOf("/customer/settings.url")!=-1:case(pageName=="/customer/profile.url"&&carsResponse.pageName=="CARS_SETTINGS"):pageData.page.name="personal:my settings";pageData.page.type="AP-MY";pageData.page.sectionName="personal";break;case pageName.indexOf("/customer/password.url")!=-1:pageData.page.name="personal:change password";pageData.page.type="AP-LR";pageData.page.sectionName="personal";break;case pageName.indexOf("/customer/reminder.url")!=-1:pageData.page.name="personal:forgot password";pageData.page.type="AP-UP";pageData.page.sectionName="personal";break;case(carsResponse!=null&&carsResponse.pageName=="CARS_EDIT_PROFILE"):pageData.page.name="personal:profile details";pageData.page.type="AP-MY";pageData.page.sectionName="personal";break;case pageName.indexOf("/askanexpert/display.url")!=-1:pageData.page.name="support:ask expert";pageData.page.type="HP-CS";pageData.page.sectionName="support";break;case pageName.indexOf("/bulletins/display.url")!=-1:pageData.page.name="bulletins:list";pageData.page.type="CP-CA";pageData.page.sectionName="bulletins";break;default:tracking=false;break;}
if(tracking){if(pageData.visitor.loginSuccess!="undefined"||pageData.visitor.loginSuccess=="false"){delete pageData.visitor.loginSuccess;}
this.pageEvents.newPage(pageData.page.name);}},pageEvents:{trackEvents:function(eventName,obj){try{if(typeof pageDataTracker!='undefined'){if(eventName!==undefined&&obj!==undefined){pageDataTracker.trackEvent(eventName,obj);}else if(eventName!==undefined){pageDataTracker.trackEvent(eventName);}else{}}
else{}}
catch(e){}
finally{if(pageData.content!=null){pageData.content=null;}}},pageLoadTime:function(){if(typeof(performance)!='undefined'&&typeof(performance.timing)=='object'){var timing=performance.timing;var startTime=performance.timing.redirectStart||performance.timing.fetchStart||performance.timing.requestStart;var endTime=performance.timing.domContentLoadedEventEnd||performance.timing.domInteractive||performance.timing.domComplete||performance.timing.loadEventEnd;if(startTime&&endTime&&(startTime<endTime)){console.log(startTime+": "+endTime);return(endTime-startTime);}}
return'data not available';},loadTimestamp:function(){var tstamp=performance.timing.redirectStart||performance.timing.fetchStart||performance.timing.requestStart;return tstamp.toString();},getCloneData:function(obj){var dataObj={};if(obj!=undefined){dataObj=obj};var _pageData=$.extend(true,{},self.pageData,dataObj||{});return _pageData;},pageLoad:function(dataObj){},navigationClick:function(event){var data=this.getCloneData();data.page["eventName"]='navigationClick';data["link"]={location:'EV',name:event};this.trackEvents('navigationClick',data);},newPage:function(newPage){var data=this.getCloneData();data.page["extendedName"]=newPage;data.page["name"]=newPage;data.page["eventName"]="click";this.trackEvents('newPage',data);},registraionStart:function(){pageData.page.name="personal:register";pageData.page.type="AP-UR";pageData.page.sectionName="personal";pageData.form.type="registration";pageData.form.step="start";pageData.form.productName="EV";this.newPage(pageData.page.name);},registraionSuccess:function(){pageData.form.step="complete";this.newPage(pageData.page.name);},searchResultsUpdated:function(obj,facet){if(obj==null){return;}
var dataObj=this.getCloneData(obj),self=this,searchResult={search:{},};searchResult.search=obj.search;(facet!="null"&&facet!="")?searchResult.search.facets=facet:"";self.trackEvents('searchResultsUpdated',searchResult);},linkOut:function(obj){var data=this.getCloneData();var returnObj={};returnObj.content=[{id:obj.docId,linkOut:obj.linkout,}],returnObj.link={location:data.page.name,name:obj.name,type:obj.linktype};this.trackEvents('linkOut',returnObj)},contentExportStart:function(){this.trackEvents('contentExportStart')},contentWindowLoad:function(uniqID,windowName){this.trackEvents('contentWindowLoad',{content:[{id:"docid:"+uniqID,windowName:windowName}]});},conversionDriverClick:function(obj){this.trackEvents('conversionDriverClick',{conversionDriver:{name:obj.name}});},logoutClick:function(){this.trackEvents('logoutClick');},loginStart:function(){this.trackEvents('loginStart');},contentDownload:function(docIdList,dlOptions){var conversionName="",contentExportObj={content:[]},format="";(dlOptions.location=='tofolder')?conversionName='to-folder':conversionName=dlOptions.location;(dlOptions.format=='excel')?format='mime-xlsx':format='mime-'+dlOptions.format;if(!app.userStatus&&conversionName=='to-folder'){this.trackEvents('conversionDriverClick',{conversionDriver:{name:'ev:save-'+conversionName+':click'}});this.trackEvents('loginStart');}else{var size=docIdList.length;if(size>0){if(size>20)size=20;for(var i=0;i<size;i++){var exportObj={};exportObj.exportType=conversionName;exportObj.format=format;exportObj.id="docid:"+docIdList[i].trim();exportObj.type="ev-"+dlDisplayType;contentExportObj.content.push(exportObj);};}
this.trackEvents('contentExport',contentExportObj);}},contentExport:function(){this.trackEvents('contentExport',contentExportObj);},saveToList:function(docIdList){var savetoListObj={content:[]},size=docIdList.length,self=this;if(size>0){if(size>20)size=20;for(var i=0;i<size;i++){var saveTo={};saveTo.id="docid:"+docIdList[i].trim();savetoListObj.content.push(saveTo);}}
this.trackEvents('saveToList',savetoListObj);},emailPrintEvents:function(docIdList,linkName){var emailPrintObj={content:[],search:{}},size=docIdList.length;if(size>0){if(size>20)size=20;for(var i=0;i<size;i++){var contentObj={};contentObj.id="docid:"+docIdList[i];emailPrintObj.content.push(contentObj);}}
emailPrintObj.search.featureName=linkName;this.trackEvents('searchFeatureClick',emailPrintObj);},autoSuggestClick:function(autoObj){var autoSuggest={search:{}};if(typeof autoObj=="object"){autoSuggest.search.suggestedClickPosition=autoObj[2].length+1;autoSuggest.search.suggestedLetterCount=autoObj[2].length;autoSuggest.search.suggestedResultCount=autoObj[3].length;autoSuggest.search.typedTerm=autoObj[2];this.trackEvents('autoSuggestClick',autoSuggest);}else if(typeof autoObj=="boolean"||typeof autoObj=="string"){autoSuggest.search.featureName="EV:autosuggest:"+autoObj;this.trackEvents('searchFeatureClick',autoSuggest);}},pendoToAdobe:function(obj){if(typeof obj=="object"){if(!_.isUndefined(obj.action)){var pendoLink={search:{}};pendoLink.search.featureName="ev:pendo:"+obj.action;this.trackEvents('searchFeatureClick',pendoLink);}else{this.trackEvents('conversionDriverClick',{conversionDriver:{name:'ev:pendo:'+obj.name+':'+obj.status}});}}},},trackHeaderHelpLink:function(e){var self=this;self.pageEvents.linkOut({linkout:"External|help",name:"help page",linktype:"help page"});}});